(this["webpackJsonpdrc-forms-react-app"]=this["webpackJsonpdrc-forms-react-app"]||[]).push([[0],{1433:function(e,t,n){},1437:function(e,t,n){"use strict";n.r(t);n(518),n(535);var r,a=n(3),o=n.n(a),c=n(20),s=n(494),i=n.n(s),u=(n(672),n(2)),l=n(21),d=n(5),m=n(1),f=n.n(m),b=(n(1433),n(10)),j=(r={},window.location.search.substr(1).split("&").forEach((function(e){r[e.split("=")[0]]=e.split("=")[1]&&decodeURIComponent(e.split("=")[1])})),r),p=j.projectUrl||"https://testoauth-izshuiourtmigzc.form.io",h=j.apiUrl||"https://api.form.io",O={projectUrl:p,apiUrl:h,version:"0.0.0"},g={form:"user/login"},v={form:"admin/login"},x={formsFilter:"formsfilter",formsTable:"formstable",adminFormsTable:"adminformstable",submissionsTable:"submissionTable",namedSubmissionsTable:"namedSubmissionTable",user:"user",userProfile:"userprofile",folderForm:"folderform",userGroup:"usergroup",usersGroup:"usersGroup",folder:"folder",homePage:"homepage",myForms:"myforms",myTags:"mytags",myFormsTable:"myformstable",myFormsFilter:"myformsfilter",submissionName:"submissionName",route:"route",routeTrack:"submissionRouteTrack",routedSubmissionsTable:"routedsubmissionstable",submissionAccessData:"submissionaccessdata",processSettings:"processsettings",processSupplement:"processsupplement",allSpecial:"allspecial",csvFilters:"csvfilters",getSrc:function(e){return p+"/"+x["".concat(e)]}};d.Formio.setProjectUrl(O.projectUrl),d.Formio.setBaseUrl(O.apiUrl);var y=n(0),S=o.a.createContext(),E={init:!1,isActive:!1,user:null,authenticated:!1,submissionAccess:{},formAccess:{},projectAccess:{},roles:{},is:{},error:"",userInfo:{},isUserInfoFetched:!1,beforeLogoutActionExecution:!1,beforeLogoutAction:!1},F=Object(d.auth)(),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INFO_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,isUserInfoFetched:!1});case"USER_INFO_SUCCESS":var n=t.userInfo;return Object(u.a)(Object(u.a)({},e),{},{userInfo:n,error:"",isActive:!1,isUserInfoFetched:!0});case"USER_INFO_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,isActive:!1});case"SET_BEFORE_LOGOUT_ACTION":return Object(u.a)(Object(u.a)({},e),{},{beforeLogoutAction:t.action});case"SET_BEFORE_LOGOUT_ACTION_EXECUTION":return Object(u.a)(Object(u.a)({},e),{},{beforeLogoutActionExecution:t.execution});default:return F(e,t)}},_=function(e){return{type:"USER_INFO_SUCCESS",userInfo:e}},N=function(e){return{type:"USER_INFO_FAILURE",error:e}},C=function(e){return{type:"SET_BEFORE_LOGOUT_ACTION",action:e}},P=function(e){return{type:"SET_BEFORE_LOGOUT_ACTION_EXECUTION",execution:e}};function w(e){var t=o.a.useReducer(I,E),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r]);return Object(y.jsx)(S.Provider,Object(u.a)({value:c},e))}function T(){var e=o.a.useContext(S);if(!e)throw new Error("useAuth must be used within a AuthProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e(P(!1)),d.Formio.logout().then((function(){e({type:"USER_LOGOUT"}),t()}))},R=function(){return Object(y.jsx)("footer",{className:"footer bg-light shadow-lg",children:Object(y.jsxs)("div",{className:"container text-center mt-auto",style:{padding:"15px"},children:["Built with \u2665 by\xa0",Object(y.jsx)("a",{href:"https://form.io",children:"Form.io"}),Object(y.jsx)("span",{className:"text-muted mx-2",children:"|"}),Object(y.jsxs)("span",{className:"text-muted",children:["App version: ",O.version]})]})})},A=n.p+"static/media/Logo.da5311b4.png",U=function(e){var t=T().state.user,n=G(),r=n.state,o=n.dispatch,c=r.incomingCount,s=Object(a.useCallback)((function(e){z(o,e)}),[o]);return Object(a.useEffect)((function(){var e=null,n=f.a.get(t,"_id","");return n?(s(n),e=setInterval((function(){s(n)}),36e4)):!t&&e&&clearInterval(e),function(){e&&clearInterval(e)}}),[t,s]),Object(y.jsx)("span",{className:"badge badge-pill badge-warning rounded",children:c})},D=o.a.createContext(),M={incomingCount:0},L=function(e,t){switch(t.type){case"COUNT_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{error:"",incomingCount:t.incomingCount});case"COUNT_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,incomingCount:e.incomingCount});default:return e}};function B(e){var t=o.a.useReducer(L,M),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(D.Provider,Object(u.a)({value:c},e))}function G(){var e=o.a.useContext(D);if(!e)throw new Error("useIncomingCount must be used within a IncomingCountProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var q=function(e,t){return{type:"COUNT_SUCCESS",incomingCount:f.a.reduce(e,(function(e,n){var r=f.a.chain(n).get("data.tracking",[]).last().value();return r?f.a.chain(r).get("recipientsInfo",[]).find((function(e){return f.a.get(e,"to[0]._id","")===t})).get("opened").value()?e:++e:e}),0)}},V=function(e){return{type:"COUNT_SUCCESS",error:e}},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.routeTrack,"/submission"));return r.loadSubmissions({params:{"data.currentRoute.owners._id":t,"data.tracking.recipientsInfo.to._id":t,"data.tracking.recipientsInfo.opened":!1,select:"data.tracking"}},{ignoreCache:!0}).then((function(r){e(q(r,t)),n(null)})).catch((function(t){e(V(t)),n(t)}))},Y=n(32),Q=n(8),$="-1",K=function(e,t){var n=f.a.get(t,"properties.stagesSettings");return f.a.find(n,(function(t){return+t.id===+e}))||{}},H=function(e,t){var n=f.a.get(e,"metadata.stageId","");return K(n,t)},W=function(e,t){f.a.set(e,"metadata.stageId",f.a.get(t,"properties.stagesSettings[0].id",""))},J=function(e,t){f.a.set(e,"metadata.stageId",t)},X=function(e){var t=[];return Q.Utils.eachComponent(f.a.filter(e.components,(function(e){return e.stageId===$})),(function(e,n){"form"===e.type&&t.push(n)})),t},Z=function(e,t,n,r){f.a.each(X(e),(function(e){r&&(Se(t,e),he(t,e)),pe(t,n,e),ee(t,e)}))},ee=function(e,t){f.a.set(e,"".concat(t?"data.".concat(t,"."):"","metadata.inProcess"),!0)},te=function(e){return f.a.get(e,"properties.process",!1)},ne=function(e){var t=f.a.get(e,"data.submissionAccessData",{}),n=f.a.get(t,"owners",[]),r=f.a.get(t,"blockedOwners",[]);r.length&&(f.a.set(t,"owners",[].concat(Object(Y.a)(n),Object(Y.a)(r))),f.a.set(t,"blockedOwners",[]))},re=n(495),ae=n.n(re),oe="data.currentRoute.archiveUsers",ce="autoNameField",se=function(e){return e.hasOwnProperty("administrator")&&e.administrator},ie=function(e,t){f.a.set(e,"metadata.submissionName",t)},ue=function(e,t,n,r,a,o){var c=Object(u.a)(Object(u.a)({},t),r);return 10!==e?c.limit=e:delete c.limit,f.a.isNumber(o)&&1!==o?c.skip=(o-1)*e:delete c.skip,a?c.select=a:delete c.select,n?c.sort=n:delete c.sort,c},le=function(e){var t=e.limit,n=e.query,r=e.select,a=e.sort,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=new d.Formio("".concat(d.Formio.getProjectUrl(),"/form")),i=ue(t,Object(u.a)(Object(u.a)({},n),{},{type:"form"}),a,c,r,o);return s.loadForms({params:i})},de=function(e,t){var n="/".concat(e?"form/".concat(e):"".concat(t)),r="".concat(d.Formio.getProjectUrl()).concat(n);return new d.Formio(r).loadForm()},me=function(e,t,n){var r="/".concat(t?"form/".concat(t):"".concat(n));return new d.Formio("".concat(d.Formio.getProjectUrl()).concat(r,"/submission/").concat(e)).deleteSubmission()},fe=function(e,t,n){var r="/".concat(t?"form/".concat(t):"".concat(n)),a="".concat(d.Formio.getProjectUrl()).concat(r,"/submission").concat(e?"/".concat(e):"");return new d.Formio(a).loadSubmission()},be=function(e,t,n){var r=e._id,a=d.Formio.getProjectUrl(),o="/".concat(t?"form/".concat(t):"".concat(n)),c="/submission".concat(r?"/".concat(r):""),s="".concat(a).concat(o).concat(c);return new d.Formio(s).saveSubmission(e)},je=function(e){var t=e.limit,n=e.query,r=e.select,a=e.sort,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i="/".concat(c?"form/".concat(c):"".concat(s)),u=new d.Formio("".concat(d.Formio.getProjectUrl()).concat(i,"/submission")),l=ue(t,n,a,o,r);return u.loadSubmissions({params:l})},pe=function(e,t,n){f.a.set(e,"".concat(n?"data.".concat(n,"."):"","data.submissionAccessData.allOwnerIds"),[t._id]),f.a.set(e,"".concat(n?"data.".concat(n,"."):"","data.submissionAccessData.owners"),[t])},he=function(e,t){var n=f.a.get(e,"".concat(t?"data.".concat(t,"."):"","data.submissionAccessData"),{});f.a.each(n,(function(e,t){n["".concat(t)]=[]}))},Oe=function(e){var t=f.a.get(e,"data.tracking",[]),n=f.a.last(t),r=f.a.get(e,"data.canceledTracks",[]),a={routeId:n.routeId,dateCanceled:(new Date).toISOString(),recipientsInfo:n.recipientsInfo,senderInfo:n.senderInfo,stageId:n.stageId||"",stageName:n.stageName||""};t.pop(),r.push(a);var o=e.data,c=f.a.last(t);o.routeInitiators=f.a.chain(t).map((function(e){return f.a.get(e,"senderInfo[0].from[0]")})).value();var s=f.a.chain(c).get("recipientsInfo",[]).map((function(e){return f.a.get(e,"to[0]")})).value(),i=f.a.get(c,"senderInfo[0].dateSent",""),u=f.a.chain(t).map((function(e){var t=f.a.get(e,"senderInfo[0]",[]),n=f.a.get(t,"cc",[]),r=f.a.get(t,"bcc",[]),a=f.a.chain(e).get("recipientsInfo",[]).map((function(e){return f.a.get(e,"to[0]")})).value();return[].concat(Object(Y.a)(n),Object(Y.a)(r),Object(Y.a)(a))})).flattenDeep().uniqBy("_id").filter((function(e){return!f.a.some(s,(function(t){return t._id===e._id}))&&!f.a.some(o.routeInitiators,(function(t){return t._id===e._id}))})).value(),l=f.a.chain([].concat(Object(Y.a)(u),Object(Y.a)(s))).map((function(e){return e._id})).uniq().value(),d=f.a.chain(e).get(oe,[]).filter((function(e){return f.a.some(l,(function(t){return t===e._id}))})).value();o.currentRoute={allUsersIds:l,owners:s,readOnlyUsers:u,date:i,from:f.a.chain(t).last().get("senderInfo[0].from",[]).value(),archiveUsers:d}},ge={routeInitiators:[],currentRoute:{date:"",readOnlyUsers:[],owners:[],archiveUsers:[]},tracking:[],routedSubmission:{},routedForm:{}},ve=function(e,t,n,r,a){var o=f.a.isEmpty(n)?ge:n.data,c=t.data,s=t.created,i=c.owners,l=c.readOnlyUsersFrom,d=c.readOnlyUsersCc,m=c.readOnlyUsersBcc,b=te(r),j=f.a.uniqBy(Object(Y.a)(i),"_id"),p=f.a.chain([].concat(Object(Y.a)(d),Object(Y.a)(m),Object(Y.a)(f.a.get(o,"currentRoute.readOnlyUsers",[])),Object(Y.a)(f.a.chain(o).get("currentRoute.owners",[]).filter((function(e){return e._id!==l._id})).value()))).uniqBy("_id").filter((function(e){return!f.a.some(j,(function(t){return t._id===e._id}))})).value(),h=f.a.chain([].concat(Object(Y.a)(o.routeInitiators),[l])).uniqBy("_id").value(),O=function(){var t={stageName:"",stageId:""};if(b){var n=H(e,r);t.stageName=n.title,t.stageId=n.id}return t}();return{routeInitiators:h,currentRoute:{date:s,from:[l||{}],readOnlyUsers:p,owners:j,allUsersIds:f.a.chain([].concat(Object(Y.a)(p),Object(Y.a)(j))).map((function(e){return e._id})).filter((function(e){return!!e})).uniq().value(),archiveUsers:f.a.chain(o).get("currentRoute.archiveUsers",[]).filter((function(e){return!f.a.some(i,(function(t){return t._id===e._id}))})).value()},tracking:[].concat(Object(Y.a)(o.tracking),[Object(u.a)(Object(u.a)({routeId:t._id||""},O),{},{senderInfo:[{from:[l||{}],dateSent:s,comments:function(){if(!b)return"";var t="route from ".concat(K(a,r).title," to ").concat(O.stageName,";"),n=f.a.filter(r.components,(function(e){return e.stageId===a}));return Q.Utils.eachComponent(n,(function(n,r){if(n.showInTrack){var a=f.a.get(e.data,r,"");t="\n          ".concat(t,"\n          ").concat(a,";\n        ")}}),!0),t}(),cc:Object(Y.a)(d),bcc:Object(Y.a)(m)}],recipientsInfo:f.a.map(i,(function(e){return{dateOpened:"",opened:!1,to:[e]}}))})]),routedSubmission:{id:e._id,name:f.a.get(e,"metadata.submissionName","")},routedForm:{id:r._id,title:r.title,name:r.name}}},xe=function(e,t,n){var r=f.a.get(e,"".concat(n?"data.".concat(n,"."):"","data.submissionAccessData"),{});f.a.set(r,"allOwnerIds",f.a.chain(t).get("currentRoute.owners",[]).map((function(e){return e._id})).value()),f.a.set(r,"owners",f.a.get(t,"currentRoute.owners",[])),f.a.set(r,"readOnlyUsers",f.a.get(t,"currentRoute.readOnlyUsers",[])),f.a.set(r,"routeInitiators",f.a.get(t,"routeInitiators",[]))},ye=function(e,t){f.a.set(e,"".concat(t?"data.".concat(t,"."):"","metadata.routed"),!0)},Se=function(e,t){f.a.set(e,"".concat(t?"data.".concat(t,"."):"","metadata.routed"),!0)},Ee=function(e,t,n){if(xe(e,t),ye(e),te(n)){var r=X(n);f.a.each(r,(function(n){xe(e,t,n),ye(e,n)}))}},Fe="archived",Ie="deleted",_e=function(e,t){f.a.set(e,"metadata.status",t)},Ne=function(e){f.a.unset(e,"metadata.status")},Ce=function(e,t,n){var r=e.getComponent("submissions"),a=n||"_id";r&&r.dataTableReady.promise.then((function(){var e=f.a.get(r,"formioGrid.tbody",{}),n=f.a.get(e,"refs.row",[]),o=e.data;f.a.each(n,(function(e){e.classList.remove("bg-selected")})),f.a.each(t,(function(e){f.a.find(o,(function(t,r){if(t[a]===e)return n[r].classList.add("bg-selected"),t}))}))}))},Pe=function(e,t){f.a.get(e,oe,[]).push(t)},we=function(e,t){var n=f.a.get(e,oe,[]);f.a.set(e,oe,f.a.filter(n,(function(e){return e._id!==t._id})))},Te=function(e,t){var n=f.a.get(e,oe,[]);return f.a.some(n,(function(e){return e._id===t._id}))},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return f.a.chain(e).split("/").slice(0,t).join("/").value()},Re=function(){var e=Object(l.g)(),t=T(),n=t.state,r=t.dispatch,o=n.authenticated,s=n.is,i=n.userInfo,u=n.beforeLogoutAction,d=n.beforeLogoutActionExecution,m=se(s);Object(a.useEffect)((function(){d&&!u&&k(r,(function(){e.push("/auth")}))}),[u,d,r,e]);var b=f.a.sortBy([{icon:"fa fa-home fa-lg",path:"/",title:"",exact:!0,adminOnly:!1,authenticetedOnly:!0,priority:0},{icon:"fa fa-arrow-circle-down",afterTitle:Object(y.jsx)(U,{}),path:"/incoming",title:"All Incoming",notAdmin:!0,authenticetedOnly:!0,priority:10},{icon:"fa fa-arrow-circle-up",path:"/routed",title:"All Routed",notAdmin:!0,authenticetedOnly:!0,priority:15},{icon:"fa fa-wpforms",path:"/form",title:"Forms",adminOnly:!1,authenticetedOnly:!0,priority:23},{icon:"fa fa-check-square-o",path:"/myforms",title:"My Forms",notAdmin:!0,authenticetedOnly:!0,priority:25},{icon:"fa fa-address-card",path:"/employees",title:"Employees",adminOnly:!1,authenticetedOnly:!0,priority:30},{icon:"fa fa-user",path:"/users",title:"Users",adminOnly:!0,authenticetedOnly:!1,priority:35},{icon:"fa fa-users",path:"/groups",title:"Groups",adminOnly:!0,authenticetedOnly:!1,priority:40},{icon:"fa fa-folder-open",path:"/folders",title:"Folders",adminOnly:!0,authenticetedOnly:!1,priority:35}],(function(e){return e.priority}));return Object(y.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-4 shadow",children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(c.b,{className:"navbar-brand mr-5",to:"/",children:Object(y.jsx)("img",{className:"logo",alt:"Ohio Department of Rehabilitation and Correction",src:A,style:{height:"40px"}})}),Object(y.jsx)("ul",{className:"nav navbar-nav mr-auto",children:b.map((function(e){return e.adminOnly&&!m||e.authenticetedOnly&&!o||e.notAdmin&&m?null:Object(y.jsxs)(c.c,{exact:e.exact,to:e.path,role:"navigation link",className:"nav-link",children:[Object(y.jsx)("i",{className:e.icon}),"\xa0",e.title,"\xa0",e.afterTitle]},e.title)}))}),Object(y.jsxs)("ul",{className:"nav navbar-nav ml-auto",children:[o&&Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{to:"/employees/".concat(f.a.get(i,"_id","")),role:"navigation link",className:" nav-link",children:[Object(y.jsx)("span",{className:"fa fa-user-circle  fa-lg",title:"User: ".concat(f.a.get(i,"data.email",""))}),"\xa0"]})}),o?Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)("span",{className:"nav-link",role:"navigation link",onClick:function(){u?r(P(!0)):k(r,(function(){e.push("/auth")}))},children:[Object(y.jsx)("span",{className:"fa fa-sign-out fa-lg",title:"Log Out"}),"\xa0"]})}):Object(y.jsx)(c.c,{to:"/auth",role:"navigation link",className:"nav-link",children:"Login"})]})]})})},Ae=function(e){var t=e.style,n=void 0===t?{width:"60px",height:"60px"}:t,r=e.textClass,a=e.loaderMessage;return Object(y.jsxs)("div",{style:{marginLeft:"calc(50% - 60px)"},children:[Object(y.jsx)("div",{className:"spinner-border ".concat(r||"text-primary"),style:n,role:"status",children:Object(y.jsx)("span",{className:"sr-only",children:"Loading..."})}),a&&Object(y.jsx)("p",{style:{fontSize:"1.1rem",marginLeft:"-2rem",marginTop:"1rem"},children:"".concat(a," ...")})]})},Ue=function(){var e=T().state,t=e.authenticated,n=e.user,r=function(){if(e.user&&e.user.data)return Object(y.jsxs)("h3",{children:["You are logged in as\xa0",Object(y.jsx)("strong",{children:n.data.email}),"!"]})};return Object(y.jsx)("div",{className:"mt-3",children:Object(y.jsx)("div",{className:"container",children:t?Object(y.jsxs)("div",{className:"well text-center",children:[Object(y.jsx)(r,{}),Object(y.jsx)(d.Form,{src:x.getSrc("homePage")})]}):Object(y.jsxs)("h3",{className:"well text-center",children:["Please ",Object(y.jsx)(c.b,{to:"/auth",children:"log in"})," to start using the application"]})})})},De=function(e){var t=e.onYes,n=e.onNo,r=e.message,a=e.yesText,o=void 0===a?"Yes":a,c=e.noText,s=void 0===c?"No":c,i=e.wrapperStyles,u=void 0===i?{}:i;return Object(y.jsxs)("div",{className:"mt-3",style:u,children:[Object(y.jsx)("h4",{children:r}),Object(y.jsxs)("div",{className:"btn-group mt-3 mb-2",role:"group",children:[Object(y.jsx)("button",{onClick:t,type:"button",className:"btn btn-danger",children:o}),Object(y.jsx)("button",{onClick:n,type:"button",className:"btn btn-outline-dark",children:s})]})]})},Me=function(e){var t=e.width,n=e.height,r=e.className,a=e.children,o=e.contentStyles,c=Object(u.a)({position:"absolute",top:"50%",width:t||"180px",height:n||"100px",left:"50%",transform:"translate(-50%, -50%)",boxShadow:"0px 0px 22px rgba(0, 0, 0, 0.4)",zIndex:"1001",fontSize:"16px"},o);return Object(y.jsx)("div",{className:"overlay",style:{height:"100%",width:"100%",position:"absolute",zIndex:"1000",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:Object(y.jsx)("div",{className:r,style:c,children:a})})},Le=function(e){return Object(y.jsx)("h2",{className:"pt-2 text-capitalize",children:e.text})};Le.defaultProps={text:""};var Be=Le,Ge=function(e){var t=e.progress,n=void 0===t?0:t,r=e.message,a=e.title,o={width:"".concat(n,"%")};return Object(y.jsxs)("div",{className:"mt-5",children:[a&&Object(y.jsx)("h5",{children:a}),Object(y.jsx)("div",{className:"progress",style:{height:"1.5rem"},children:Object(y.jsx)("div",{className:"progress-bar progress-bar-striped  progress-bar-animated",role:"progressbar",style:o,"aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100"})}),Object(y.jsx)("p",{children:"".concat(r||"In progress"," ...")})]})},qe=function(e){var t=e.btnClass,n=e.text,r=e.onClick;return Object(y.jsx)("button",{type:"button",onClick:r,className:"btn ".concat(t),children:n})},Ve=function(){return Object(y.jsxs)("div",{className:"alert alert-warning",role:"alert",children:[Object(y.jsx)("h3",{className:"alert-heading text-center",children:"Page Not Found"}),Object(y.jsx)(c.b,{className:"",to:"/",children:"Go to Home Page"})]})},ze=function(e){var t=T().dispatch,n=Object(a.useState)(!1),r=Object(b.a)(n,2),o=r[0],c=r[1],s=e.asAdmin,i="".concat(O.projectUrl,"/").concat(s?v.form:g.form,"?live=1");return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.Form,Object(u.a)(Object(u.a)({},e),{},{src:i,onSubmitDone:function(e){Object(d.setUser)(e)(t)},formReady:function(t){e.onFormReady&&e.onFormReady(t),c(!0)}})),o?null:Object(y.jsx)(Ae,{})]})},Ye=function(){var e=Object(l.g)(),t=T().state,n=t.user,r=t.authenticated;return Object(a.useEffect)((function(){n&&r&&e.push("/")}),[n,r,e]),r&&n?null:Object(y.jsxs)("div",{className:"row mt-5",children:[Object(y.jsx)("div",{className:"col-lg-6 col-md-6",children:Object(y.jsx)(ze,{})}),Object(y.jsx)("div",{className:"col-lg-6 col-md-6",children:Object(y.jsx)(ze,{asAdmin:!0})})]})},Qe=function(e){return Object(y.jsxs)("div",{className:"login-wrapper",children:[Object(y.jsx)(Me,{className:"alert alert-info",children:Object(y.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(y.jsx)(Ae,{style:{marginBottom:" 10px"}}),"Logging In..."]})}),Object(y.jsx)("div",{className:"login-wrapper-body",children:e.children})]})},$e=function(){return Object(y.jsx)(Qe,{children:Object(y.jsx)(ze,{onFormReady:function(e){e.getComponent("loginAsUserWithOpenId").refs.button.click()}})})},Ke=n(25),He=n.n(Ke),We=o.a.createContext(),Je={error:"",forms:[],isActive:!1,pagination:{numPages:0,page:1,total:0},formsUpdateProgress:0,formsUpdating:!1,requestParamsSet:!1,requestParams:{limit:1e7,query:{},select:"",sort:""}};function Xe(e,t){switch(t.type){case"FORMS_RESET":return Je;case"FORMS_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{error:"",forms:[],isActive:!0,pagination:Object(u.a)(Object(u.a)({},e.pagination),{},{page:t.page})});case"UPDATE_START":return Object(u.a)(Object(u.a)({},e),{},{error:"",formsUpdating:!0,formsUpdateProgress:5});case"UPDATE_FINISH":return Object(u.a)(Object(u.a)({},e),{},{error:"",formsUpdating:!1,formsUpdateProgress:0});case"UPDATE_FAIL":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,formsUpdating:!1,formsUpdateProgress:0});case"UPDATE_PROGRESS":return Object(u.a)(Object(u.a)({},e),{},{formsUpdateProgress:t.progress});case"FORMS_SUCCESS":var n=t.forms.serverCount;return Object(u.a)(Object(u.a)({},e),{},{forms:t.forms,isActive:!1,pagination:Object(u.a)(Object(u.a)({},e.pagination),{},{numPages:Math.ceil(n/t.limit),total:n})});case"FORMS_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,isActive:!1});case"SET_FILTER_QUERY":return Object(u.a)(Object(u.a)({},e),{},{requestParams:Object(u.a)(Object(u.a)({},e.requestParams),{},{query:t.query}),requestParamsSet:!0,forms:[]});default:return e}}function Ze(e){var t=o.a.useReducer(Xe,Je),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(We.Provider,Object(u.a)({value:c},e))}function et(){var e=o.a.useContext(We);if(!e)throw new Error("useForms must be used within a FormsProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var tt=function(e,t){return{type:"FORMS_REQUEST",page:e,params:t}},nt=function(e,t){return{type:"FORMS_SUCCESS",forms:e,limit:t}},rt=function(e){return{type:"FORMS_FAILURE",error:e}},at=function(e){return{type:"UPDATE_FAIL",error:e}},ot=function(e,t){var n=t.limit,r=t.query,a=t.select,o=t.sort,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return e(tt(c,s)),le({limit:n,query:r,select:a,sort:o},c=1,s={}).then((function(t){e(nt(t,n)),i(null,t)})).catch((function(t){e(rt(t)),i(t)}))},ct=function(e){return(e=Q.Utils.fastCloneDeep(e))&&e.length?f.a.map(e,(function(e){return{formTitle:e.data.form.title,formId:e.data.form._id,formName:e.data.form.name||"",folderPath:e.data.folder.data.folderPath,folderId:e.data.folder._id}})):[]},st=function(e,t){var n=t.limit,r=t.query,a=t.select,o=t.sort,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};e(tt(c,s));var u=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission")),l="data.form,data.group.data";a=a?"".concat(a,",").concat(l):"";var m=ue(n,r,o,s,a,c);return u.loadSubmissions({params:m}).then((function(t){e(nt(ct(t),n)),i(null,t)})).catch((function(t){e(rt(t)),i(t)}))},it="submissionAccessData",ut=function(){return de(null,x.submissionAccessData).then((function(e){return f.a.chain(e).get("components",[]).find((function(e){return e.key===it})).value()}))},lt=function e(t,n,r,a){return function(e,t){return le({limit:e,query:{type:"form"}},t)}(r,a).then((function(o){var c;t((c=function(e,t,n){var r=f.a.round(e*t/n*100);return r>100?100:r}(r,a,o.serverCount),{type:"UPDATE_PROGRESS",progress:c}));var s=f.a.map(o,(function(e){var t="wizard"===e.display?"components[0].components":"components";if(f.a.chain(e).get(t).isArray().value()){var r=f.a.chain(e).get(t).filter((function(e){return e.key!==it})).value();r.push(n),f.a.set(e,t,r)}return function(e){var t=e._id,n="".concat(d.Formio.getProjectUrl(),"/form").concat(t?"/".concat(t):"");return new d.Formio(n).saveForm(e)}(e)}));return o.serverCount>r*a&&s.push(e(t,n,r,++a)),He.a.all(s)}))},dt=function(e,t){e(function(e){return{type:"SET_FILTER_QUERY",query:e}}(t))},mt=o.a.createContext(),ft={id:"",isActive:!1,lastUpdated:0,clonedForm:{},form:{},url:"",error:"",gridForm:{},gridError:"",options:{},formFolder:{},formFolderError:"",hasFormAccess:!1,accessCheckError:"",checkingAccess:!1,deletingForm:!1,deleteFormStatus:{},autofilledFields:[],loadingFormFolder:!1,isProcess:!1,accessControlComp:{},loadingAccessControlComp:!1,accessControlCompError:"",autoName:!1},bt={deletingFolder:{progress:10,message:"Deleting Form from Folder"},deletingForm:{progress:50,message:"Deleting Form"},finishing:{progress:99,message:"Finishing"}},jt=function(e,t){switch(t.type){case"FORM_CLEAR_ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:""});case"FORM_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,id:t.id,form:{},clonedForm:{},url:t.url,error:"",autofilledFields:[]});case"GRID_FORM_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{gridForm:{},gridError:""});case"GRID_FORM_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{gridForm:t.form,gridError:""});case"GRID_FORM_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{gridError:t.error});case"FOLDER_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{formFolder:{},loadingFormFolder:!0,formFolderError:""});case"FOLDER_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{formFolder:t.folder,loadingFormFolder:!1,formFolderError:""});case"FOLDER_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{loadingFormFolder:!1,formFolderError:t.error});case"ACCESS_CHECK_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{hasFormAccess:t.authorized,accessCheckError:"",checkingAccess:!1});case"ACCESS_CHECK_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{accessCheckError:"",checkingAccess:!0});case"ACCESS_CHECK_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{accessCheckError:t.error,checkingAccess:!1});case"FORM_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,id:t.form._id,form:t.form,clonedForm:f.a.cloneDeep(t.form),url:t.url||e.url,error:"",isProcess:te(t.form),autofilledFields:t.autofilledFields||[],autoName:t.autoName});case"FORM_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,isInvalid:!0,deletingForm:!1,error:t.error,deleteFormStatus:{},autofilledFields:[]});case"FORM_DELETE_START":return Object(u.a)(Object(u.a)({},e),{},{deletingForm:!0});case"FORM_SAVE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0});case"FORM_RESET":return ft;case"SET_FORM_OPTIONS":return Object(u.a)(Object(u.a)({},e),{},{options:t.options});case"SET_DELETE_STATUS":return Object(u.a)(Object(u.a)({},e),{},{deleteFormStatus:bt["".concat(t.status)]});case"ACCESS_COMP_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{accessControlComp:{},loadingAccessControlComp:!0,accessControlCompError:""});case"ACCESS_COMP_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{accessControlComp:t.accessControlComp,loadingAccessControlComp:!1,accessControlCompError:""});case"ACCESS_COMP_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{loadingAccessControlComp:!1,accessControlCompError:t.error});default:return e}};function pt(e){var t=o.a.useReducer(jt,ft),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(mt.Provider,Object(u.a)({value:c},e))}function ht(){var e=o.a.useContext(mt);if(!e)throw new Error("useForm must be used within a FormProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var Ot=function(e,t){return{type:"GRID_FORM_REQUEST",id:e,url:t}},gt=function(e,t){return{type:"GRID_FORM_SUCCESS",form:e,url:t}},vt=function(e){return{type:"GRID_FORM_FAILURE",error:e}},xt=function(e,t){return{type:"FORM_REQUEST",id:e,url:t}},yt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:"FORM_SUCCESS",form:e,url:t,autofilledFields:n,autoName:r}},St=function(e){return{type:"FORM_FAILURE",error:e}},Et=function(e){return{type:"FORM_SAVE",form:e}},Ft=function(e){return{type:"FOLDER_SUCCESS",folder:e}},It=function(e){return{type:"FOLDER_FAILURE",error:e}},_t=function(e){return{type:"ACCESS_CHECK_SUCCESS",authorized:e}},Nt=function(e){return{type:"ACCESS_CHECK_FAILURE",error:e}},Ct=function(e){return{type:"FORM_DELETE_START",error:e}},Pt=function(e){return{type:"SET_DELETE_STATUS",status:e}},wt=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o="/".concat(t?"form/".concat(t):"".concat(n)),c="".concat(d.Formio.getProjectUrl()).concat(o),s=new d.Formio(c);return e(xt(t,c)),s.loadForm().then((function(t){var n=t;n&&r&&(n=r(n)),e(yt(n)),a(null,n)})).catch((function(t){e(St(t)),a(t)}))},Tt=function(e,t){e(function(e){return{type:"SET_FORM_OPTIONS",options:e}}(t=t||{}))},kt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e(Et(t));var r=t._id,a="".concat(d.Formio.getProjectUrl(),"/form").concat(r?"/".concat(r):""),o=new d.Formio(a);o.saveForm(t).then((function(t){var r="".concat(d.Formio.getProjectUrl(),"/form/").concat(t._id);e(yt(t,r)),n(null,t)})).catch((function(t){e(St(t)),n(t)}))},Rt=function(e,t){var n="".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission");return new d.Formio(n).loadSubmissions({params:{"data.form._id":t}}).then((function(e){if(e.length){var t=e[0]._id;return new d.Formio("".concat(n,"/").concat(t)).deleteSubmission()}}))},At=function(e){return e({type:"ACCESS_COMP_REQUEST"}),de(null,x.submissionAccessData).then((function(e){return f.a.chain(e).get("components",[]).find((function(e){return"submissionAccessData"===e.key})).value()})).then((function(t){e({type:"ACCESS_COMP_SUCCESS",accessControlComp:t})})).catch((function(t){e({type:"ACCESS_COMP_FAILURE",error:t})}))},Ut=o.a.createContext(),Dt={error:"",formId:"",formName:"",isActive:!1,pagination:{numPages:0,page:1,total:0},submissions:[]},Mt=function(e,t){switch(t.type){case"SUBMISSIONS_RESET":return Dt;case"SUBMISSIONS_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{error:"",formId:t.formId,formName:t.formName,isActive:!0,pagination:Object(u.a)(Object(u.a)({},e.pagination),{},{page:t.page}),submissions:[]});case"SUBMISSIONS_SUCCESS":var n=t.submissions.serverCount;return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,pagination:Object(u.a)(Object(u.a)({},e.pagination),{},{numPages:Math.ceil(n/t.limit),total:n}),submissions:t.submissions});case"SUBMISSIONS_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,isActive:!1});case"SUBMISSIONS_ACTION_START":return Object(u.a)(Object(u.a)({},e),{},{error:"",isActive:!0});default:return e}};function Lt(e){var t=o.a.useReducer(Mt,Dt),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(Ut.Provider,Object(u.a)({value:c},e))}function Bt(){var e=o.a.useContext(Ut);if(!e)throw new Error("useSubmissions must be used within a SubmissionsProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var Gt=function(e,t,n,r){return{type:"SUBMISSIONS_REQUEST",page:e,params:t,formId:n,formName:r}},qt=function(e,t){return{type:"SUBMISSIONS_SUCCESS",submissions:e,limit:t}},Vt=function(e){return{type:"SUBMISSIONS_FAILURE",error:e}},zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=n.limit,a=n.query,o=n.select,c=n.sort,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};return e(Gt(t,s,i),u),je({limit:r,query:a,select:o,sort:c},s,i,u).then((function(t){e(qt(t,r)),l(null,t)})).catch((function(t){e(Vt(t)),l(t)}))},Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};e({type:"SUBMISSIONS_ACTION_START"}),He.a.all(f.a.map(t,(function(e){return be(e,n,r)}))).then((function(){e({type:"SUBMISSIONS_RESET"}),a()})).catch((function(t){e(Vt(t)),a(t)}))},Qt=function(e){var t=e.readOnly,n=e.onNameChange,r=e.onFormReady,o=e.name,c=Object(a.useState)(!1),s=Object(b.a)(c,2),i=s[0],u=s[1];return Object(y.jsxs)("div",{className:"alert alert-primary rounded my-3 pt-0 border border-primary",children:[Object(y.jsx)(d.Form,{submission:o?{data:{submissionName:o}}:null,src:x.getSrc("submissionName"),onChange:function(e){var t=f.a.get(e,"data.submissionName","");n(t)},formReady:function(e){u(!0),r(e)},options:{template:"bootstrap",iconset:"fa",noValidate:!0,readOnly:t}}),!i&&Object(y.jsx)(Ae,{})]})};Qt.defaultProps={onNameChange:function(){},onFormReady:function(){}};var $t=Qt,Kt=function(e){var t=e.children,n=e.onModalCloseClick,r=void 0===n?function(){}:n;return Object(y.jsx)(Me,{width:"90%",height:"80%",contentStyles:{overflowY:"scroll"},children:Object(y.jsxs)("div",{className:"modal-content font-weight-light submission-tracking",children:[Object(y.jsxs)("div",{className:"modal-header",children:[Object(y.jsx)("h5",{className:"modal-title font-weight-normal",children:"Route Tracking"}),Object(y.jsx)("button",{type:"button",className:"close",onClick:r,"data-dismiss":"modal","aria-label":"Close",children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),t]})})},Ht=function(e){var t=e.routeTrack,n=void 0===t?{}:t,r=e.onModalCloseClick,a=void 0===r?function(){}:r;return Object(y.jsx)(Kt,{onModalCloseClick:a,children:Object(y.jsx)(Wt,{routeTrack:n})})},Wt=function(e){var t=e.routeTrack,n=void 0===t?{}:t,r=e.showRoutesIds,o=Object(a.useState)(!1),c=Object(b.a)(o,2),s=c[0],i=c[1],u=f.a.get(n,"data.routedSubmission.name",""),l=f.a.get(n,"data.tracking[0].senderInfo[0].dateSent",""),m=f.a.get(n,"data.routedForm.name","-");return Object(y.jsxs)("div",{className:"modal-body p-3",children:[Object(y.jsxs)("div",{className:"row mb-4",children:[Object(y.jsxs)("span",{className:"col-5",children:[Object(y.jsx)("span",{className:"font-weight-bold mr-2",children:"Submission Name:  "}),u]}),Object(y.jsxs)("span",{className:"col-3",children:[Object(y.jsx)("span",{className:"font-weight-bold mr-2",children:"Report Date:"})," ",l?new Date(l).toLocaleDateString():"-"]}),Object(y.jsxs)("span",{className:"col-4",children:[Object(y.jsx)("span",{className:"font-weight-bold mr-2",children:"Form/Process Name:"}),m]})]}),Object(y.jsxs)("div",{className:"submission-tracking",children:[Object(y.jsx)(d.Form,{submission:n,src:x.getSrc("routeTrack"),options:{readOnly:!0,hide:{submit:!0},showRoutesIds:r},formReady:function(){i(!0)}}),!s&&Object(y.jsx)(Ae,{})]})]})},Jt=function(e){var t=e.routedSubmission,n=void 0===t?{}:t,r=e.message,o=Object(a.useState)(!1),c=Object(b.a)(o,2),s=c[0],i=c[1];return Object(y.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[r,Object(y.jsxs)("div",{className:"mt-2 font-italic",children:[Object(y.jsx)("input",{className:"mr-2",type:"checkbox",id:"track",name:"scales",checked:s,onChange:function(){return i(!s)}}),Object(y.jsx)("label",{htmlFor:"track",children:"Show Route Details"})]}),s&&Object(y.jsx)(Wt,{routeTrack:n})]})},Xt=function(e){var t=e.submissionId,n=e.formId,r=e.submission;return f.a.get(r,"metadata.routed","")?null:Object(y.jsx)(l.a,{to:"/form/".concat(n,"/submission/").concat(t)})},Zt=function(e){var t=e.onNo,n=void 0===t?function(){}:t,r=e.onYes,a=void 0===r?function(){}:r,o=e.onModalCloseClick,c=void 0===o?function(){}:o,s=e.message;return Object(y.jsx)(Me,{width:"70%",height:"30%",contentStyles:{top:"30%"},children:Object(y.jsxs)("div",{className:"modal-content font-weight-light rounded",children:[Object(y.jsx)("button",{type:"button ",className:"close text-right mr-2",onClick:c,"data-dismiss":"modal","aria-label":"Close",children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(y.jsx)("div",{className:"modal-body",children:Object(y.jsx)(De,{message:s,wrapperStyles:{margin:"1rem 2rem"},onYes:a,onNo:n})})]})})},en=function(){var e=Object(l.i)().formId;return Object(y.jsxs)("div",{className:"alert alert-warning ",role:"alert",children:[Object(y.jsx)("span",{className:"text-uppercase font-weight-bold",children:"Archived record. "}),"If you want to continue any operations with this record, you need to restore it in the ",Object(y.jsx)(c.b,{to:"/form/".concat(e,"/archived"),children:"Archived tab"})," ."]})},tn=function(e){var t=e.form,n=e.submission,r=e.children,a=H(n,t);return Object(y.jsxs)("div",{className:"alert alert-primary rounded my-3 pt-0 border border-primary row",children:[Object(y.jsxs)("div",{className:"col-10",children:[Object(y.jsxs)("div",{className:"row  mt-2",children:[Object(y.jsxs)("div",{className:"col-5",children:[Object(y.jsx)("span",{className:"mr-2 font-weight-bold",children:"Process Name:"}),Object(y.jsx)("span",{children:f.a.get(t,"name","")})]}),Object(y.jsxs)("div",{className:"col-7",children:[Object(y.jsx)("span",{className:"mr-2 font-weight-bold",children:"Process Title:"}),Object(y.jsx)("span",{children:f.a.get(n,"metadata.submissionName","")})]})]}),Object(y.jsxs)("div",{className:"row mt-2",children:[Object(y.jsxs)("div",{className:"col-5",children:[Object(y.jsx)("span",{className:"mr-2 font-weight-bold",children:"Current Stage:"}),Object(y.jsx)("span",{children:a.title})]}),Object(y.jsxs)("div",{className:"col-7",children:[Object(y.jsx)("span",{className:"mr-2 font-weight-bold",children:"Stage Description:"}),Object(y.jsx)("span",{children:a.description||"-"})]})]})]}),Object(y.jsx)("div",{className:"col-2 mt-2 d-flex justify-content-end align-items-center",children:r})]})},nn=o.a.createContext(),rn={formId:"",id:"",isActive:!1,lastUpdated:0,submission:{},url:"",error:"",deletingSubmission:!1,savingSubmission:!1,route:!1,routeSettings:{},routeTrack:{},routing:!1,processInitPage:null},an=function(e,t){switch(t.type){case"SET_INIT_PAGE":return Object(u.a)(Object(u.a)({},e),{},{processInitPage:t.initPage});case"SUBMISSION_CLEAR_ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:""});case"SUBMISSION_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{formId:t.formId,id:t.id,url:t.url,submission:{},isActive:!0});case"SUBMISSION_SAVE":return Object(u.a)(Object(u.a)({},e),{},{formId:t.formId,id:t.id,url:t.url||e.url,submission:{},isActive:!1,savingSubmission:!0});case"SUBMISSION_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{id:t.submission._id,submission:t.submission,isActive:!1,error:"",savingSubmission:!1});case"SUBMISSION_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,deletingSubmission:!1,savingSubmission:!1,error:t.error});case"START_DELETE_SUBMISSION":return Object(u.a)(Object(u.a)({},e),{},{deletingSubmission:!0});case"SUBMISSION_ROUTE":return Object(u.a)(Object(u.a)({},e),{},{routing:!0});case"SUBMISSION_AND_TRACK_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{formId:t.formId,id:t.id,url:t.url,submission:{},routeTrack:{},routing:!1,isActive:!0});case"SUBMISSION_AND_TRACK_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{id:t.submission._id,submission:t.submission,isActive:!1,routing:!1,error:"",savingSubmission:!1,routeTrack:t.routeTrack});case"CANCEL_ROUTE_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{submission:{},routeTrack:{},isActive:!0,error:""});case"SUBMISSION_AND_TRACK_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,deletingSubmission:!1,savingSubmission:!1,error:t.error,routing:!1});case"SUBMISSION_TRACK_SAVE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0});case"SUBMISSION_TRACK_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{routeTrack:t.submissionTrack,isActive:!1,error:""});case"SUBMISSION_TRACK_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error,isActive:!1});case"ARCHIVE_INCOMING_START":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,error:""});case"ROUTE_SETTINGS_SET":return Object(u.a)(Object(u.a)({},e),{},{route:!0,routeSettings:t.routeSettings});case"ROUTE_SETTINGS_RESET":return Object(u.a)(Object(u.a)({},e),{},{route:!1,routeSettings:{}});case"SUBMISSION_RESET":return rn;default:return e}};function on(e){var t=o.a.useReducer(an,rn),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(nn.Provider,Object(u.a)({value:c},e))}function cn(){var e=o.a.useContext(nn);if(!e)throw new Error("useSubmission must be used within a SubmissionProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var sn=function(e,t,n){return{type:"SUBMISSION_REQUEST",id:e,formId:t,url:n}},un=function(e,t){return{type:"SUBMISSION_SUCCESS",submission:e,url:t}},ln=function(e){return{type:"SUBMISSION_FAILURE",error:e}},dn=function(e,t,n){return{type:"SUBMISSION_AND_TRACK_REQUEST",id:e,formId:t,url:n}},mn=function(e,t,n){return{type:"SUBMISSION_AND_TRACK_SUCCESS",submission:e,routeTrack:t,url:n}},fn=function(e){return{type:"SUBMISSION_AND_TRACK_FAILURE",error:e}},bn=function(e){return{type:"SUBMISSION_TRACK_SUCCESS",submissionTrack:e}},jn=function(e){return{type:"SUBMISSION_TRACK_FAILURE",error:e}},pn=function(e){return{type:"ROUTE_SETTINGS_SET",routeSettings:e}},hn=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o="/".concat(n?"form/".concat(n):"".concat(r)),c="".concat(d.Formio.getProjectUrl()).concat(o,"/submission").concat(t?"/".concat(t):"");e(sn(t,n,c)),fe(t,n,r).then((function(t){e(un(t)),a(null,t)})).catch((function(t){e(ln(t)),a(t)}))},On=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return e({type:"SUBMISSION_SAVE"}),be(t,n,r).then((function(t){var o="/".concat(n?"form/".concat(n):"".concat(r)),c="".concat(d.Formio.getProjectUrl()).concat(o,"/submission/").concat(t._id);e(un(t,c)),a(null,t)})).catch((function(t){e(ln(t)),a(t)}))},gn=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return e({type:"START_DELETE_SUBMISSION"}),me(t,n,r).then((function(){e({type:"SUBMISSION_RESET"}),a(null,!0)})).catch((function(t){e(ln(t)),a(t)}))},vn=function(e,t,n,r,a,o){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},s=ve(t,n,r,a,o);Ee(t,s,a);var i=!f.a.isEmpty(r),l=i?Object(u.a)(Object(u.a)({},r),{},{data:Object(u.a)(Object(u.a)({},r.data),s)}):{data:s,state:"submitted"};e({type:"SUBMISSION_ROUTE"}),He.a.all([be(l,null,x.routeTrack),be(t,a._id)]).then((function(t){var n=Object(b.a)(t,2),r=n[0],a=n[1];e(mn(a,r)),c(null)})).catch((function(t){e(fn(t)),c(t)}))},xn=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o="/".concat(n?"form/".concat(n):"".concat(r)),c="".concat(d.Formio.getProjectUrl()).concat(o,"/submission").concat(t?"/".concat(t):"");e(dn(t,n,c)),He.a.all([fe(t,n,r),je({query:{"data.routedSubmission.id":t}},{},null,x.routeTrack)]).then((function(t){var n=Object(b.a)(t,2),r=n[0],o=n[1][0]||{};e(mn(r,o)),a(null,{submission:r,routeTrack:o})})).catch((function(t){e(fn(t)),a(t)}))},yn=o.a.createContext(),Sn=[];function En(e){var t=o.a.useState(Sn),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r]);return Object(y.jsx)(yn.Provider,Object(u.a)({value:c},e))}function Fn(){var e=o.a.useContext(yn);if(!e)throw new Error("useAlerts must be used within a AlertsProvider");var t=Object(b.a)(e,2),n=t[0],r=t[1],a=function(e){var t=Object(Y.a)(n);t.splice(e,1),r(t)},c=function(e,t){setTimeout((function(){a(e)}),t)};return{alerts:n,setAlerts:r,addAlert:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,o=n.length;return r([].concat(Object(Y.a)(n),[Object(u.a)(Object(u.a)({},e),{},{key:o})])),t&&c(o,a),o},removeAlert:a,removeAfter:c}}var In=function(e){var t=e.type,n=e.content;return Object(y.jsx)("div",{className:"mr-2 shadow rounded alert alert-".concat(t),children:n})},_n=function(e){var t=e.Alert,n=void 0===t?In:t,r=Fn().alerts;return Object(y.jsx)("div",{style:{position:"absolute",zIndex:1e3,top:0,right:"5rem",display:"flex",flexDirection:"column",marginTop:"10px"},children:r.map((function(e){return Object(a.createElement)(n,Object(u.a)(Object(u.a)({},e),{},{key:e.key}))}))})},Nn=function(e){var t=e.hideComponents,n=e.readOnly,r=e.formName,o=e.pathStart,c=e.options,s=e.noRedirectOnSubmit,i=e.disableSubmissionName,m=Object(l.g)(),b=Object(l.i)().formId,j=Fn().addAlert,p=T().state,h=p.userInfo,O=p.user,g=!!b,v=ht().state,x=v.isActive,S=v.error,E=v.form,F=v.autoName,I=Bt().dispatch,_=cn(),N=_.state,C=_.dispatch,P=N.url,w=N.submission,k=N.error,R=N.isActive,A=Object(u.a)(Object(u.a)(Object(u.a)({template:"bootstrap",iconset:"fa",readOnly:!!n},v.options),c),{},{userId:O._id,userProfileId:h._id}),U=Object(a.useRef)(),D=Object(a.useRef)();return(x||R||f.a.isEmpty(w)||f.a.isEmpty(E))&&!k?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[S,k]}),g&&Object(y.jsx)($t,{name:f.a.get(w,"metadata.submissionName",""),onFormReady:function(e){U.current=e},readOnly:n||i||F,onNameChange:function(e){var t,n;e&&g&&D.current&&D.current.hasError&&(null===(t=D.current)||void 0===t||null===(n=t.root)||void 0===n||!n.errors.length)&&D.current.triggerChange()}}),Object(y.jsx)(d.Form,{form:E,submission:w,url:P,hideComponents:t,onSubmit:function(e){On(C,e,b,r,(function(e,t){e||(j({type:"success",content:"Submission is successfully updated"}),I({type:"SUBMISSIONS_RESET"}),s||m.push("".concat(b?"/form/".concat(b,"/submission"):"".concat(o||"/"+r),"/").concat(t._id)))}))},formReady:function(e){D.current=e.getComponent("submit")},options:Object(u.a)(Object(u.a)({},A),{},{hooks:{customValidation:function(e,t){g||t();var n=U.current,r=f.a.get(n,"submission.data.submissionName","");r?(f.a.set(e,"metadata.submissionName",r),t()):(n.getComponent("submissionName").pristine=!1,n.getComponent("submissionName").checkValidity(),n.getComponent("submissionName").focus(),t("Please add name for this submission."))}}})})]})},Cn=o.a.createContext(),Pn={addingUserToEveryoneStatus:{},addingUserToEveryoneError:"",isCsvUserGroupsLoading:!1,isCsvUserGroupsFetched:!1,allowCsv:!1},wn="Everyone",Tn={gettingGroup:{progress:30,message:"Checking/Creating Everyone Group"},savingUserInGroup:{progress:70,message:"Saving User In Everyone Group"},finishing:{progress:99,message:"Finishing"}},kn=function(e,t){switch(t.type){case"USER_RESET":return Pn;case"SET_ADD_USER_STATUS":return Object(u.a)(Object(u.a)({},e),{},{addingUserToEveryoneStatus:Tn["".concat(t.status)]});case"ADD_USER_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{addingUserToEveryoneStatus:{},addingUserToEveryoneError:t.error});case"USER_GROUPS_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isCsvUserGroupsLoading:!0});case"CSV_USER_GROUPS_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isCsvUserGroupsLoading:!1,isCsvUserGroupsFetched:!0,allowCsv:!!t.userGroups.length});case"USER_GROUPS_FAIL":return Object(u.a)(Object(u.a)({},e),{},{isCsvUserGroupsLoading:!1,isCsvUserGroupsFetched:!0});default:return e}};function Rn(e){var t=o.a.useReducer(kn,Pn),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(Cn.Provider,Object(u.a)({value:c},e))}function An(){var e=o.a.useContext(Cn);if(!e)throw new Error("useUser must be used within a UserProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var Un=function(e){return{type:"ADD_USER_FAILURE",error:e}},Dn=function(e){return{type:"SET_ADD_USER_STATUS",status:e}},Mn=function(e){return{type:"CSV_USER_GROUPS_SUCCESS",userGroups:e}},Ln=function(e){return{type:"USER_GROUPS_FAIL",error:e}},Bn=function(e,t){return e.saveSubmission({data:{groupName:wn,description:"All Users Group"},state:"submitted"}).then((function(e){return e}))},Gn=function(e){var t="".concat(d.Formio.getProjectUrl(),"/").concat(x.usersGroup,"/submission"),n=new d.Formio(t);return n.loadSubmissions({params:{"data.groupName":wn}}).then((function(e){var t=e[0];return t||Bn(n)}))},qn=function(e,t,n){var r="".concat(d.Formio.getProjectUrl(),"/").concat(x.userGroup,"/submission");return new d.Formio(r).saveSubmission({data:{group:n,user:t},state:"submitted"}).then((function(e){return e}))},Vn=function(e){var t=cn(),n=t.state,r=t.dispatch,o=ht().state,c=o.form,s=o.formFolder,i=o.isProcess,m=n.submission,j=n.routeTrack,p=n.routeSettings,h=n.route,O=n.routing,g=T(),v=g.state,S=g.dispatch,E=v.beforeLogoutAction,F=v.is,I=se(F),_=Object(l.i)(),N=_.formId,P=_.submissionId,w=Object(l.g)(),k=Fn().addAlert,R="".concat(window.location.origin,"/form/").concat(N,"/incoming/").concat(P),A=Object(a.useState)({routedFormLink:R}),U=Object(b.a)(A,2),D=U[0],M=U[1],L=Object(a.useState)(!1),B=Object(b.a)(L,2),G=B[0],q=B[1];Object(a.useEffect)((function(){O&&q(!0)}),[O]);var V=Object(a.useCallback)((function(){var e=f.a.get(s,"data.folder.data.userGroups",[]);return f.a.some(e,(function(e){return f.a.get(e,"data.groupName","")===wn}))}),[s]),z=Object(a.useCallback)((function(){var e=p.routeRecipients,t=[],n=h&&!f.a.every(e,(function(e){return"user"===f.a.get(e,"recipientType","")})),r=!n||f.a.some(e,(function(e){return"user"===f.a.get(e,"recipientType","")}));r&&!n||(t=f.a.chain(e).map((function(e){return f.a.get(e,"group","")})).filter((function(e){return!!e})).uniq().value());var a=f.a.get(s,"data.folder.data.userGroups",[]);return r&&!i?f.a.some(a,(function(e){return f.a.get(e,"data.groupName","")===wn}))?"":f.a.chain(a).map((function(e){return e._id})).join(",").value():r&&i?!n&&f.a.some(a,(function(e){return f.a.get(e,"data.groupName","")===wn}))?"":n&&f.a.some(a,(function(e){return f.a.get(e,"data.groupName","")===wn}))?f.a.chain(t).join(",").value():f.a.chain(a).map((function(e){return e._id})).join(",").value():V()?f.a.chain(t).join(",").value():f.a.chain(t).filter((function(e){return f.a.some(a,(function(t){return t._id===e}))})).join(",").value()}),[s,h,p,i,V]);Object(a.useEffect)((function(){I||M({readOnly:!1,routedForm:c,standAlone:!i,userGroups:z(),routedSubmission:m,user:v.user,routedFormLink:R,routeSettings:Object(u.a)(Object(u.a)({},p),{},{everyoneGroup:V()}),isProcess:i,currentStage:H(m,c).title,nextStage:K(f.a.get(p,"routeStage",""),c).title})}),[e,v,i,R,c,m,V,I,s,p,z]);return I?Object(y.jsx)("div",{className:"alert alert-warning ",role:"alert",children:"The Routing functionality is only available to users."}):Object(y.jsx)("div",{children:!D.user||G?Object(y.jsx)(Ae,{}):Object(y.jsx)(d.Form,{src:x.getSrc("route"),options:D,onSubmitDone:function(e){ne(m);var t=null;if(i){t=function(e){return f.a.get(e,"metadata.stageId","")}(m);var n=f.a.get(p,"routeStage","");n&&J(m,n)}vn(r,m,e,j,c,t,(function(e){e||(E&&S(C(!1)),k({type:"success",content:"Submission succesfully routed"}),w.push("/form/".concat(N,"/routed")))}))},formReady:function(e){i&&e.on("backToProcess",(function(){r({type:"ROUTE_SETTINGS_RESET"})}))}})})},zn=o.a.createContext(),Yn={url:"",pdfUrl:"",error:"",isPdfUrlLoading:!1},Qn=function(e,t){switch(t.type){case"PDF_URL_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isPdfUrlLoading:!0,url:t.url,error:""});case"PDF_URL_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isPdfUrlLoading:!1,pdfUrl:t.pdfUrl,error:""});case"PDF_URL_FAIL":return Object(u.a)(Object(u.a)({},e),{},{isPdfUrlLoading:!1,error:t.error});case"STATE_RESET":return Yn;default:return e}};function $n(e){var t=o.a.useReducer(Qn,Yn),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(zn.Provider,Object(u.a)({value:c},e))}function Kn(){var e=o.a.useContext(zn);if(!e)throw new Error("useSubmissionConversion must be used within a SubmissionConversionProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var Hn=function(e){return{type:"PDF_URL_REQUEST",url:e}},Wn=function(e){return{type:"PDF_URL_SUCCESS",pdfUrl:e}},Jn=function(e){return{type:"PDF_URL_FAIL",error:e}},Xn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=new d.Formio(t);e(Hn()),r.getDownloadUrl().then((function(t){e(Wn(t)),n(t)})).catch((function(t){e(Jn(t)),n(t)}))},Zn=function(){var e=cn().state.url,t=ht().state,n=t.isProcess,r=f.a.get(t,"formFolder.data.folder.data.forbidPdfDownload"),o=T().state.is,c=se(o),s=Kn(),i=s.state,u=s.dispatch,l=i.isPdfUrlLoading,d=i.pdfUrl,m=c||!r;return Object(a.useEffect)((function(){m&&e&&!n&&Xn(u,e)}),[u,e,n,m]),l?Object(y.jsx)(Ae,{style:{width:"32px",height:"32px"}}):m&&d?Object(y.jsx)("div",{className:"d-flex justify-content-end",role:"group","aria-label":"Basic example",children:Object(y.jsx)("a",{type:"button",href:d,rel:"noreferrer",target:"_blank",className:"btn btn-info mr-2",children:"PDF"})}):null},er=function(e){var t=e.hideComponents,n=e.readOnly,r=e.formName,o=e.options,c=Object(l.i)().formId,s=Object(a.useRef)(),i=Object(a.useRef)(),m=ht().state,b=T().state,j=b.user,p=b.userInfo,h=b.is,O=se(h),g=m.isActive,v=m.error,S=m.form,E=m.clonedForm,F=f.a.get(m,"formFolder.data.folder.data.forbidPdfDownload"),I=cn(),_=I.state,N=I.dispatch,C=_.url,P=_.submission,w=_.error,k=_.isActive,R=_.route,A=_.processInitPage,U=Kn().dispatch,D=Object(u.a)(Object(u.a)(Object(u.a)({template:"bootstrap",iconset:"fa",readOnly:!!n,initPage:A},m.options),o),{},{userId:j._id,userProfileId:p._id,isProcess:!0}),M=(g||k||f.a.isEmpty(P)||f.a.isEmpty(S))&&!w,L=function(e){var t;!O&&F||(e.component.stageId===$?(Q.Utils.eachComponent(e.components,(function(e){"form"===e.component.type&&(t=e.component)})),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a="/".concat(n?"form/".concat(n):"".concat(r)),o="".concat(d.Formio.getProjectUrl()).concat(a,"/submission").concat(t?"/".concat(t):"");Xn(e,o)}(U,P.data[t.key]._id,t.form)):U({type:"STATE_RESET"}))};return M?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[v,w]}),Object(y.jsx)(tn,{form:S,submission:P,children:!R&&!n&&Object(y.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),s.current.emit("submitButton",{state:"draft"})},children:"Save Process"})}),Object(y.jsx)(Zn,{}),R?Object(y.jsx)(Vn,{}):Object(y.jsx)(d.Form,{form:E,submission:P,url:C,hideComponents:t,onSubmit:function(e){var t=i.current.submission;f.a.set(e,"metadata.processSupplement",t),On(N,e,c,r),N({type:"SET_INIT_PAGE",initPage:s.current.page})},formReady:function(e){s.current=e,e.on("routeToStage",(function(e){var t=e.routeStage,n=e.routeRecipients;N(pn({routeStage:t,routeRecipients:n}))})),e.on("wizardPageSet",(function(e){L(e)}))},options:D}),Object(y.jsx)("hr",{}),!R&&Object(y.jsx)(d.Form,{submission:f.a.get(P,"metadata.processSupplement",{}),src:x.getSrc("processSupplement"),formReady:function(e){i.current=e},options:{template:"bootstrap",iconset:"fa",noValidate:!0,readOnly:n,user:j.data}})]})},tr=function(){var e=Object(l.i)(),t=e.formId,n=e.submissionId,r=cn(),o=r.dispatch,s=r.state,i=ht().state,u=i.isProcess,m=s.isActive,b=s.submission,j=s.error,p=T().state.is,h=se(p);Object(a.useEffect)((function(){hn(o,n,t,null)}),[o,n,t]),Object(a.useEffect)((function(){f.a.isEmpty(b)||h||function(e,t){f.a.get(t,"metadata.routed",!1)&&e(ln("This submission has been routed and is not available in Current/Archived/Deleted Tabs."))}(o,b)}),[o,b,h]);var O=f.a.get(b,"metadata.status",""),g=Object(a.useMemo)((function(){return O===Fe}),[O]),v=Object(a.useMemo)((function(){return O===Ie}),[O]),x=!h&&(g||v),S=Object(a.useCallback)((function(){return u?Object(y.jsx)($n,{children:Object(y.jsx)(er,{})}):Object(y.jsx)(Nn,{readOnly:!0})}),[u]),E=Object(a.useCallback)((function(){return u?Object(y.jsx)($n,{children:Object(y.jsx)(er,{})}):Object(y.jsx)(Nn,{readOnly:!1})}),[u]),F=Object(a.useCallback)((function(){return"/form/".concat(t,g?"/archived":v?"/deleted":"/submission")}),[g,v,t]),I=f.a.sortBy([{icon:"fa fa-chevron-left",path:F(),title:"",priority:0},{icon:"fa fa-eye",path:"/form/".concat(t,"/submission/").concat(n),condition:!u,title:"View",priority:10},{icon:"fa fa-edit",path:"/form/".concat(t,"/submission/").concat(n,"/edit"),condition:!x&&!u,title:"Edit",priority:20},{icon:"fa fa-level-up",path:"/form/".concat(t,"/submission/").concat(n,"/route"),condition:!x&&!u,notAdmin:!0,title:"Route",priority:30}],(function(e){return e.priority})),_=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs",children:I.map((function(e){return e.notAdmin&&h||f.a.isBoolean(e.condition)&&!e.condition?null:Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};if((m||f.a.isEmpty(b))&&!j)return Object(y.jsx)(Ae,{});var N=function(){return Object(y.jsxs)("div",{className:"alert alert-warning ",role:"alert",children:[Object(y.jsx)("span",{className:"text-uppercase font-weight-bold",children:"Deleted record. "}),"Go to the ",Object(y.jsx)(c.b,{to:"/form/".concat(t,"/deleted"),children:"Deleted tab"})," if you want to change the status of this record or delete it parmanently."]})};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"".concat(f.a.get(i,"form.title","")," Submission")}),g&&Object(y.jsx)(en,{}),v&&Object(y.jsx)(N,{}),!u&&Object(y.jsx)($n,{children:Object(y.jsx)(Zn,{})}),Object(y.jsx)(_,{}),Object(y.jsx)(d.Errors,{errors:[j]}),!j&&Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/submission/:submissionId",component:S}),!x&&!u&&[Object(y.jsx)(l.b,{path:"/form/:formId/submission/:submissionId/edit",component:E},"edit"),Object(y.jsx)(l.b,{path:"/form/:formId/submission/:submissionId/route",component:Vn},"route")]]})]})},nr=function(e){var t=e.FormError,n=e.formName,r=e.getViewPath,o=e.createSubmissionPath,s=e.addBtnTitle,i=e.id,m=e.submissionsRequestParams,j=e.title,p=e.hideAddBtn,h=e.beforeViewSubmission,O=void 0===h?function(){}:h,g=Object(l.g)(),v=Object(l.i)().formId||i,S=Object(u.a)({limit:1e5,query:{},select:"",sort:""},m),E=Object(a.useState)(S),F=Object(b.a)(E,2),I=F[0],_=F[1],N=Object(a.useState)(!1),C=Object(b.a)(N,2),P=C[0],w=C[1],T=Bt(),k=T.state,R=T.dispatch,A=ht(),U=A.state,D=A.dispatch;Object(a.useEffect)((function(){_((function(e){var t=Object(u.a)(Object(u.a)({},e),m);return w(!0),f.a.isEqual(e,t)?e:t}))}),[m]);var M=function(){var e=U.gridForm;if(e.components){var t=[];Q.Utils.eachComponent(U.form.components,(function(e){e.tableView&&t.push(Object(u.a)(Object(u.a)({},e),{},{calculateValue:""}))}),!0),e.components[0].components=t}return e},L=Object(a.useCallback)((function(e,t){zt(R,e,I,t,v,n)}),[R,v,n,I]);if(Object(a.useEffect)((function(){L(1)}),[L,v,I]),Object(a.useEffect)((function(){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a="/".concat(t?"form/".concat(t):"".concat(n)),o="".concat(d.Formio.getProjectUrl()).concat(a),c=new d.Formio(o);e(Ot(t,o)),c.loadForm().then((function(t){e(gt(t)),r(null,t)})).catch((function(t){e(vt(t)),r(t)}))}(D,"",x.submissionsTable)}),[D]),U.isActive||k.isActive||!P)return Object(y.jsx)(Ae,{});var B=k.submissions.map((function(e){return e.data})),G=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:B}},form:M(),options:Object(u.a)({noSubmit:!0,readOnly:!0},U.options),formReady:function(e){e.on("row:click",(function(e,t){var n=k.submissions[t];n&&(O(),g.push(r?r(v,n):"/form/".concat(v,"/submission/").concat(n._id)))}))}})},q=j||"Current Submissions - ".concat(U.form.title," Form "),V=function(){var e;return p?null:Object(y.jsx)("div",{className:"d-flex justify-content-end mb-2",children:Object(y.jsxs)(c.b,{className:"btn btn-primary",to:o||"/form/".concat(v||U.id),children:[Object(y.jsx)("i",{className:"glyphicon glyphicon-plus fa fa-plus","aria-hidden":"true"}),"\xa0 ",s||"New "+(null===(e=U.form)||void 0===e?void 0:e.title)]})})},z=function(){return Object(y.jsxs)("div",{className:"form-index",children:[Object(y.jsx)(d.Errors,{errors:[U.error,k.error]}),Object(y.jsx)(Be,{text:q}),Object(y.jsx)(V,{}),f.a.isEmpty(B)?"No items to display.":Object(y.jsx)(G,{})]})};return U.error&&t?Object(y.jsx)(t,{error:U.error,children:Object(y.jsx)(z,{})}):Object(y.jsx)(z,{})};nr.defaultProps={submissionsRequestParams:{}};var rr=nr,ar=function(e){var t=e.formName,n=e.paramName,r=e.deleteSubject,a=e.pathStart,o=Object(l.g)(),c=Object(l.i)(),s=c.formId,i=c.submissionId,u=Object(l.i)()["".concat(n,"Id")],m=cn(),b=m.state,j=m.dispatch,p=Bt().dispatch,h=ht().state,O=r||"the submission '".concat(f.a.get(b,"submission.metadata.submissionName","")||i||u,"'"),g="Are you sure you wish to delete ".concat(O,"?");return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[b.error,h.error]}),Object(y.jsx)(De,{message:g,onYes:function(){gn(j,i||u,s,t,(function(e){e||(p({type:"SUBMISSIONS_RESET"}),o.push("".concat(s?"/form/".concat(s,"/submission"):"".concat(a||"/"+t))))}))},onNo:function(){o.push("".concat(s?"/form/".concat(s,"/submission"):"".concat(a||"/"+t)))}})]})},or=function(e){var t=e.trackingSubmissionId,n=e.onModalCloseClick,r=void 0===n?function(){}:n,o=cn(),c=o.state,s=o.dispatch,i=c.isActive,u=c.routeTrack,l=c.error;Object(a.useEffect)((function(){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e({type:"SUBMISSION_TRACK_SAVE"}),je({query:{"data.routedSubmission.id":t}},{},null,x.routeTrack).then((function(t){var r=t[0]||{};e(bn(r)),n(null,r)})).catch((function(t){e(jn(t)),n(t)}))}(s,t)}),[s,t]);var m=function(){return l?Object(y.jsx)(d.Errors,{errors:[l]}):i?Object(y.jsx)(Ae,{}):f.a.isEmpty(u)?null:Object(y.jsx)(Wt,{routeTrack:u})};return Object(y.jsx)(Kt,{onModalCloseClick:r,children:Object(y.jsx)(m,{})})},cr=function(e){var t=e.FormError,n=e.formName,r=e.getViewPath,o=e.createSubmissionPath,s=e.addBtnTitle,i=e.id,m=e.submissionsRequestParams,j=void 0===m?{}:m,p=e.title,h=e.hideAddBtn,O=Object(l.g)(),g=Object(l.i)().formId||i,v=Object(u.a)({limit:1e5,query:{},select:"",sort:"-modified"},j),S=Object(a.useState)(v),E=Object(b.a)(S,2),F=E[0],I=E[1],_=Object(a.useState)(!1),N=Object(b.a)(_,2),C=N[0],P=N[1],w=Object(a.useState)({active:!1,selectedIds:[],delete:!1,archive:!1}),k=Object(b.a)(w,2),R=k[0],A=k[1],U=Bt(),D=U.state,M=U.dispatch,L=ht().state,B=Fn().addAlert,G=T().state.is,q=se(G);Object(a.useEffect)((function(){I((function(e){var t=Object(u.a)(Object(u.a)({},e),j);return P(!0),f.a.isEqual(e,t)?e:t}))}),[j]);var V=Object(a.useCallback)((function(e,t){zt(M,e,F,t,g,n)}),[M,g,n,F]);if(Object(a.useEffect)((function(){V(1)}),[V,g,F]),L.isActive||D.isActive||!C)return Object(y.jsx)(Ae,{});var z=D.submissions.map((function(e){return Object(u.a)(Object(u.a)({},e),e.metadata)})),Q=function(){A({active:!1,selectedIds:R.selectedIds,delete:!1,archive:!1})},$=function(){var e=R.selectedIds,t=R.archive,n=R.delete,r=t?Fe:n?Ie:"",a=f.a.chain(D.submissions).filter((function(t){return f.a.some(e,(function(e){return t._id===e}))})).each((function(e){return _e(e,r)})).value();Yt(M,a,g,null,(function(e){e||(V(1),A({active:!1,selectedIds:[],delete:!1,archive:!1}),B({type:"success",content:"Form Submissions are successfully moved to  the ".concat(n?"Deleted":t&&"Archived")}))}))},K=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:z,selectedSubmissions:R.selectedIds}},src:x.getSrc("namedSubmissionsTable"),options:Object(u.a)({noSubmit:!0,hide:{deletePermanently:!0,select:q,moveToCurrent:!0,track:!0}},L.options),formReady:function(e){e.on("open",(function(e){var t=e._id;t&&O.push(r?r(g,t):"/form/".concat(g,"/submission/").concat(t))})),e.on("page",(function(){Ce(e,e.data.selectedSubmissions)})),e.on("deselectAll",(function(){Ce(e,[])})),e.on("moveToArchived",(function(){A({active:!0,selectedIds:e.data.selectedSubmissions||[],delete:!1,archive:!0})})),e.on("moveToDeleted",(function(){A({active:!0,selectedIds:e.data.selectedSubmissions||[],delete:!0,archive:!1})})),e.on("selectRow",(function(t){var n=e.data.selectedSubmissions;e.data.selectedSubmissions=f.a.includes(n,t._id)?Object(Y.a)(f.a.filter(n,(function(e){return e!==t._id}))):[].concat(Object(Y.a)(n),[t._id]),Ce(e,e.data.selectedSubmissions),e.triggerChange()}))}})},H=p||"Current Submissions - ".concat(L.form.title," Form "),W=function(){var e;return h?null:Object(y.jsx)("div",{className:"d-flex justify-content-end mb-2",children:Object(y.jsxs)(c.b,{className:"btn btn-primary",to:o||"/form/".concat(g||L.id),children:[Object(y.jsx)("i",{className:"glyphicon glyphicon-plus fa fa-plus","aria-hidden":"true"}),"\xa0 ",s||"New "+(null===(e=L.form)||void 0===e?void 0:e.title)]})})},J=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[R.active&&Object(y.jsx)(Zt,{onNo:Q,onYes:$,message:R.archive&&Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsxs)("strong",{children:[R.selectedIds.length,"selected form submission(s)"]}),"  to the ",Object(y.jsx)("strong",{children:"Archived"}),"?"]})||R.delete&&Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsxs)("strong",{children:[R.selectedIds.length," selected form submission(s)"]})," to the ",Object(y.jsx)("strong",{children:"Deleted"}),"?"]}),onModalCloseClick:Q}),Object(y.jsx)(d.Errors,{errors:[L.error,D.error]}),Object(y.jsx)(Be,{text:H}),Object(y.jsx)(W,{}),f.a.isEmpty(z)?"No items to display.":Object(y.jsx)(K,{})]})};return L.error&&t?Object(y.jsx)(t,{error:L.error,children:Object(y.jsx)(J,{})}):Object(y.jsx)(J,{})},sr=function(){var e=T().state.is,t=se(e);return Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/submission",render:function(e){return Object(y.jsx)(cr,Object(u.a)({hideAddBtn:t,submissionsRequestParams:t?{query:{"metadata.inProcess__exists":!1}}:{query:{"metadata.routed__exists":!1,"metadata.status__exists":!1,"metadata.inProcess__exists":!1}}},e))}}),Object(y.jsx)(l.b,{path:"/form/:formId/submission/:submissionId",render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(tr,Object(u.a)({},e))})}})]})})},ir=function(e){var t=e.name,n=Object(l.g)(),r=et().dispatch,a=Object(l.i)().formId,o=ht(),c=o.state,s=o.dispatch,i=c.error,u=c.deletingForm,m=c.form,f=c.deleteFormStatus,b=f.progress,j=f.message,p="Are you sure you wish to delete the form '".concat(m.title,"'?");return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[i]}),u?Object(y.jsx)(Ge,{progress:b,message:j}):Object(y.jsx)(De,{message:p,onYes:function(){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a="/".concat(t?"form/".concat(t):"".concat(n)),o="".concat(d.Formio.getProjectUrl()).concat(a),c=new d.Formio(o);e(Ct()),e(Pt("deletingFolder")),Rt(0,t).then((function(){return e(Pt("deletingForm")),c.deleteForm()})).then((function(){e(Pt("finishing")),e({type:"FORM_RESET"}),r()})).catch((function(t){e(St(t)),r(t)}))}(s,a,t,(function(e){e||(r({type:"FORMS_RESET"}),n.push("/form"))}))},onNo:function(){var e=n[n.length-2];e&&n.push(e)}})]})},ur=function(e){var t=e.submission,n=e.hideComponents,r=e.name,o=e.pathStart,c=e.formName,s=e.title,i=e.options,m=e.addSubmissionAccess,b=Object(l.g)(),j=Object(l.i)().formId,p=cn(),h=p.dispatch,O=p.state,g=Bt().dispatch,v=T().state,x=v.userInfo,S=v.user,E=!!j,F=ht().state,I=F.form,_=F.clonedForm,N=F.error,C=F.isActive,P=F.url,w=F.options,k=F.autofilledFields,R=F.isProcess,A=F.autoName,U=Object(u.a)(Object(u.a)(Object(u.a)({template:"bootstrap",iconset:"fa"},w),i),{},{userId:S._id,userProfileId:x._id}),D=Object(a.useRef)(),M=Object(a.useRef)(),L=Object(a.useRef)(),B=function(){k.forEach((function(e){var t=L.current.getComponent(e.path),n=function(t){if(t){var n=t.evaluate(e.autofilledValue,{userProfile:x.data},"value");t.setValue(n)}};f.a.isArray(t)?f.a.each(t,(function(e){n(e)})):n(t)})),L.current.onChange()},G=function(){return k.length?Object(y.jsx)("div",{className:"d-flex justify-content-end mt-2",children:Object(y.jsx)("button",{onClick:B,className:"btn btn-primary",children:"Autofill With User Profile Data"})}):null};return C?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:s||"New ".concat(I.title)}),Object(y.jsx)(d.Errors,{errors:[N,O.error]}),Object(y.jsx)(G,{}),E&&!A&&Object(y.jsx)($t,{onFormReady:function(e){D.current=e},onNameChange:function(e){var t,n;e&&E&&(!M.current||!M.current.hasError||null!==(t=M.current)&&void 0!==t&&null!==(n=t.root)&&void 0!==n&&n.errors.length||M.current.triggerChange())}}),Object(y.jsx)(d.Form,{form:R?_:I,submission:t,url:P,formReady:function(e){L.current=e,M.current=e.getComponent("submit")},options:Object(u.a)(Object(u.a)({},U),{},{hooks:{customValidation:function(e,t){E||t();var n=D.current,r=A?f.a.get(e,"data.".concat(ce),""):f.a.get(n,"submission.data.submissionName","");r?(ie(e,r),t()):(n.getComponent("submissionName").pristine=!1,n.getComponent("submissionName").checkValidity(),n.getComponent("submissionName").focus(),t("Please add name for this submission."))}}}),hideComponents:n,onSubmit:function(e){R&&(W(e,I),Z(I,e,S)),m&&pe(e,S),On(h,e,j,r,(function(e,t){e||(g({type:"SUBMISSIONS_RESET"}),b.push(o||"".concat(j?"/form/".concat(j,"/submission"):"".concat("/"+c),"/").concat(t._id)))}))}})]})},lr=function(){var e=Fn().addAlert,t=ht(),n=t.state,r=t.dispatch,a=n.form,o=n.formFolder,c=!!o._id,s=function(t){var n=f.a.get(t,"data.folder._id"),o=d.Utils.fastCloneDeep(a);f.a.set(o,"properties.folder",n),kt(r,o,(function(n){n||(r(Ft(t)),e({type:"success",content:"Form succesfully updated"}))}))},i=function(){return{title:a.title,_id:a._id,name:a.name}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"Form '".concat(a.title,"' Folder")}),Object(y.jsx)(d.Form,{options:{editForm:a},src:x.getSrc("folderForm"),submission:c?(o.data=Object(u.a)(Object(u.a)({},o.data),{},{form:i()}),f.a.get(o,"data.folder.data.folderName")||f.a.set(o.data,"folder",{}),o):{data:{form:i()}},formReady:function(e){e.on("submitDone",(function(e){s(e)}))}})]})},dr=o.a.createContext(),mr={myFormForm:{},isActive:!1,error:"",myForm:{}},fr=function(e,t){switch(t.type){case"MY_FORM_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,myForm:{},error:""});case"MY_FORM_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,myForm:{},error:t.error});case"MY_FORM_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,error:"",myFormForm:{},myForm:t.myForm});case"MY_FORM_FORM_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{error:"",isActive:!1,myFormForm:t.myFormForm});case"MY_FORM_FORM_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,myFormForm:{},error:""});case"MY_FORM_FORM_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,myFormForm:{},error:t.error});case"FORM_SAVE_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error});case"MY_FORM_DELETE_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{isActive:!0,error:""});case"MY_FORM_DELETE_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isActive:!1,error:t.error});case"MY_FORM_RESET":return mr;default:return e}};function br(e){var t=o.a.useReducer(fr,mr),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(dr.Provider,Object(u.a)({value:c},e))}var jr=function(e){return{type:"MY_FORM_DELETE_FAILURE",error:e}},pr=function(e){return{type:"MY_FORM_SUCCESS",myForm:e}},hr=function(e){return{type:"MY_FORM_FORM_SUCCESS",myFormForm:e}},Or=function(e){return{type:"MY_FORM_FORM_FAILURE",error:e}},gr=function(e){return{type:"MY_FORM_FAILURE",error:e}},vr=function(e){return{type:"FORM_SAVE_FAILURE",error:e}},xr=function(e){var t="".concat(d.Formio.getProjectUrl(),"/").concat(x.myForms,"/submission");return new d.Formio(t).loadSubmissions({params:{"data.form._id":e._id}}).then((function(e){return!!e.length}))},yr=function(e){var t=e?e.map((function(e){return function(e){var t=e._id,n="".concat(d.Formio.getProjectUrl(),"/").concat(x.myTags,"/submission").concat(t?"/".concat(t):"");return new d.Formio(n).saveSubmission(e)}({data:{tag:e}})})):[];return He.a.all(t)},Sr=function(e){var t=e.newTags;return(e.addNewTags&&!!t.length?yr(t).then((function(t){return f.a.set(e,"tags",[].concat(Object(Y.a)(f.a.get(e,"tags",[])),Object(Y.a)(t))),f.a.unset(e,"newTags",[]),f.a.set(e,"addNewTags",!1),e})):He.a.resolve(e)).then((function(e){return e}))},Er=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(l.g)(),s=Object(l.i)().formId,i=Fn().addAlert,u=ht().state,m=u.form,j=u.error,p=u.isActive,h=function(){var e=o.a.useContext(dr);if(!e)throw new Error("useMyForm must be used within a MyFormProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}(),O=h.state,g=h.dispatch,v=O.myForm,S=O.isActive,E=O.error,F=O.myFormForm;Object(a.useEffect)((function(){s&&!n&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.myForms,"/submission"),a=new d.Formio(r);e({type:"MY_FORM_REQUEST"}),a.loadSubmissions({params:{"data.form.data.form._id":t}}).then((function(t){e(pr(t[0])),n(null,t)})).catch((function(t){e(gr("Error while getting My Form: ".concat(t))),n(t)}))}(g,s)}),[g,s,n]),Object(a.useEffect)((function(){s&&n&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission"),a=new d.Formio(r);e({type:"MY_FORM_FORM_REQUEST"}),a.loadSubmissions({params:{"data.form._id":t}}).then((function(t){e(hr(t[0]||{})),n(null,t[0])})).catch((function(t){e(Or(t))}))}(g,s)}),[g,s,n]);var I=function(){r(!0)},_=function(){r(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.myForms,"/submission/").concat(t));e({type:"MY_FORM_DELETE_REQUEST"}),r.deleteSubmission().then((function(){e({type:"MY_FORM_RESET"}),n(null,!0)})).catch((function(t){e(jr("Error while deleting My Form: ".concat(t))),n(t)}))}(g,v._id,(function(e){e||i({type:"success",content:"Form succesfully deleted from My Forms"})}))},N=function(){if(s&&!S&&!n){var e=f.a.isEmpty(v);return Object(y.jsx)("div",{className:"d-flex flex-row-reverse",children:Object(y.jsx)(qe,{btnClass:e?"btn-primary":"btn-danger btn-sm",text:e?'Add Form "'.concat(m.title,'" To My Forms'):"Delete Form From My Forms",onClick:e?I:_})})}return null},C=function(){return p||S?Object(y.jsx)(Ae,{}):null},P=function(){return p||S||(!s||f.a.isEmpty(v))&&s&&!n?null:Object(y.jsx)(d.Form,{src:x.getSrc("myForms"),options:{disableForm:!!s,hooks:{customValidation:function(e,t){!function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=[];He.a.resolve().then((function(){var e=t.data,r=e.tags,a=e.newTags,c=e.form;return r.length||a&&a.length||o.push({message:"Please add at least one tag that will be associated with the form."}),!!n&&xr(c)})).then((function(e){if(e&&o.push({message:"The form has already been added to My Forms, please select another form."}),!o.length)return Sr(t.data);r(o)})).then((function(e){e&&!o.length&&(t.data=e,r())})).catch((function(t){e(vr("Error while validating and transforming My Form data: ".concat(t))),a(t)}))}(g,e,!s,t)}}},submission:f.a.isEmpty(F)?v:{data:{form:F}},formReady:function(e){e.on("submitDone",(function(e){r(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e(pr(t)),n()}(g,e,(function(){i({type:"success",content:"My Form is succesfully saved"})})),c.push(s?c.location.pathnam:"/myforms")}))}})};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:f.a.isEmpty(v)&&n||!s?"New My Form":"My Form"}),Object(y.jsx)(d.Errors,{errors:[j,E]}),Object(y.jsx)(N,{}),Object(y.jsx)(C,{}),Object(y.jsx)(P,{})]})},Fr=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=T().state.is,i=se(s),d=cn(),m=d.dispatch,b=d.state;Object(a.useEffect)((function(){hn(m,o,null,n)}),[o,m,n]);var j=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"Edit",priority:20},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete",priority:40}],(function(e){return e.priority})),p=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:j.map((function(e){return!e.adminOnly||i||e.showCondition?Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title):null}))})},h=function(){var e=f.a.get(b,"submission.data.tag",null);return e?"tag '".concat(e,"'"):""};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"My Tag"}),Object(y.jsx)(p,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!1,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{pathStart:t,formName:n,paramName:r,deleteSubject:h()}))}})]})]})},Ir=function(){var e="/myforms/tags",t=x.myTags,n=ht(),r=n.dispatch,o=n.state,c=o.form,s=o.isActive;return Object(a.useEffect)((function(){wt(r,null,t)}),[r,t]),s||f.a.isEmpty(c)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(e),render:function(n){return Object(y.jsx)("div",{children:Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},n),{},{formName:t,getViewPath:function(t,n){return"".concat(e,"/").concat(n._id)},createSubmissionPath:"".concat(e,"/create"),pathStart:e,addBtnTitle:"My Tag",title:"My Tags",submissionsRequestParams:{sort:"-modified"}}))})}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(e,"/create"),render:function(n){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},n),{},{title:"New Tag",name:t,pathStart:e}))})}}),Object(y.jsx)(l.b,{path:"".concat(e,"/:").concat("tag","Id"),render:function(n){return Object(y.jsx)(on,{children:Object(y.jsx)(Fr,Object(u.a)(Object(u.a)({},n),{},{pathStart:e,paramName:"tag",formName:t}))})}})]})})})})},_r=o.a.createContext(),Nr="formsFilter",Cr="myFormsFilter",Pr={filter:{},error:""},wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER_SET":return Object(u.a)(Object(u.a)({},e),{},{filter:Object(u.a)({},t.filter),error:"",set:!0});case"FILTER_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{error:t.error});default:return e}};function Tr(e){var t=o.a.useReducer(wr,Pr),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(_r.Provider,Object(u.a)({value:c},e))}function kr(){var e=o.a.useContext(_r);if(!e)throw new Error("useFilter must be used within a FilterProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var Rr=function(e){return{type:"FILTER_SET",filter:e}},Ar=function(e){return(e=Q.Utils.fastCloneDeep(e))&&e.length?f.a.map(e,(function(e){return{formName:f.a.get(e,"data.form.data.form.name",""),formTitle:f.a.get(e,"data.form.data.form.title",""),formId:f.a.get(e,"data.form.data.form._id",""),tags:f.a.map(e.data.tags||[],(function(e){return f.a.get(e,"data.tag",null)}))}})):[]},Ur=function(){var e,t=Object(l.g)(),n=et(),r=n.state,o=n.dispatch,c=r.requestParams,s=Object(a.useCallback)((function(e,t){!function(e,t){var n=t.limit,r=t.query,a=t.select,o=(t.sort,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};e(tt(o,c));var i=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.myForms,"/submission")),u="data.form.data.form,data.tags";a=a?"".concat(a,",").concat(u):u;var l=ue(n,r,"-modified",c,a,o);i.loadSubmissions({params:l}).then((function(t){e(nt(Ar(t),n)),s(null,t)})).catch((function(t){e(rt(t)),s(t)}))}(o,c,e,t)}),[c,o]);Object(a.useEffect)((function(){s(1)}),[s]);var i=r.isActive,u=function(){return Object(y.jsx)(d.Form,{submission:{data:{forms:r.forms}},src:x.getSrc("myFormsTable"),options:{noSubmit:!0},formReady:function(e){e.on("row:click",(function(e){t.push("/form/".concat(e.formId||e._id))}))}})};return Object(y.jsx)("div",{children:i?Object(y.jsx)(Ae,{}):null!==(e=r.forms)&&void 0!==e&&e.length?Object(y.jsx)(u,{}):"No forms found"})},Dr=function(e){var t=e.filterName,n=e.filterOptions,r=void 0===n?{}:n,o=e.filterFormName,c=kr(),s=c.state,i=c.dispatch,u=s.filter;Object(a.useEffect)((function(){!function(e,t){try{var n=localStorage.getItem(t);e(Rr(n?JSON.parse(n):{}))}catch(r){}}(i,t)}),[i,t]);var l=function(e){!function(e,t,n){localStorage.setItem(n,JSON.stringify(t)),e(Rr(t))}(i,e,t)};return Object(y.jsx)(d.Form,{submission:{data:u},src:x.getSrc(o),options:r,formReady:function(e){e.on("filterForms",(function(e){l(e)})),e.on("search",(function(e){l(e)})),e.on("resetFilter",(function(){l({})}))}})},Mr=function(){var e=et(),t=e.state,n=e.dispatch,r=t.error,o=kr().state,s=o.filter,i=o.error,u=o.set,l=Object(a.useCallback)((function(){if(f.a.isEmpty(s))return{};var e=s.tags,t={};return e&&e.length&&(t["".concat("data.tags._id__in")]=e.map((function(e){return e._id})).join(",")),t}),[s]);Object(a.useEffect)((function(){u&&dt(n,l())}),[n,s,l,u]);var m=function(){return Object(y.jsxs)("div",{className:"d-flex justify-content-end mb-3",children:[Object(y.jsx)(c.b,{className:"btn btn-primary mr-3",to:"/myforms/tags",children:"Manage My Tags"}),Object(y.jsxs)(c.b,{className:"btn btn-primary",to:"/myforms/add",children:[Object(y.jsx)("i",{className:"fa fa-plus"}),"\xa0 Add My Form"]})]})};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"My Forms"}),Object(y.jsx)("p",{className:"alert alert-primary",role:"alert",children:"This is a list of user forms. You can add the most frequently used forms from the general list of forms to my forms and apply tags to them. Tags make it easier for you to search and filter."}),Object(y.jsx)(d.Errors,{errors:[r,i]}),Object(y.jsx)(Dr,{filterName:Cr,filterFormName:"myFormsFilter"}),Object(y.jsx)(m,{}),Object(y.jsx)(Ur,{})]})},Lr=function(){return Object(y.jsx)(Ze,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/myforms",render:function(e){return Object(y.jsx)(Tr,{children:Object(y.jsx)(Mr,Object(u.a)({},e))})}}),Object(y.jsx)(l.b,{exact:!0,path:"/myforms/add",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(br,{children:Object(y.jsx)(Er,Object(u.a)({},e))})})}}),Object(y.jsx)(l.b,{path:"/myforms/tags",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Ir,Object(u.a)({},e))})}})]})})},Br=n(81),Gr=function(e){var t="routeTrackId",n=e.FormError,r=e.id,o=e.submissionsRequestParams,c=void 0===o?{}:o,s=e.archived,i=e.hideTitle,m=Object(l.g)(),j=Object(l.i)().formId||r,p=T().state.user,h=Object(u.a)({limit:1e5,query:Object(u.a)(Object(u.a)({},j?{"data.routedForm.id":j}:{}),{},Object(Br.a)({"data.routeInitiators._id":p._id},"data.currentRoute.archiveUsers._id".concat(s?"":"__ne"),p._id)),select:"",sort:"-data.currentRoute.date"},c),O={active:!1,selectedIds:[],archive:!1,restore:!1},g=Object(a.useState)(O),v=Object(b.a)(g,2),S=v[0],E=v[1],F=Object(a.useState)(h),I=Object(b.a)(F,2),_=I[0],N=I[1],C=Object(a.useState)(!1),P=Object(b.a)(C,2),w=P[0],k=P[1],R=Object(a.useState)(null),A=Object(b.a)(R,2),U=A[0],D=A[1],M=Bt(),L=M.state,B=M.dispatch,G=ht().state,q=Fn().addAlert;Object(a.useEffect)((function(){N((function(e){var t=Object(u.a)(Object(u.a)({},e),c);return k(!0),f.a.isEqual(e,t)?e:t}))}),[c,j,s]);var V=Object(a.useCallback)((function(e,t){zt(B,e,_,t,null,x.routeTrack)}),[B,_]);if(Object(a.useEffect)((function(){V(1)}),[V,j,s]),G.isActive||L.isActive||!w)return Object(y.jsx)(Ae,{});var z=function(){var e=f.a.chain(L.submissions).map((function(e){return{routeTrackId:e._id,submission:f.a.get(e,"data.routedSubmission"),form:f.a.get(e,"data.routedForm"),data:f.a.chain(e).get("data.tracking",[]).filter((function(e){return f.a.get(e,"senderInfo[0].from[0]._id","")===p._id})).last().value()}})).value();return f.a.map(e,(function(e){return{routeTrackId:e.routeTrackId,routedSubmissionId:f.a.get(e,"submission.id",""),submissionName:f.a.get(e,"submission.name",""),formTitle:f.a.get(j?G:e,"form.title",""),formId:j||f.a.get(e,"form.id",""),to:f.a.chain(e).get("data.recipientsInfo",[]).map((function(e){return f.a.get(e,"to[0].data.email","")})).value(),dateSent:f.a.get(e,"data.senderInfo[0].dateSent",""),dateOpened:f.a.chain(e).get("data.recipientsInfo",[]).filter((function(e){return e.opened})).map((function(e){var t=e.dateOpened;return{date:t,formattedDate:new Date(t)}})).minBy("formattedDate").get("date","").value()}}))},Q=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:z(),selectedSubmissions:S.selectedIds}},src:x.getSrc("routedSubmissionsTable"),options:Object(u.a)({noSubmit:!0,hide:{restore:!s,moveToArchived:s}},G.options),formReady:function(e){e.on("track",(function(e){var t=L.submissions.find((function(t){return e.routeTrackId===t._id}));D(t)})),e.on("open",(function(e){e&&m.push("/form/".concat(e.formId,"/routed/").concat(e.routedSubmissionId))})),e.on("deselectAll",(function(){Ce(e,[],t)})),e.on("selectRow",(function(n){var r=e.data.selectedSubmissions,a=n.routeTrackId;e.data.selectedSubmissions=f.a.includes(r,a)?Object(Y.a)(f.a.filter(r,(function(e){return e!==a}))):[].concat(Object(Y.a)(r),[a]),Ce(e,e.data.selectedSubmissions,t),e.triggerChange()})),e.on("moveToArchived",(function(){E(Object(u.a)(Object(u.a)({},O),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],archive:!0}))})),e.on("restoreArchived",(function(){E(Object(u.a)(Object(u.a)({},O),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],restore:!0}))}))}})},$=function(){E(Object(u.a)(Object(u.a)({},O),{},{selectedIds:S.selectedIds}))},K=function(){var e=S.selectedIds,t=S.restore,n=S.archive,r=f.a.chain(L.submissions).filter((function(t){return f.a.some(e,(function(e){return t._id===e}))})).each((function(e){n&&Pe(e,p),t&&we(e,p)})).value();Yt(B,r,null,x.routeTrack,(function(e){if(!e){var t=S.restore,n=S.archive;V(1),E(O),q({type:"success",content:"Records are successfully ".concat((t?"restored":n&&"archived")||"updated"," ")})}}))},H=j&&!i?"Routed Submissions - ".concat(G.form.title," Form "):"",W=function(){var e=S.archive,t=S.restore;return e?Object(y.jsxs)("span",{children:["Are you sure you wish to ",Object(y.jsx)("strong",{children:"archive all selected records"}),"?"]}):t?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected records"})," to ",Object(y.jsx)("strong",{children:"All Incoming"}),"?"]}):void 0},J=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[H&&Object(y.jsx)(Be,{text:H}),S.active&&Object(y.jsx)(Zt,{onNo:$,onYes:K,message:W(),onModalCloseClick:$}),Object(y.jsx)(d.Errors,{errors:[G.error,L.error]}),U&&Object(y.jsx)(Ht,{routeTrack:U,onModalCloseClick:function(){return D(null)}}),f.a.isEmpty(L.submissions)?"No items to display.":Object(y.jsx)(Q,{})]})};return G.error&&n?Object(y.jsx)(n,{error:G.error,children:Object(y.jsx)(J,{})}):Object(y.jsx)(J,{})},qr={cc:"cc",bcc:"bcc",prevOwner:"prevOwner"},Vr=Object(u.a)({routeInitiator:"routeInitiator",owner:"owner",noAccess:"noAccess"},qr),zr=function(e,t){var n=null,r=0;return{currentRoute:f.a.chain(e).findLast((function(e,a){var o=f.a.get(e,"senderInfo[0].cc",[]),c=f.a.get(e,"senderInfo[0].bcc",[]),s=f.a.get(e,"recipientsInfo",[]);return f.a.some(s,(function(e){return f.a.get(e,"to[0]._id","")===t}))?(r=a,n=qr.prevOwner,!0):f.a.some(o,(function(e){return e._id===t}))?(n=qr.cc,!0):!!f.a.some(c,(function(e){return e._id===t}))&&(n=qr.bcc,!0)})).value(),userRole:n,prevOwnerTrack:r}},Yr=function(e,t){var n=f.a.get(e,"data.routeInitiators",[]),r=f.a.get(e,"data.currentRoute.owners",[]),a=f.a.get(e,"data.currentRoute.readOnlyUsers",[]);if(f.a.some(r,(function(e){return e._id===t})))return Vr.owner;var o=f.a.some(a,(function(e){return e._id===t}));return f.a.some(n,(function(e){return e._id===t}))&&!o?Vr.routeInitiator:o?zr(f.a.get(e,"data.tracking",[]),t).userRole:Vr.noAccess},Qr=function(){var e=Object(l.i)(),t=e.formId,n=e.submissionId,r=cn(),o=r.dispatch,s=r.state,i=ht().state,u=s.isActive,m=s.submission,j=s.routeTrack,p=s.error,h=i.isProcess,O=T().state.user,g=Object(a.useState)(!1),v=Object(b.a)(g,2),x=v[0],S=v[1],E=Object(a.useMemo)((function(){return Te(j,O)}),[O,j]);Object(a.useEffect)((function(){xn(o,n,t)}),[o,n,t]),Object(a.useEffect)((function(){f.a.isEmpty(O)||f.a.isEmpty(m)||S(Yr(j,O._id))}),[n,t,m,O,j]);var F=f.a.sortBy([{icon:"fa fa-chevron-left",path:"/form/".concat(t,E?"/archived/routed":"/routed"),title:"",priority:0},{icon:"fa fa-eye",path:"/form/".concat(t,"/routed/").concat(n),title:"View",priority:10}],(function(e){return e.priority})),I=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs",children:F.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};return p?Object(y.jsx)(d.Errors,{errors:[p]}):u||f.a.isEmpty(m)||!x?Object(y.jsx)(Ae,{}):f.a.get(m,"metadata.archived",!1)?Object(y.jsx)(l.a,{to:"/form/".concat(t,"/archived/").concat(n)}):x&&x!==Vr.routeInitiator?x===Vr.owner?Object(y.jsx)(l.a,{to:"/form/".concat(t,"/incoming/").concat(n)}):f.a.some(qr,(function(e){return e===x}))?Object(y.jsx)(l.a,{to:"/form/".concat(t,"/tracked/").concat(n)}):Object(y.jsx)(Xt,{submission:m,formId:t,submissionId:n}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"".concat(f.a.get(i,"form.title",""),"  - Routed Submission")}),E&&Object(y.jsx)(en,{}),Object(y.jsx)(Jt,{message:"This ".concat(h?"process":"form submission"," has been routed to other users and is available to you in read-only mode."),routedSubmission:j}),Object(y.jsx)($n,{children:!h&&Object(y.jsx)(Zn,{})}),Object(y.jsx)(I,{}),Object(y.jsx)(l.d,{children:Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/routed/:submissionId",component:function(){return h?Object(y.jsx)($n,{children:Object(y.jsx)(er,{readOnly:!0})}):Object(y.jsx)(Nn,{readOnly:!0})}})})]})},$r=function(){return Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/routed",component:Gr}),Object(y.jsx)(l.b,{path:"/form/:formId/routed/:submissionId",render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(Qr,Object(u.a)({},e))})}})]})})},Kr=function(){var e=f.a.sortBy([{icon:"",path:"/routed",title:"All Routed",priority:10},{icon:"",path:"/routed/archived",title:"All Routed Archived",priority:20}],(function(e){return e.priority})),t=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-3",children:e.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Be,{text:"All Routed Submissions"}),Object(y.jsx)(t,{}),Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{path:"/routed",exact:!0,render:function(e){return Object(y.jsx)(Gr,Object(u.a)({},e))}}),Object(y.jsx)(l.b,{path:"/routed/archived",exact:!0,render:function(e){return Object(y.jsx)(Lt,{children:Object(y.jsx)(Gr,Object(u.a)(Object(u.a)({},e),{},{archived:!0}))})}})]})})]})},Hr=function(e){var t=e.FormError,n=e.archived,r=e.id,o=e.submissionsRequestParams,c=e.hideTitle,s="routeTrackId",i=Object(l.g)(),m=Object(l.i)().formId||r,j=T().state.user,p=Object(u.a)({limit:1e5,query:Object(u.a)(Object(u.a)({},m?{"data.routedForm.id":m}:{}),{},Object(Br.a)({"data.currentRoute.owners._id":j._id},"data.currentRoute.archiveUsers._id".concat(n?"":"__ne"),j._id)),select:"",sort:"-data.currentRoute.date"},o),h={active:!1,selectedIds:[],archive:!1,restore:!1},O=Object(a.useState)(p),g=Object(b.a)(O,2),v=g[0],S=g[1],E=Object(a.useState)(!1),F=Object(b.a)(E,2),I=F[0],_=F[1],N=Object(a.useState)(null),C=Object(b.a)(N,2),P=C[0],w=C[1],k=Object(a.useState)(h),R=Object(b.a)(k,2),A=R[0],U=R[1],D=Bt(),M=D.state,L=D.dispatch,B=ht().state,G=Fn().addAlert;Object(a.useEffect)((function(){S((function(e){var t=Object(u.a)(Object(u.a)({},e),o);return _(!0),f.a.isEqual(e,t)?e:t}))}),[o,m,n]);var q=Object(a.useCallback)((function(e,t){zt(L,e,v,t,null,x.routeTrack)}),[L,v]);if(Object(a.useEffect)((function(){q(1)}),[q,m,v,n]),B.isActive||M.isActive||!I)return Object(y.jsx)(Ae,{});var V=function(){var e=M.submissions;return f.a.map(e,(function(e){var t=f.a.chain(e).get("data.currentRoute.readOnlyUsers",[]).some((function(e){return e._id===j._id})).value(),n=f.a.get(e,"data.tracking",[]),r=t?f.a.chain(n).findLast((function(e){var t=f.a.get(e,"senderInfo[0].cc",[]),n=f.a.get(e,"senderInfo[0].bcc",[]);return f.a.some(t,(function(e){return e._id===j._id}))||f.a.some(n,(function(e){return e._id===j._id}))})).value():f.a.last(n);return{routeTrackId:e._id,routedSubmissionId:f.a.get(e,"data.routedSubmission.id",""),submissionName:f.a.get(e,"data.routedSubmission.name",""),formId:m||f.a.get(e,"data.routedForm.id",""),formTitle:m?f.a.get(B,"form.title",""):f.a.get(e,"data.routedForm.title",""),from:f.a.get(r,"senderInfo[0].from[0].data.email"),dateSent:f.a.get(e,"data.currentRoute.date",""),inCopy:t,dateOpened:f.a.chain(r).get("recipientsInfo",[]).filter((function(e){return t?e.opened:e.opened&&f.a.get(e,"to[0]._id","")===j._id})).map((function(e){var t=e.dateOpened;return{date:t,formattedDate:new Date(t)}})).minBy("formattedDate").get("date","").value()}}))},z=M.submissions.map((function(e){return Object(u.a)({},e.data)})),Q=function(e){e.dataTableReady.promise.then((function(){var t=f.a.get(e,"formioGrid.tbody",{}),n=f.a.get(t,"refs.row",[]),r=t.data;f.a.each(r,(function(e,t){!e.dateOpened&&n[t]&&n[t].classList.add("font-weight-bold")}))}))},$=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:V(),selectedSubmissions:A.selectedIds}},src:x.getSrc("routedSubmissionsTable"),options:Object(u.a)({viewIncoming:!0,hide:{restore:!n,moveToArchived:n},noSubmit:!0},B.options),formReady:function(e){var t=e.getComponent("submissions");e.on("change",(function(){Q(t)})),e.on("page",(function(){Q(t)})),e.on("track",(function(e){var t=M.submissions.find((function(t){return e.routeTrackId===t._id}));w(t)})),e.on("open",(function(e){e&&i.push("/form/".concat(e.formId,"/incoming/").concat(e.routedSubmissionId))})),e.on("page",(function(){Ce(e,e.data.selectedSubmissions,s)})),e.on("deselectAll",(function(){Ce(e,[],s)})),e.on("selectRow",(function(t){var n=e.data.selectedSubmissions,r=t.routeTrackId;e.data.selectedSubmissions=f.a.includes(n,r)?Object(Y.a)(f.a.filter(n,(function(e){return e!==r}))):[].concat(Object(Y.a)(n),[r]),Ce(e,e.data.selectedSubmissions,s),e.triggerChange()})),e.on("moveToArchived",(function(){U(Object(u.a)(Object(u.a)({},h),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],archive:!0}))})),e.on("restoreArchived",(function(){U(Object(u.a)(Object(u.a)({},h),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],restore:!0}))}))}})},K=function(){U(Object(u.a)(Object(u.a)({},h),{},{selectedIds:A.selectedIds}))},H=function(){var e=A.selectedIds,t=A.restore,n=A.archive,r=f.a.chain(M.submissions).filter((function(t){return f.a.some(e,(function(e){return t._id===e}))})).each((function(e){n&&Pe(e,j),t&&we(e,j)})).value();Yt(L,r,null,x.routeTrack,(function(e){if(!e){var t=A.restore,n=A.archive;q(1),U(h),G({type:"success",content:"Records are successfully ".concat((t?"restored":n&&"archived")||"updated"," ")})}}))},W=m&&!c?"Incoming Submissions - ".concat(B.form.title," Form "):"",J=function(){var e=A.archive,t=A.restore;return e?Object(y.jsxs)("span",{children:["Are you sure you wish to ",Object(y.jsx)("strong",{children:"archive all selected records"}),"?"]}):t?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected records"})," to ",Object(y.jsx)("strong",{children:"All Incoming"}),"?"]}):void 0},X=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[W&&Object(y.jsx)(Be,{text:W}),A.active&&Object(y.jsx)(Zt,{onNo:K,onYes:H,message:J(),onModalCloseClick:K}),Object(y.jsx)(d.Errors,{errors:[B.error,M.error]}),P&&Object(y.jsx)(Ht,{routeTrack:P,onModalCloseClick:function(){return w(null)}}),f.a.isEmpty(z)?"No items to display.":Object(y.jsx)($,{})]})};return B.error&&t?Object(y.jsx)(t,{error:B.error,children:Object(y.jsx)(X,{})}):Object(y.jsx)(X,{})};Hr.defaultProps={submissionsRequestParams:{}};var Wr=Hr,Jr=function(){var e=Object(l.g)(),t=e.location.pathname,n=Object(l.i)(),r=n.formId,o=n.submissionId,s=cn(),i=s.dispatch,u=s.state,m=ht().state,j=m.isProcess,p=u.isActive,h=u.submission,O=u.routeTrack,g=u.error,v=T(),S=v.dispatch,E=v.state,F=E.user,I=E.beforeLogoutActionExecution,_=G().dispatch,N=Object(a.useState)(!1),P=Object(b.a)(N,2),w=P[0],k=P[1],R=Object(a.useState)(!1),A=Object(b.a)(R,2),U=A[0],D=A[1],M=Object(a.useMemo)((function(){return w===Vr.owner}),[w]),L=Object(a.useMemo)((function(){return Te(O,F)}),[F,O]),B=Object(a.useMemo)((function(){return f.a.chain(O).get("data.tracking",[]).last().value()}),[O]),q=Object(a.useMemo)((function(){var e=f.a.get(O,"data.currentRoute.owners",[]),t=f.a.get(h,"data.submissionAccessData.blockedOwners",[]),n=f.a.get(h,"data.submissionAccessData.owners",[]),r=t.length?n[0]:null;return{groupRouting:e.length>1,groupSize:e.length,owners:f.a.map(e,(function(e){return f.a.get(e,"data.email","")})),currentOwner:r,isUserCurrentOwner:!!t.length&&F._id===r._id}}),[O,h,F]),V=Object(a.useMemo)((function(){return M&&q.groupRouting&&!q.isUserCurrentOwner}),[M,q]),Y=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return On(i,h,r,null,e)}),[i,r,h]),Q=Object(a.useCallback)((function(e){S(C(e))}),[S]),$=Object(a.useCallback)((function(){ne(h),Y((function(e,t){e||Q(!1)}))}),[h,Y,Q]);Object(a.useEffect)((function(){xn(i,o,r,null,(function(e,t){if(!e){var n=t.submission;f.a.get(n,"data.submissionAccessData.blockedOwners",[]).length&&f.a.get(n,"data.submissionAccessData.owners[0]._id",[])===F._id&&Q(!0)}}))}),[i,o,r,Q,F]),Object(a.useEffect)((function(){return q.isUserCurrentOwner&&I&&$(),function(){q.isUserCurrentOwner&&ke(t,5)!==ke(e.location.pathname,5)&&$()}}),[$,I,q,t,e]),Object(a.useEffect)((function(){if(M&&!f.a.isEmpty(F)&&!f.a.isEmpty(h)){var e=f.a.chain(B).get("recipientsInfo",[]).find((function(e){return f.a.get(e,"to[0]._id","")===F._id})).value();!e||f.a.get(e,"opened",!1)||U?D(!0):(f.a.set(e,"opened",!0),f.a.set(e,"dateOpened",(new Date).toISOString()),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};be(t,null,x.routeTrack).then((function(t){e(bn(t)),n(null,t)})).catch((function(t){e(jn(t)),n(t)}))}(i,O,(function(e){e||(z(_,F._id),D(!0))})))}}),[i,o,r,O,h,B,M,F,_,U]),Object(a.useEffect)((function(){f.a.isEmpty(F)||f.a.isEmpty(h)||k(Yr(O,F._id))}),[o,r,h,F,O]);var K=Object(a.useCallback)((function(){return j?Object(y.jsx)($n,{children:Object(y.jsx)(er,{readOnly:V})}):Object(y.jsx)(Nn,{noRedirectOnSubmit:!0,readOnly:!0})}),[j,V]),H=Object(a.useCallback)((function(){return j?Object(y.jsx)($n,{children:Object(y.jsx)(er,{})}):Object(y.jsx)(Nn,{noRedirectOnSubmit:!0,disableSubmissionName:!0,readOnly:!1})}),[j]),W=f.a.sortBy([{icon:"fa fa-chevron-left",path:"/form/".concat(r,L?"/archived/incoming":"/incoming"),title:"",priority:0},{icon:"fa fa-eye",path:"/form/".concat(r,"/incoming/").concat(o),condition:!j,title:"View",priority:10},{icon:"fa fa-edit",path:"/form/".concat(r,"/incoming/").concat(o,"/edit"),title:"Edit",condition:!L&&!j&&!V,priority:20},{icon:"fa fa-level-up",path:"/form/".concat(r,"/incoming/").concat(o,"/route"),title:"Route",condition:!L&&!j&&!V,priority:30}],(function(e){return e.priority})),J=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs",children:W.map((function(e){return f.a.isBoolean(e.condition)&&!e.condition?null:Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};if(g)return Object(y.jsx)(d.Errors,{errors:[g]});if(p||f.a.isEmpty(h)||!w)return Object(y.jsx)(Ae,{});if(w&&!M)return w===Vr.routeInitiator?Object(y.jsx)(l.a,{to:"/form/".concat(r,"/routed/").concat(o)}):f.a.some(qr,(function(e){return e===w}))?Object(y.jsx)(l.a,{to:"/form/".concat(r,"/tracked/").concat(o)}):Object(y.jsx)(Xt,{submission:h,formId:r,submissionId:o});var X=function(){var e=F._id;!function(e,t){var n=f.a.get(e,"data.submissionAccessData",{}),r=f.a.filter(n.owners,(function(e){return e._id===t})),a=f.a.filter(n.owners,(function(e){return e._id!==t}));f.a.set(n,"owners",r),f.a.set(n,"blockedOwners",a)}(h,e),Y((function(e,t){e||Q(!0)}))};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"".concat(f.a.get(m,"form.title","")," -  Incoming Submission")}),L&&Object(y.jsx)(en,{}),Object(y.jsx)(Jt,{message:function(){var e=q.groupRouting,t=q.currentOwner,n=q.isUserCurrentOwner;return M&&e?Object(y.jsxs)("div",{children:[Object(y.jsxs)("span",{children:["This ",j?"process":"form submission"," has been routed to a group of users. You are one of ",Object(y.jsxs)("strong",{children:[q.groupSize," owners"]})," of this ",j?"process":"form submission",". "]}),!t&&Object(y.jsxs)("span",{children:["Only one owner at a time may access the actions or edit the attached form submission(s). By clicking on the ",Object(y.jsx)("strong",{children:"View Actions"})," button you will open the process but ",Object(y.jsx)("strong",{children:"temporally lock out the other owners"}),"."]}),!t&&Object(y.jsx)("button",{className:"d-block my-3 btn btn-primary btn-sm",onClick:X,children:"View Actions"}),t&&n&&Object(y.jsxs)("p",{className:"my-2",children:["You have taken the ",Object(y.jsx)("strong",{children:"full ownership"})," for this ",j?"process":"form submission"," and locked out the other ownership participants."]}),t&&!n&&Object(y.jsxs)("p",{className:"my-2",children:["This ",j?"process":"form submission"," is currently opened by ",Object(y.jsx)("strong",{children:f.a.get(q,"currentOwner.data.email","")}),". You cannot get full ownership of it. Please try later."]}),Object(y.jsx)("hr",{}),Object(y.jsxs)("div",{className:"my-3",children:[Object(y.jsx)("span",{children:"Current ownership participants:"}),f.a.map(q.owners,(function(e){return Object(y.jsxs)("span",{className:"mx-2 font-weight-bold",children:[Object(y.jsx)("i",{className:"fa fa-user-o","aria-hidden":"true"}),Object(y.jsx)("span",{className:"ml-2",children:e})]},e)}))]})]}):M&&!e?Object(y.jsxs)("span",{children:["This ",j?"process":"form submission"," has been routed to you and you are the ",Object(y.jsx)("strong",{children:"sole owner"})," of it."]}):void 0}(),routedSubmission:O}),!j&&Object(y.jsx)($n,{children:Object(y.jsx)(Zn,{})}),Object(y.jsx)(J,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/incoming/:submissionId",component:K}),M&&!L&&!j&&!V&&[Object(y.jsx)(l.b,{path:"/form/:formId/incoming/:submissionId/edit",component:H},"edit"),Object(y.jsx)(l.b,{path:"/form/:formId/incoming/:submissionId/route",component:Vn},"route")]]})]})},Xr=function(){return Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/incoming",component:Wr}),Object(y.jsx)(l.b,{path:"/form/:formId/incoming/:submissionId",render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(Jr,Object(u.a)({},e))})}})]})})},Zr=function(e){var t=e.formName,n=e.id,r=e.submissionsRequestParams,o=void 0===r?{}:r,c=Object(l.g)(),s=Object(l.i)().formId||n,i=Object(u.a)({limit:1e6,query:{},select:"",sort:"-modified"},o),m=Object(a.useState)(i),j=Object(b.a)(m,2),p=j[0],h=j[1],O=Object(a.useState)(!1),g=Object(b.a)(O,2),v=g[0],S=g[1],E=Object(a.useState)(null),F=Object(b.a)(E,2),I=F[0],_=F[1],N=Bt(),C=N.state,P=N.dispatch,w=ht().state;Object(a.useEffect)((function(){h((function(e){var t=Object(u.a)(Object(u.a)({},e),o);return S(!0),f.a.isEqual(e,t)?e:t}))}),[o]);var T=Object(a.useCallback)((function(e,n){zt(P,e,p,n,s,t)}),[P,s,t,p]);if(Object(a.useEffect)((function(){T(1)}),[T,s,p]),w.isActive||C.isActive||!v)return Object(y.jsx)(Ae,{});var k=C.submissions.map((function(e){return Object(u.a)(Object(u.a)({},e),e.metadata)})),R=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:k}},src:x.getSrc("namedSubmissionsTable"),options:Object(u.a)({noSubmit:!0,hide:{select:!0}},w.options),formReady:function(e){e.on("open",(function(e){var t=e._id;t&&c.push("/form/".concat(s,"/incoming/").concat(t))})),e.on("track",(function(e){var t=e._id;_(t)}))}})};return Object(y.jsxs)("div",{className:"form-index position-relative",children:[Object(y.jsx)(d.Errors,{errors:[w.error,C.error]}),I&&Object(y.jsx)(on,{children:Object(y.jsx)(or,{trackingSubmissionId:I,onModalCloseClick:function(){return _(null)}})}),f.a.isEmpty(k)?"No items to display.":Object(y.jsx)(R,{})]})},ea=function(e){var t=e.readOnly,n=T().state.user,r={template:"bootstrap",iconset:"fa",readOnly:!!t,userId:n._id},o=Object(a.useState)(null),c=Object(b.a)(o,2),s=c[0],i=c[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Form,{src:x.getSrc("allSpecial"),onChange:function(e,t,n){n&&i(null)},formReady:function(e){e.on("showSpecial",(function(e){i(e)}))},options:r}),s&&Object(y.jsx)(Zr,{id:s.formId,submissionsRequestParams:{query:Object(u.a)({"metadata.routed__exists":!0,"data.submissionAccessData.allOwnerIds":n._id},s.query)}})]})},ta=function(){var e=f.a.sortBy([{icon:"",path:"/incoming",title:"All Incoming",priority:10},{icon:"",path:"/incoming/archived",title:"All Incoming Archived",priority:30},{icon:"",path:"/incoming/special",title:"All Special",priority:20}],(function(e){return e.priority})),t=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-3",children:e.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Be,{text:"All Incoming Submissions"}),Object(y.jsx)(t,{}),Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{path:"/incoming",exact:!0,render:function(e){return Object(y.jsx)(Wr,Object(u.a)({},e))}}),Object(y.jsx)(l.b,{path:"/incoming/archived",exact:!0,render:function(e){return Object(y.jsx)(Lt,{children:Object(y.jsx)(Wr,Object(u.a)(Object(u.a)({},e),{},{archived:!0}))})}}),Object(y.jsx)(l.b,{path:"/incoming/special",exact:!0,render:function(e){return Object(y.jsx)(Lt,{children:Object(y.jsx)(ea,{})})}})]})})]})},na=function(e){var t=e.submissionsRequestParams,n=void 0===t?{}:t,r=e.hideTitle,o=Object(l.g)(),c=Object(l.i)().formId,s=Object(u.a)({limit:1e5,query:{},select:"",sort:"-modified"},n),i={active:!1,selectedIds:[],delete:!1,moveToCurrent:!1},m=Object(a.useState)(s),j=Object(b.a)(m,2),p=j[0],h=j[1],O=Object(a.useState)(!1),g=Object(b.a)(O,2),v=g[0],S=g[1],E=Object(a.useState)(i),F=Object(b.a)(E,2),I=F[0],_=F[1],N=Fn().addAlert,C=Bt(),P=C.state,w=C.dispatch,T=ht().state;Object(a.useEffect)((function(){h((function(e){var t=Object(u.a)(Object(u.a)({},e),n);return S(!0),f.a.isEqual(e,t)?e:t}))}),[n]);var k=Object(a.useCallback)((function(e,t){zt(w,e,p,t,c)}),[w,c,p]);if(Object(a.useEffect)((function(){k(1)}),[k,c,p]),T.isActive||P.isActive||!v)return Object(y.jsx)(Ae,{});var R=P.submissions.map((function(e){return Object(u.a)(Object(u.a)({},e),e.metadata)})),A=function(){_(Object(u.a)(Object(u.a)({},i),{},{selectedIds:I.selectedIds}))},U=function(){var e=I.delete,t=I.moveToCurrent,n=I.selectedIds,r=e?Ie:"",a=f.a.chain(P.submissions).filter((function(e){return f.a.some(n,(function(t){return e._id===t}))})).each((function(e){r?_e(e,r):Ne(e)})).value();Yt(w,a,c,null,(function(n){n||(k(1),_(i),N({type:"success",content:"Form Submissions are successfully moved to the ".concat(t?"Current":e&&"Deleted")}))}))},D=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:R,selectedSubmissions:I.selectedIds}},src:x.getSrc("namedSubmissionsTable"),options:Object(u.a)({noSubmit:!0,hide:{deletePermanently:!0,moveToArchived:!0,track:!0}},T.options),formReady:function(e){e.on("open",(function(e){var t=e._id;t&&o.push("/form/".concat(c,"/submission/").concat(t))})),e.on("page",(function(){Ce(e,e.data.selectedSubmissions)})),e.on("deselectAll",(function(){Ce(e,[])})),e.on("moveToDeleted",(function(){_(Object(u.a)(Object(u.a)({},i),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],delete:!0}))})),e.on("moveToCurrent",(function(){_(Object(u.a)(Object(u.a)({},i),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],moveToCurrent:!0}))})),e.on("selectRow",(function(t){var n=e.data.selectedSubmissions;e.data.selectedSubmissions=f.a.includes(n,t._id)?Object(Y.a)(f.a.filter(n,(function(e){return e!==t._id}))):[].concat(Object(Y.a)(n),[t._id]),Ce(e,e.data.selectedSubmissions),e.triggerChange()}))}})},M="Archived Submissions - ".concat(T.form.title," Form "),L=function(){var e=I.delete,t=I.moveToCurrent;return e?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected form submission(s)"})," from the ",Object(y.jsx)("strong",{children:"Archived"})," to the ",Object(y.jsx)("strong",{children:"Deleted"}),"?"]}):t?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected form submission(s)"})," from the ",Object(y.jsx)("strong",{children:"Archived"})," to the ",Object(y.jsx)("strong",{children:"Current"}),"?"]}):void 0},B=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[I.active&&Object(y.jsx)(Zt,{onNo:A,onYes:U,message:L(),onModalCloseClick:A}),Object(y.jsx)(d.Errors,{errors:[T.error,P.error]}),!r&&Object(y.jsx)(Be,{text:M}),f.a.isEmpty(R)?"No items to display.":Object(y.jsx)(D,{})]})};return Object(y.jsx)(B,{})},ra=function(){var e=Object(l.i)().formId,t=ht().state,n=f.a.sortBy([{icon:"",path:"/form/".concat(e,"/archived"),title:"Current",priority:10},{icon:"",path:"/form/".concat(e,"/archived/incoming"),exact:!1,title:"Incoming",priority:10},{icon:"",path:"/form/".concat(e,"/archived/routed"),exact:!1,title:"Routed",priority:20}],(function(e){return e.priority})),r=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-3",children:n.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Be,{text:"Archived Submissions - ".concat(t.form.title," Form ")}),Object(y.jsx)(r,{}),Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/archived/incoming",render:function(e){return Object(y.jsx)(Wr,Object(u.a)(Object(u.a)({},e),{},{hideTitle:!0,archived:!0}))}}),Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/archived/routed",render:function(e){return Object(y.jsx)(Gr,Object(u.a)(Object(u.a)({},e),{},{hideTitle:!0,archived:!0}))}}),Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/archived",render:function(e){return Object(y.jsx)(na,Object(u.a)({hideTitle:!0,submissionsRequestParams:{query:{"metadata.routed__exists":!1,"metadata.status":Fe}}},e))}})]})})]})},aa=function(e){var t=e.FormError,n=e.getViewPath,r=e.id,o=e.submissionsRequestParams,c=Object(l.g)(),s=Object(l.i)().formId||r,i=T().state.user,m=Object(u.a)({limit:1e5,query:Object(u.a)(Object(u.a)({},s?{"data.routedForm.id":s}:{}),{},{"data.currentRoute.readOnlyUsers._id":i._id}),select:"",sort:"-data.currentRoute.date"},o),j=Object(a.useState)(m),p=Object(b.a)(j,2),h=p[0],O=p[1],g=Object(a.useState)(!1),v=Object(b.a)(g,2),S=v[0],E=v[1],F=Object(a.useState)(null),I=Object(b.a)(F,2),_=I[0],N=I[1],C=Bt(),P=C.state,w=C.dispatch,k=ht().state;Object(a.useEffect)((function(){O((function(e){var t=Object(u.a)(Object(u.a)({},e),o);return E(!0),f.a.isEqual(e,t)?e:t}))}),[o,s]);var R=Object(a.useCallback)((function(e,t){zt(w,e,h,t,null,x.routeTrack)}),[w,h]);if(Object(a.useEffect)((function(){R(1)}),[R,s,h]),k.isActive||P.isActive||!S)return Object(y.jsx)(Ae,{});var A=function(){var e=P.submissions;return f.a.map(e,(function(e){var t=f.a.get(e,"data.tracking",[]),n=qr,r=zr(t,i._id),a=r.userRole,o=r.prevOwnerTrack,c=r.currentRoute,u=[n.cc,n.bcc].includes(a);return{routeTrackId:e._id,routedSubmissionId:f.a.get(e,"data.routedSubmission.id",""),submissionName:f.a.get(e,"data.routedSubmission.name",""),formId:s||f.a.get(e,"data.routedForm.id",""),formTitle:s?f.a.get(k,"form.title",""):f.a.get(e,"data.routedForm.title",""),from:f.a.get(c,"senderInfo[0].from[0].data.email"),dateSent:f.a.get(e,"data.currentRoute.date",""),dateRerouted:a===n.prevOwner?f.a.get(t[o+1]||{},"senderInfo[0].dateSent",""):"",inCopy:u,dateOpened:f.a.chain(c).get("recipientsInfo",[]).filter((function(e){return u?e.opened:e.opened&&f.a.get(e,"to[0]._id","")===i._id})).map((function(e){var t=e.dateOpened;return{date:t,formattedDate:new Date(t)}})).minBy("formattedDate").get("date","").value()}}))},U=P.submissions.map((function(e){return Object(u.a)({},e.data)})),D=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:A()}},src:x.getSrc("routedSubmissionsTable"),options:Object(u.a)({viewTracked:!0,noSubmit:!0},k.options),formReady:function(e){e.on("track",(function(e){var t=P.submissions.find((function(t){return e.routeTrackId===t._id}));N(t)})),e.on("open",(function(e){e&&c.push(n?n(e):"/form/".concat(e.formId,"/tracked/").concat(e.routedSubmissionId))}))}})},M=s?"Tracked Submissions - ".concat(k.form.title," Form "):"All Routed Submissions",L=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[Object(y.jsx)(d.Errors,{errors:[k.error,P.error]}),_&&Object(y.jsx)(Ht,{routeTrack:_,onModalCloseClick:function(){return N(null)}}),Object(y.jsx)(Be,{text:M}),f.a.isEmpty(U)?"No items to display.":Object(y.jsx)(D,{})]})};return k.error&&t?Object(y.jsx)(t,{error:k.error,children:Object(y.jsx)(L,{})}):Object(y.jsx)(L,{})};aa.defaultProps={submissionsRequestParams:{}};var oa=aa,ca=function(){var e=qr,t=Object(l.i)(),n=t.formId,r=t.submissionId,o=cn(),s=o.dispatch,i=o.state,u=ht().state,m=u.isProcess,j=i.isActive,p=i.submission,h=i.routeTrack,O=i.error,g=T().state.user,v=Object(a.useState)(null),x=Object(b.a)(v,2),S=x[0],E=x[1];Object(a.useEffect)((function(){xn(s,r,n)}),[s,r,n]),Object(a.useEffect)((function(){f.a.isEmpty(g)||f.a.isEmpty(p)||E(Yr(h,g._id))}),[r,n,p,g,h]);var F=f.a.sortBy([{icon:"fa fa-chevron-left",path:"/form/".concat(n,"/tracked"),title:"",priority:0},{icon:"fa fa-eye",path:"/form/".concat(n,"/tracked/").concat(r),title:"View",priority:10}],(function(e){return e.priority})),I=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs",children:F.map((function(e){return e.role&&e.role!==S?null:Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.path,children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};if(O)return Object(y.jsx)(d.Errors,{errors:[O]});if(j||f.a.isEmpty(p)||!S)return Object(y.jsx)(Ae,{});if(S&&!f.a.some(qr,(function(e){return e===S})))return S===Vr.owner?Object(y.jsx)(l.a,{to:"/form/".concat(n,"/incoming/").concat(r)}):S===Vr.routeInitiator?Object(y.jsx)(l.a,{to:"/form/".concat(n,"/routed/").concat(r)}):Object(y.jsx)(Xt,{submission:p,formId:n,submissionId:r});return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"".concat(f.a.get(u,"form.title","")," - Tracked Submission")}),Object(y.jsx)(Jt,{message:S===e.prevOwner?Object(y.jsxs)("span",{children:["This ",m?"process":"form submission"," has been rerouted to other users and is available in ",Object(y.jsx)("strong",{children:"read-only"})," mode."]}):S===e.cc?Object(y.jsxs)("span",{children:["You are in ",Object(y.jsx)("strong",{children:"carbon copy"})," to this ",m?"process":"form submission"," routing. The $",m?"process":"form submission"," is available in ",Object(y.jsx)("strong",{children:"read-only"})," mode."]}):S===e.bcc?Object(y.jsxs)("span",{children:["You are in ",Object(y.jsx)("strong",{children:"blind carbon copy"})," to this ",m?"process":"form submission"," routing. The $",m?"process":"form submission"," is available in ",Object(y.jsx)("strong",{children:"read-only"})," mode."]}):void 0,routedSubmission:h}),Object(y.jsx)($n,{children:!m&&Object(y.jsx)(Zn,{})}),Object(y.jsx)(I,{}),Object(y.jsx)(l.d,{children:Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/tracked/:submissionId",component:function(){return m?Object(y.jsx)($n,{children:Object(y.jsx)(er,{readOnly:!0})}):Object(y.jsx)(Nn,{readOnly:!0})}})})]})},sa=function(){return Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/tracked",component:oa}),Object(y.jsx)(l.b,{path:"/form/:formId/tracked/:submissionId",render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ca,Object(u.a)({},e))})}})]})})},ia=function(e){var t=e.FormError,n=e.id,r=e.submissionsRequestParams,o=Object(l.g)(),c=Object(l.i)().formId||n,s=Object(u.a)({limit:1e5,query:c?{"data.routedForm.id":c}:{},select:"",sort:"-data.currentRoute.date"},r),i=Object(a.useState)(s),m=Object(b.a)(i,2),j=m[0],p=m[1],h=Object(a.useState)(!1),O=Object(b.a)(h,2),g=O[0],v=O[1],S=Object(a.useState)(null),E=Object(b.a)(S,2),F=E[0],I=E[1],_=Bt(),N=_.state,C=_.dispatch,P=ht().state;Object(a.useEffect)((function(){p((function(e){var t=Object(u.a)(Object(u.a)({},e),r);return v(!0),f.a.isEqual(e,t)?e:t}))}),[r,c]);var w=Object(a.useCallback)((function(e,t){zt(C,e,j,t,null,x.routeTrack)}),[C,j]);if(Object(a.useEffect)((function(){w(1)}),[w,c,j]),P.isActive||N.isActive||!g)return Object(y.jsx)(Ae,{});var T=function(){var e=f.a.chain(N.submissions).map((function(e){return{routeTrackId:e._id,submission:f.a.get(e,"data.routedSubmission"),form:f.a.get(e,"data.routedForm"),data:f.a.chain(e).get("data.tracking",[]).last().value()}})).value();return f.a.map(e,(function(e){return{routeTrackId:e.routeTrackId,routedSubmissionId:f.a.get(e,"submission.id",""),submissionName:f.a.get(e,"submission.name",""),formTitle:f.a.get(c?P:e,"form.title",""),formId:c||f.a.get(e,"form.id",""),to:f.a.chain(e).get("data.recipientsInfo",[]).map((function(e){return f.a.get(e,"to[0].data.email","")})).value(),dateSent:f.a.get(e,"data.senderInfo[0].dateSent",""),from:f.a.chain(e).get("data.senderInfo[0].from[0].data.email",[]).value()}}))},k=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:T()}},src:x.getSrc("routedSubmissionsTable"),options:Object(u.a)({adminView:!0,hide:{select:!0},noSubmit:!0},P.options),formReady:function(e){e.on("track",(function(e){var t=N.submissions.find((function(t){return e.routeTrackId===t._id}));I(t)})),e.on("open",(function(e){e&&o.push("/form/".concat(e.formId,"/routes/").concat(e.routedSubmissionId))}))}})},R=c?"Routed Submissions - ".concat(P.form.title," Form "):"All Routed Submissions",A=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[Object(y.jsx)(d.Errors,{errors:[P.error,N.error]}),F&&Object(y.jsx)(Ht,{routeTrack:F,onModalCloseClick:function(){return I(null)}}),Object(y.jsx)(Be,{text:R}),f.a.isEmpty(N.submissions)?"No items to display.":Object(y.jsx)(k,{})]})};return P.error&&t?Object(y.jsx)(t,{error:P.error,children:Object(y.jsx)(A,{})}):Object(y.jsx)(A,{})};ia.defaultProps={submissionsRequestParams:{}};var ua=ia,la=function(){var e=Object(l.g)(),t=Object(l.i)(),n=t.formId,r=t.submissionId,o=cn(),c=o.dispatch,s=o.state,i=ht().state,u=s.isActive,m=s.submission,j=s.routeTrack,p=s.error,h=Object(a.useState)(!1),O=Object(b.a)(h,2),g=O[0],v=O[1],S=Object(a.useState)(!1),E=Object(b.a)(S,2),F=E[0],I=E[1],_=Fn().addAlert,N=Object(a.useMemo)((function(){var e=function(e){var t=f.a.get(e,"data.submissionAccessData",{});return f.a.get(t,"blockedOwners",[]).length?f.a.get(t,"owners[0]",{}):null}(m);return{exists:!!e,data:e}}),[m]);Object(a.useEffect)((function(){xn(c,r,n)}),[c,r,n]);var C=Object(a.useCallback)((function(){ne(m),On(c,m,n,null,(function(){I(!1),_({type:"success",content:"The current ownership successfully cancelled"})}))}),[m,c,n,_]),P=Object(a.useMemo)((function(){return f.a.chain(j).get("data.tracking",[]).last().get("routeId").value()}),[j]);if(p)return Object(y.jsx)(d.Errors,{errors:[p]});if(u||f.a.isEmpty(m)||f.a.isEmpty(j))return Object(y.jsx)(Ae,{});return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"".concat(f.a.get(i,"form.title",""),"  - Submission Route")}),N.exists&&F?Object(y.jsx)(De,{message:"The removal of full ownership from ".concat(f.a.get(N,"data.data.email","")," will allow other process ownership participants take the full ownership of the process and edit the process forms submissions. Are you sure, you wish to continue?"),onYes:C,onNo:function(){return I(!1)}}):N.exists&&Object(y.jsxs)("button",{className:"btn btn-primary my-2",onClick:function(){return I(!0)},children:["Remove Current Owner - ",f.a.get(N,"data.data.email","")]}),Object(y.jsx)("div",{className:"alert alert-primary",role:"alert",children:Object(y.jsx)(Wt,{routeTrack:j,showRoutesIds:!0})}),g?Object(y.jsx)(De,{message:"After cancellation, the route recipients will lose their current permissions to the form submission. Are you sure you wish to cancel the route ".concat(P,"?"),onYes:function(){ne(m),function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=r._id,c=f.a.get(t,"data.tracking",[]),s=f.a.last(c),i=1===c.length,u=te(r);e({type:"CANCEL_ROUTE_REQUEST"});var l=[];if(i)Se(vn),he(n),pe(n,f.a.get(t,"data.routeInitiators[0]")),u&&(Z(r,n,f.a.get(t,"data.routeInitiators[0]"),!0),W(n,r)),l=[be(n,o),me(t._id,null,x.routeTrack),me(s.routeId,null,x.route)];else{if(Oe(t),Ee(n,t.data,r),u){var d=f.a.get(t,"data.tracking",[]),m=f.a.last(d);J(n,m.stageId)}l=[be(n,o),be(t,null,x.routeTrack),me(s.routeId,null,x.route)]}He.a.all(l).then((function(t){var n=Object(b.a)(t,3),r=n[0],o=n[1];n[2],e(mn(r,i?{}:o)),a()})).catch((function(t){e(fn(t)),a(t)}))}(c,j,m,i.form,(function(t){t||(_({type:"success",content:"Route succesfully canceled"}),e.push("/form/".concat(n,"/routes")))}))},onNo:function(){return v(!1)}}):Object(y.jsxs)("button",{className:"btn btn-primary",onClick:function(){return v(!0)},children:["Cancel Last Route ",Object(y.jsx)("br",{}),"(ID:  ",P,")"]})]})},da=function(){return Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/routes",component:ua}),Object(y.jsx)(l.b,{path:"/form/:formId/routes/:submissionId",render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(la,Object(u.a)({},e))})}})]})})},ma=function(e){var t=e.submissionsRequestParams,n=void 0===t?{}:t,r=Object(l.g)(),o=Object(l.i)().formId,c=Object(u.a)({limit:1e5,query:{},select:"",sort:"-modified"},n),s={active:!1,selectedIds:[],deletePermanently:!1,archive:!1,moveToCurrent:!1},i=Object(a.useState)(c),m=Object(b.a)(i,2),j=m[0],p=m[1],h=Object(a.useState)(!1),O=Object(b.a)(h,2),g=O[0],v=O[1],S=Object(a.useState)(s),E=Object(b.a)(S,2),F=E[0],I=E[1],_=Fn().addAlert,N=Bt(),C=N.state,P=N.dispatch,w=ht().state;Object(a.useEffect)((function(){p((function(e){var t=Object(u.a)(Object(u.a)({},e),n);return v(!0),f.a.isEqual(e,t)?e:t}))}),[n]);var T=Object(a.useCallback)((function(e,t){zt(P,e,j,t,o)}),[P,o,j]);if(Object(a.useEffect)((function(){T(1)}),[T,o,j]),w.isActive||C.isActive||!g)return Object(y.jsx)(Ae,{});var k=C.submissions.map((function(e){return Object(u.a)(Object(u.a)({},e),e.metadata)})),R=function(){T(1),I(s)},A=function(){I(Object(u.a)(Object(u.a)({},s),{},{selectedIds:F.selectedIds}))},U=function(){var e=F.deletePermanently,t=F.archive,n=F.moveToCurrent,r=F.selectedIds;if(n||t){var a=t?Fe:"",c=f.a.chain(C.submissions).filter((function(e){return f.a.some(r,(function(t){return e._id===t}))})).each((function(e){a?_e(e,a):Ne(e)})).value();Yt(P,c,o,null,(function(e){e||(R(),_({type:"success",content:"Form Submissions are successfully moved to the ".concat(n?"Current":t&&"Archived")}))}))}else e&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};e({type:"SUBMISSIONS_ACTION_START"}),He.a.all(f.a.map(t,(function(e){return me(e,n)}))).then((function(){e({type:"SUBMISSIONS_RESET"}),r()})).catch((function(t){e(Vt(t)),r(t)}))}(P,r,o,(function(e){e||(R(),_({type:"success",content:"Form Submissions are successfully deleted"}))}))},D=function(){return Object(y.jsx)(d.Form,{submission:{data:{submissions:k,selectedSubmissions:F.selectedIds}},src:x.getSrc("namedSubmissionsTable"),options:Object(u.a)({noSubmit:!0,hide:{moveToDeleted:!0,track:!0}},w.options),formReady:function(e){e.on("open",(function(e){var t=e._id;t&&r.push("/form/".concat(o,"/submission/").concat(t))})),e.on("page",(function(){Ce(e,e.data.selectedSubmissions)})),e.on("deselectAll",(function(){Ce(e,[])})),e.on("moveToArchived",(function(){I(Object(u.a)(Object(u.a)({},s),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],archive:!0}))})),e.on("moveToCurrent",(function(){I(Object(u.a)(Object(u.a)({},s),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],moveToCurrent:!0}))})),e.on("deletePermanently",(function(){I(Object(u.a)(Object(u.a)({},s),{},{active:!0,selectedIds:e.data.selectedSubmissions||[],deletePermanently:!0}))})),e.on("selectRow",(function(t){var n=e.data.selectedSubmissions;e.data.selectedSubmissions=f.a.includes(n,t._id)?Object(Y.a)(f.a.filter(n,(function(e){return e!==t._id}))):[].concat(Object(Y.a)(n),[t._id]),Ce(e,e.data.selectedSubmissions),e.triggerChange()}))}})},M="Deleted Submissions - ".concat(w.form.title," Form "),L=function(){var e=F.deletePermanently,t=F.archive,n=F.moveToCurrent;return e?Object(y.jsxs)("span",{children:["You will not be able to restore form submissions after permanent deletion. Are you sure you wish to delete ",Object(y.jsx)("strong",{children:"all selected form submission(s) permanently"}),"?"]}):t?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected form submission(s)"})," from the ",Object(y.jsx)("strong",{children:"Deleted"})," to the ",Object(y.jsx)("strong",{children:"Archived"}),"?"]}):n?Object(y.jsxs)("span",{children:["Are you sure you wish to move ",Object(y.jsx)("strong",{children:"all selected form submission(s)"})," from the ",Object(y.jsx)("strong",{children:"Deleted"})," to the ",Object(y.jsx)("strong",{children:"Current"}),"?"]}):void 0},B=function(){return Object(y.jsxs)("div",{className:"form-index position-relative",children:[F.active&&Object(y.jsx)(Zt,{onNo:A,onYes:U,message:L(),onModalCloseClick:A}),Object(y.jsx)(d.Errors,{errors:[w.error,C.error]}),Object(y.jsx)(Be,{text:M}),f.a.isEmpty(k)?"No items to display.":Object(y.jsx)(D,{})]})};return Object(y.jsx)(B,{})},fa=function(){return Object(y.jsx)(Lt,{children:Object(y.jsx)(l.d,{children:Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId/deleted",render:function(e){return Object(y.jsx)(ma,Object(u.a)({submissionsRequestParams:{query:{"metadata.routed__exists":!1,"metadata.status":Ie}}},e))}})})})},ba=n(247),ja=n.n(ba),pa=n(169),ha=n.n(pa),Oa=n(252),ga=n.n(Oa),va=n(38),xa=n(39),ya=n(70),Sa=n(43),Ea=n(58),Fa=n(66),Ia=n(122),_a=n.n(Ia),Na=n(154),Ca=n.n(Na),Pa=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){var e,r,a;Object(va.a)(this,n),arguments[0]instanceof HTMLElement||arguments[1]?(r=arguments[0],a=arguments[1]):a=arguments[0],a.skipInit=!1,a.display="wizard",(e=t.call(this,r,a)).page=e.options.page=0;var o=function(t){e.groups[t]&&e.groups[t].components&&(e.groups[t].componentOrder=Object.keys(e.groups[t].components).map((function(n){return e.groups[t].components[n]})).filter((function(e){return e&&!e.ignore})).sort((function(e,t){return e.weight-t.weight})).map((function(e){return e.key})))};for(var c in e.groups)o(c);e.options.hooks.attachPanel=function(t,n){n.refs.removeComponent&&e.addEventListener(n.refs.removeComponent,"click",(function(){var t=e.pages.findIndex((function(e){return e.key===n.key})),r=e._form.components.findIndex((function(e){return e.key===n.key}));-1!==t&&e.removePage(t,r)}))};var s=e.options.hooks.renderComponents;e.options.hooks.renderComponents=function(e,t){var n=t.components,r=t.self;return"form"!==r.type||r.root?s(e,{components:n,self:r}):e};var i=e.options.hooks.attachComponents;return e.options.hooks.attachComponents=function(e,t,n,r){return"form"!==r.type||r.root?i(e,t,n,r):e},e.on("saveComponent",(function(t,n){var r=e.webform.components.map((function(e){return e.component}));if(e._form.components.includes(n))e._form.components[e._form.components.indexOf(n)]=t,e.rebuild();else if(r.includes(n))e._form.components.push(t),e.rebuild();else{var a=e._form.components.findIndex((function(e){return n.key===e.key}));-1!==a&&(e._form.components[a]=t,e.rebuild())}}),!0),e}return Object(xa.a)(n,[{key:"allowDrop",value:function(e){return!this.webform||!this.webform.refs||this.webform.refs.webform!==e}},{key:"formsStageId",get:function(){return $}},{key:"pages",get:function(){return f.a.filter(this._form.components,{type:"panel"})}},{key:"currentPage",get:function(){var e=this.pages;return e&&e.length>=this.page?e[this.page]:null}},{key:"form",get:function(){return this._form},set:function(e){var t=this;this._form=e,this._form.components&&Array.isArray(this._form.components)||(this._form.components=[]);var n=e.properties.stagesSettings;this.stage=this.options.stage=f.a.get(n,"[0].id","");var r=n.length;if(0===this.pages.length)this._form.components=Object(Y.a)(this.getDefaultStages(0,r,n));else{var a=f.a.chain(n).map((function(e){return e.id})).value(),o=f.a.chain(this._form.components).filter((function(e){return f.a.includes([].concat(Object(Y.a)(a),[t.formsStageId]),e.stageId)})).groupBy("stageId").value(),c=f.a.map(a,(function(e){return o[e]||[]}));if(c.push(o[this.formsStageId]),this._form.components=f.a.flatten(c),f.a.chain(this._form.components).filter((function(e){return e.stageId!==t.formsStageId})).groupBy("stageId").keys().value().length<r){var s=f.a.map([].concat(Object(Y.a)(a),[this.formsStageId]),(function(e,n){var r=f.a.filter(t._form.components,(function(t){return t.stageId===e}));return r.length?r:t.getPageConfig(1,[],e)}));this._form.components=f.a.flatten(s)}}this.addAccessControlFields(),this.rebuild()}},{key:"addAccessControlFields",value:function(){var e=f.a.get(this.options,"accessControlComp",{}),t=e.key;f.a.each(this._form.components,(function(n,r){n.components=f.a.filter(n.components,(function(e){return e.key!==t})),0===r&&n.components.push(e)}))}},{key:"schema",get:function(){f.a.assign(this.currentPage,this.webform._form.components[0]);var e=new Ca.a(this.options);return e.setForm(this._form,{noEmit:!0}),e.schema}},{key:"render",value:function(){var e=this;return this.renderTemplate("builderWizard",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:"builder-sidebar-".concat(this.id),groups:this.groupOrder.map((function(t){return e.renderTemplate("builderSidebarGroup",{group:e.groups[t],groupKey:t,groupId:"builder-sidebar-".concat(e.id),subgroups:e.groups[t].subgroups.map((function(n){return e.renderTemplate("builderSidebarGroup",{group:n,groupKey:n.key,groupId:"group-container-".concat(t),subgroups:[]})}))})}))}),pages:this.pages,stages:this.stagesSettings,form:this.webform.render(),formsStage:this.isFormsStage()})}},{key:"attach",value:function(e){var t=this;return this.loadRefs(e,{addPage:"multiple",gotoPage:"multiple",gotoStage:"multiple",gotoFormsStage:"multiple"}),this.refs.addPage.forEach((function(e){t.addEventListener(e,"click",(function(e){e.preventDefault(),t.addPage()}))})),this.refs.gotoPage.forEach((function(e,n){t.addEventListener(e,"click",(function(e){e.preventDefault(),t.setPage(+e.target.dataset.index)}))})),this.refs.gotoStage.forEach((function(e,n){t.addEventListener(e,"click",(function(e){e.preventDefault();var r=f.a.get(t.stagesSettings,"[".concat(n,"].id"),"");t.stage=t.options.stage=r,t.setPage(f.a.findIndex(t.pages,(function(e){return e.stageId===r})))}))})),this.refs.gotoFormsStage.forEach((function(e,n){t.addEventListener(e,"click",(function(e){e.preventDefault(),t.stage=t.formsStageId,t.setPage(f.a.findIndex(t.pages,(function(e){return e.stageId===t.formsStageId})))}))})),Object(ya.a)(Object(Sa.a)(n.prototype),"attach",this).call(this,e)}},{key:"rebuild",value:function(){var e=this.currentPage;return this.webform.setForm({display:"form",type:"form",components:e?[e]:[]},{keepAsReference:!0}),this.redraw()}},{key:"stagesSettings",get:function(){return f.a.get(this._form,"properties.stagesSettings",[])}},{key:"isFormsStage",value:function(){return this.stage===this.formsStageId}},{key:"addPage",value:function(e){var t=this,n=f.a.findLastIndex(this.pages,(function(e){return e.stageId===t.stage})),r=f.a.filter(this.pages,(function(e){return e.stageId===t.stage})).length+1,a=e&&e.schema,o=a?Q.Utils.fastCloneDeep(e.schema):this.getPageConfig(r,[],this.stage);return _a.a.uniquify(this._form.components,o),a?this._form.components.push(o):this._form.components.splice(n+1,0,o),this.emitSaveComponentEvent(o,o,this._form,"components",this._form.components.length-1,!0,o),this.emit("change",this._form),this.rebuild()}},{key:"removePage",value:function(e,t){var n=this;return this._form.components.splice(t,1),this.emit("change",this._form),0===e&&this.addAccessControlFields(),e===this.pages.length?!f.a.some(this._form.components,(function(e){return e.stageId===n.stage}))?(this._form.components.push(this.getPageConfig(1,[],this.stage)),this.addAccessControlFields(),this.rebuild()):this.setPage(e-1):(!f.a.some(this._form.components,(function(e){return e.stageId===n.stage}))&&(this._form.components.splice(e,0,this.getPageConfig(1,[],this.stage)),this.addAccessControlFields()),this.setPage(f.a.findIndex(this._form.components,(function(e){return e.stageId===n.stage}))),this.rebuild())}},{key:"setPage",value:function(e){if(e!==this.page)return this.page=this.options.page=e,this.rebuild()}},{key:"getDefaultStages",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],a=e;a<e+t;a++)r.push(this.getDefaultStage(n[a].id));return r.push(this.getPageConfig(1,[],this.formsStageId)),f.a.flatten(r)}},{key:"getDefaultStage",value:function(e){return[this.getPageConfig(1,[],e)]}},{key:"getPageConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r={type:"panel",components:t,stageId:n,buttonSettings:{previous:!1,cancel:!1,next:!1}};return n===this.formsStageId?Object(u.a)({title:"Form ".concat(e),label:"Form ".concat(e),key:"form".concat(e,"Stage").concat(n)},r):Object(u.a)({title:"Page ".concat(n,"-").concat(e),label:"Page ".concat(n,"-").concat(e),key:"page".concat(e,"Stage").concat(n)},r)}},{key:"pasteComponent",value:function(e){if(!(e instanceof n))return this._form.components.find((function(t){return f.a.isEqual(e.component,t)}))?void this.addPage(e):Object(ya.a)(Object(Sa.a)(n.prototype),"pasteComponent",this).call(this,e)}}]),n}(d.Formio.Builders.getBuilder("webform"));d.Templates.current.builderWizard.form=function(e){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    '.concat(e.sidebar,'\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea">\n    <span class="badge badge-light">\n      Stages\n    </span>\n    <div class="d-flex flex-row">\n      <ol class="breadcrumb w-100">\n        ').concat(e.stages.map((function(t){return'<li>\n          <span title="'.concat(t.title,'" class="mr-2 badge ').concat(t.id===e.self.stage?"badge-primary":"badge-info",' wizard-page-label" ref="gotoStage">').concat(t.title,"</span>\n        </li>")})).join(""),'\n      \n      </ol>\n      <div class="breadcrumb d-block border-left border-light" title="Process Forms"  >\n        <span title="Process Forms" class="badge badge-secondary ').concat(e.formsStage?"text-dark":"",' p-1 wizard-page-label" ref="gotoFormsStage">PROCESS FORMS</span>\n      </div>\n    </div>\n    <span  class="badge badge-light">\n      Stage Panels\n    </span>\n    <ol class="breadcrumb">\n      ').concat(e.pages.map((function(t,n){return t.stageId===e.self.stage?'<li>\n        <span title="'.concat(t.title,'" data-index="').concat(n,'" class="mr-2 badge ').concat(e.formsStage&&n===e.self.page?"text-dark":""," ").concat(e.formsStage?"badge-secondary":n===e.self.page?"badge-primary":"badge-info",' wizard-page-label" ref="gotoPage">').concat(t.title,"</span>\n      </li>"):""})).join(""),'\n      <li>\n        <span title="').concat(e.t(e.formsStage?"Add Form Page":"Create Page"),'" class="mr-2 badge badge-success wizard-page-label" ref="addPage">\n          <i class="').concat(e.iconClass("plus"),'"></i> ').concat(e.t(e.formsStage?"Form":"Page"),'\n        </span>\n      </li>\n    </ol>\n    <div ref="form">\n      ').concat(e.form,"\n    </div>\n  </div>\n</div>")};var wa=Pa;d.Formio.Builders.addBuilders({wizard:wa});var Ta=function(e,t){var n=t.type,r=t.value,a=ha()(e);switch(n){case"formChange":for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);return e;case"replaceForm":return ha()(r);case"title":"title"!==n||e._id||(a.name=ga()(r),a.path=ga()(r).toLowerCase())}return ja()(a,n,r),a},ka=function(e){var t=Object(a.useReducer)(Ta,ha()(e.form)),n=Object(b.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(!1),s=Object(b.a)(c,2),i=s[0],l=s[1];Object(a.useEffect)((function(){var t=e.form;!t||r._id===t._id&&r.modified===t.modified||o({type:"replaceForm",value:t})}),[e.form,r]);var m=function(e,t){var n=t.target,r="checkbox"===n.type?n.checked:n.value;o({type:e,value:r})},j=e.saveText,p=e.options,h=e.builder,O=Object(u.a)(Object(u.a)({},p),{},{builder:{custom:{title:"Navigation",weight:-5,default:!0},basic:{title:"Basic",weight:-5,default:!1}},accessControlComp:e.accessControlComp});return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"row ",children:[Object(y.jsx)("div",{className:"col-lg-2 col-md-4 col-sm-4",children:Object(y.jsxs)("div",{id:"form-group-title",className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"title",className:"control-label field-required",children:"Title"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"title",placeholder:"Enter the form title",value:r.title||"",onChange:function(e){return m("title",e)}})]})}),Object(y.jsx)("div",{className:"col-lg-2 col-md-4 col-sm-4",children:Object(y.jsxs)("div",{id:"form-group-name",className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"name",className:"control-label field-required",children:"Name"}),Object(y.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter the form machine name",value:r.name||"",onChange:function(e){return m("name",e)}})]})}),Object(y.jsx)("div",{className:"col-lg-2 col-md-4 col-sm-4",children:Object(y.jsxs)("div",{id:"form-group-path",className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"path",className:"control-label field-required",children:"Path"}),Object(y.jsx)("div",{className:"input-group",children:Object(y.jsx)("input",{type:"text",className:"form-control",id:"path",placeholder:"path",style:{textTransform:"lowercase",width:"120px"},value:r.path||"",onChange:function(e){return m("path",e)}})})]})}),Object(y.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-4 row align-items-center",children:Object(y.jsx)("a",{className:"nav-link mt-2 ml-2",title:"Stages Settings",href:"#",onClick:function(){return l(!i)},children:Object(y.jsx)("i",{className:"fa fa-solid fa-gear fa-2x"})})}),Object(y.jsx)("div",{id:"save-buttons",className:"col-lg-3 col-md-5 col-sm-5 save-buttons pull-right",children:Object(y.jsx)("span",{className:"btn btn-primary pull-right px-5",onClick:function(){return function(){var t=e.saveForm;t&&"function"===typeof t&&t(r)}()},children:j})})]}),i&&Object(y.jsx)(d.Form,{submission:{data:{stages:f.a.chain(r).get("properties.stagesSettings",[]).cloneDeep().value()}},src:x.getSrc("processSettings"),formReady:function(e){e.on("saveStages",(function(e){o({type:"properties.stagesSettings",value:f.a.get(e,"stages",[])}),l(!1)}))}}),Object(y.jsx)(d.FormBuilder,{form:r,options:O,builder:h,onChange:function(e,t){o({type:"formChange",value:t})}},r._id)]})};ka.defaultProps={form:{title:"",name:"",path:"",display:"wizard",type:"form",properties:{process:!0,stages:2,stagesSettings:[{title:"stage 1",id:"1"},{title:"stage 2",id:"2"}]},components:[],accessControlComp:{}}};var Ra=ka,Aa=function(e){var t,n=ht(),r=n.state,o=n.dispatch,c=Fn().addAlert,s=r.loadingAccessControlComp,i=r.accessControlCompError,u=r.accessControlComp;Object(a.useEffect)((function(){At(o)}),[o]);return s?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"Edit ".concat(null===(t=r.form)||void 0===t?void 0:t.title," Process")}),Object(y.jsx)("hr",{}),Object(y.jsx)(d.Errors,{errors:[r.error,i]}),Object(y.jsx)(Ra,{form:f.a.cloneDeep(r.form),saveText:"Save Process",saveForm:function(e){return kt(o,e,(function(e,t){e||c({type:"success",content:"Form succesfully updated"})}))},accessControlComp:u})]})},Ua=function(){var e=Object(l.g)(),t=ht(),n=t.state,r=t.dispatch,o=n.loadingAccessControlComp,c=n.accessControlCompError,s=n.accessControlComp;Object(a.useEffect)((function(){At(r)}),[r]);return o?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"Create Process"}),Object(y.jsx)("hr",{}),Object(y.jsx)(d.Errors,{errors:[n.error,c]}),Object(y.jsx)(Ra,{saveForm:function(t){kt(r,t,(function(t,n){t||(r({type:"FORM_RESET"}),e.push("/form/".concat(n._id,"/edit")))}))},saveText:"Create Process",accessControlComp:s})]})},Da=["number","datetime","checkbox"],Ma=function(e){return"data.".concat(e.field.path)},La=function(e){return Da.includes(e.field.type)?e["".concat(e.field.type,"_value")]:e.value},Ba=function(e){var t=e.operator,n=La(e),r=Ma(e);switch(t){case"gt":return{$gt:["$".concat(r),{$dateFromString:{dateString:n}}]};case"gte":return{$gte:["$".concat(r),{$dateFromString:{dateString:n}}]};case"lt":return{$lt:["$".concat(r),{$dateFromString:{dateString:n}}]};case"lte":return{$lte:["$".concat(r),{$dateFromString:{dateString:n}}]};default:return null}},Ga=function(e){var t={},n=e.queries.filter((function(e){var t=La(e);return t||f.a.isBoolean(t)})),r=e.queries.filter((function(e){return"empty"===e.operator}));n.filter((function(e){return"datetime"!==e.field.type})).forEach((function(e){t[Ma(e)]=function(e){var t=La(e);switch(e.operator){case"notEqual":return{$ne:t};case"startsWith":return{$regex:"^".concat(t),$options:"i"};case"contain":return{$regex:"^.*".concat(t,".*$"),$options:"i"};case"notContain":return{$regex:"^((?!".concat(t,").)*$"),$options:"i"};case"endsWith":return{$regex:"".concat(t,"$"),$options:"i"};case"matches":return{$regex:t,$options:"i"};case"gt":return{$gt:t};case"gte":return{$gte:t};case"lt":return{$lt:t};case"lte":return{$lte:t};default:return t}}(e)}));var a=n.filter((function(e){return"datetime"===e.field.type})),o=a.map(Ba);return o.length&&(t.$expr={$and:o}),a.forEach((function(e){t[Ma(e)]={$ne:null}})),r.length&&(t.$and=[]),r.forEach((function(e){var n={};n[Ma(e)]="";var r={};r[Ma(e)]=null,t.$and.push({$or:[n,r]})})),t},qa=function(){var e=Object(l.i)(),t=ht().state,n={template:"bootstrap",inconset:"fa",form:t.form,isProcess:t.isProcess},r=t.isProcess?t.form.components.filter((function(e){return"-1"===e.stageId})).map((function(e){return e.components[0]})):[];r.length&&(n.processFormIds=r.map((function(e){return e.form})).join(","));var a=function(n){!function(e,t,n){var r="/".concat(t?"form/".concat(t):"".concat(n)),a="".concat(d.Formio.getProjectUrl()).concat(r,"/export?format=csv&view=formatted");new d.Formio(a).makeRequest("export",a,"GET",null,{ignoreCache:!0,headers:{"x-query":JSON.stringify(e)}}).then((function(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"});ae.a.saveAs(t,"".concat(n,".csv"))}))}(Ga(n),t.isProcess?n.processForm._id:e.formId,t.isProcess?"".concat(t.form.title," - ").concat(n.processForm.title):t.form.title)};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:t.form.title}),Object(y.jsx)(d.Form,{src:x.getSrc("csvFilters"),formReady:function(e){e.on("csvDownload",a)},options:n})]})},Va=function(){var e=Object(l.i)().formId,t=ht(),n=t.dispatch,r=t.state,o=r.hasFormAccess,s=r.checkingAccess,i=r.accessCheckError,m=r.form,b=r.isActive,j=r.loadingFormFolder,p=r.formFolderError,h=r.error,O=r.isProcess,g=r.formFolder,v=T().state,S=v.is,E=v.user,F=An(),I=F.state,_=F.dispatch,N=I.isUserGroupsLoading,C=I.isUserGroupsFetched,P=I.allowCsv,w=se(S);if(Object(a.useEffect)((function(){w||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission"),a=new d.Formio(r);e({type:"ACCESS_CHECK_REQUEST"}),a.loadSubmissions({params:{"data.form._id":t}}).then((function(t){e(_t(!!t.length)),n(null,t)})).catch((function(t){e(Nt(t)),n(t)}))}(n,e)}),[n,e,w]),Object(a.useEffect)((function(){(o||w)&&(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a="/".concat(t?"form/".concat(t):"".concat(n)),o="".concat(d.Formio.getProjectUrl()).concat(a),c=new d.Formio(o);e(xt(t,o)),c.loadForm().then((function(t){var n=t;if("form"===n.display&&!n.components.some((function(e){return"submissionAccessData"===e.key}))||"wizard"===n.display&&!f.a.get(n,"components[0].components",[]).some((function(e){return"submissionAccessData"===e.key})))throw Error("The form does not have Submission Access Data configuration. Please contact an administrator to fix this.");var a=[],o=!1;Q.Utils.eachComponent(n.components,(function(e,t){e.key===ce&&(o=!0),e.autofilledValue&&a.push({path:t,autofilledValue:e.autofilledValue})}),!0),e(yt(n,null,a,o)),r(null,n)})).catch((function(t){e(St(t)),r(t)}))}(n,e),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission"),a=new d.Formio(r);e({type:"FOLDER_REQUEST"}),a.loadSubmissions({params:{"data.form._id":t}}).then((function(t){e(Ft(t[0]||{})),n(null,t)})).catch((function(t){e(It(t)),n(t)}))}(n,e))}),[n,e,o,w]),Object(a.useEffect)((function(){var e=f.a.get(g,"data.userGroups",[]),t=f.a.get(E,"_id",""),n=e.filter((function(e){return e.data.allowCsv&&e.data.csvForms.includes(r.id)}));if(!w&&n.length&&t&&!N&&!C){var a=n.map((function(e){return e._id})).join(",");!function(e,t){var n=t.limit,r=t.query,a=t.select,o=t.sort,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};e({type:"USER_GROUPS_REQUEST"}),je({limit:n,query:r,select:a,sort:o},c,s,i).then((function(t){e(Mn(t)),u(null,t)})).catch((function(t){e(Ln(t)),u(t)}))}(_,{limit:1e6,query:{"data.group._id__in":a,"data.user._id":t}},{},null,x.userGroup)}}),[_,E,w,g,C,N,r.id]),(s||b||f.a.isEmpty(m)||j)&&!h)return Object(y.jsx)(Ae,{});if(!o&&!w)return Object(y.jsx)(d.Errors,{errors:[i||"You are not authorized to view this page."]});var k=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"/form"},title:"",priority:0},{icon:"fa fa-pencil",getPath:function(e,t){return"/form/".concat(t)},title:"Enter Data",notAdmin:!0,priority:10},{icon:"fa fa-list-alt",getPath:function(e,t){return"/form/".concat(t,"/submission")},exact:!1,title:w?"Current Data":"Current",priority:20},{icon:"fa fa-arrow-circle-up",getPath:function(e,t){return"/form/".concat(t,"/routed")},exact:!1,notAdmin:!0,title:"Routed",priority:30},{icon:"fa fa-arrow-circle-up",getPath:function(e,t){return"/form/".concat(t,"/routes")},exact:!1,adminOnly:!0,title:"Data Routes",priority:35},{icon:"fa fa-arrow-circle-down",getPath:function(e,t){return"/form/".concat(t,"/incoming")},exact:!1,notAdmin:!0,title:"Incoming",priority:40},{icon:"fa fa-th-list",getPath:function(e,t){return"/form/".concat(t,"/tracked")},exact:!1,notAdmin:!0,title:"Tracked",priority:45},{icon:"fa fa-check-square-o",getPath:function(e,t){return"/form/".concat(t,"/myform")},exact:!0,notAdmin:!0,title:"Manage My Form",priority:50},{icon:"fa fa-edit",getPath:function(e,t){return"/form/".concat(t,"/folder")},adminOnly:!0,title:"Form Folder",exact:!1,priority:60},{icon:"fa fa-edit",getPath:function(e,t){return"/form/".concat(t,"/edit")},adminOnly:!0,hide:!O,title:"Edit Process",priority:65},{icon:"fa fa-trash",getPath:function(e,t){return"/form/".concat(t,"/delete")},adminOnly:!0,title:"Delete Form",priority:70},{icon:"fa fa-file-archive-o",getPath:function(e,t){return"/form/".concat(t,"/archived")},exact:!1,notAdmin:!0,title:"Archived",priority:75},{icon:"fa fa-trash",getPath:function(e,t){return"/form/".concat(t,"/deleted")},exact:!1,notAdmin:!0,title:"Deleted",priority:80},{icon:"fa fa-download",getPath:function(e,t){return"/form/".concat(t,"/csv")},exact:!0,hide:!w&&!P,title:"CSV",priority:85}],(function(e){return e.priority})),R=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:k.map((function(t){return t.adminOnly&&!w||t.notAdmin&&w||t.hide?null:Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(t.exact)||t.exact,to:t.getPath("",e),children:[Object(y.jsx)("i",{className:t.icon})," ",t.title]})},t.title)}))})},A=[{path:"/form/:formId/edit",component:Aa,hide:!O},{path:"/form/:formId/delete",component:ir},{path:"/form/:formId/folder",component:lr},{path:"/form/:formId/routes",component:da},{path:"/form/:formId/csv",component:qa}],U=[Object(y.jsx)(l.b,{path:"/form/:formId/routed",component:$r},"routed"),Object(y.jsx)(l.b,{path:"/form/:formId/incoming",component:Xr},"incoming"),Object(y.jsx)(l.b,{path:"/form/:formId/tracked",component:sa},"tracked"),Object(y.jsx)(l.b,{path:"/form/:formId/archived",component:ra},"archived"),Object(y.jsx)(l.b,{path:"/form/:formId/deleted",component:fa},"deleted"),Object(y.jsx)(l.b,{path:"/form/:formId/myform",render:function(e){return Object(y.jsx)(br,{children:Object(y.jsx)(Er,Object(u.a)({},e))})}},"myform"),Object(y.jsx)(l.b,{exact:!0,path:"/form/:formId",render:function(e){return Object(y.jsx)(Lt,{children:Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{addSubmissionAccess:!0}))})})}},"newSubmission")];return P&&U.push(Object(y.jsx)(l.b,{path:"/form/:formId/csv",component:qa},"csv")),Object(y.jsxs)("div",{children:[Object(y.jsx)(R,{}),Object(y.jsx)(d.Errors,{errors:[h,p]}),!h&&Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{path:"/form/:formId/submission",component:sr}),w?A.map((function(e){return e.hide?null:Object(y.jsx)(l.b,{path:e.path,component:e.component},e.path)})):U]})]})},za=function(){var e,t=Object(l.g)(),n=et(),r=n.state,o=n.dispatch,c=r.requestParams,s=T().state.is,i=se(s),u=Object(a.useCallback)((function(e,t){var n=[o,c,e,t];i?ot.apply(void 0,n):st.apply(void 0,n)}),[c,o,i]);Object(a.useEffect)((function(){u(1)}),[u,c]);var m=r.isActive,f=function(){return Object(y.jsx)(d.Form,{submission:{data:{forms:r.forms}},src:x.getSrc(i?"adminFormsTable":"formsTable"),options:{noSubmit:!0},formReady:function(e){e.on("row:click",(function(e){t.push(i?"/form/".concat(e.formId||e._id,"/submission"):"/form/".concat(e.formId||e._id))}))}})};return Object(y.jsx)("div",{children:m?Object(y.jsx)(Ae,{}):null!==(e=r.forms)&&void 0!==e&&e.length?Object(y.jsx)(f,{}):"No forms found"})},Ya=function(){var e=et(),t=e.state,n=e.dispatch,r=t.formsUpdateProgress,o=t.formsUpdating,s=t.error,i=t.requestParamsSet,u=T().state.is,l=kr().state,m=l.filter,b=l.error,j=l.set,p=Fn().addAlert,h=se(u),O=Object(a.useCallback)((function(){if(f.a.isEmpty(m))return{};var e=m.folder,t=m.noFolder,n=m.searchQuery,r=m.searchProperty,a={};if(h){var o="".concat(r,"__regex");e&&e._id&&!t&&(a["".concat("properties.folder")]=e._id),t&&(a["".concat("properties.folder__exists")]=!1),n&&r&&(a["".concat(o)]="/".concat(n.trim(),"/ig"))}else{var c="data.form.".concat(r,"__regex");e&&e._id&&(a["".concat("data.folder._id")]=e._id),n&&r&&(a["".concat(c)]="/".concat(n.trim(),"/ig"))}return a}),[m,h]);Object(a.useEffect)((function(){j&&dt(n,O())}),[n,m,O,j]);var g=function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e({type:"UPDATE_START"}),ut().then((function(t){return lt(e,t,100,1)})).then((function(n){e({type:"UPDATE_FINISH"}),t(null,n)})).catch((function(n){e(at()),t(n)}))}(n,(function(e){p({type:"success",content:"Form are succesfully updated"})}))},v=function(){return h?Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("button",{onClick:g,className:"btn btn-dark btn-sm mb-3",children:"Update Form Access Control Fields"}),Object(y.jsxs)(c.b,{className:"btn btn-primary btn-sm mb-3 px-4",to:"/form/create",children:[Object(y.jsx)("i",{className:"fa fa-plus"}),"\xa0 Create Process"]})]}):null};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"Forms"}),Object(y.jsxs)("p",{className:"alert alert-primary",role:"alert",children:["This is a list of all the forms and resources for the project. You can ",Object(y.jsx)("b",{children:"filter and sort the rows"})," in the table using the menu on the right side of each column header. It is also possible to ",Object(y.jsx)("b",{children:"hide / show columns"}),"."]}),Object(y.jsx)(d.Errors,{errors:[s,b]}),o?Object(y.jsx)(Ge,{title:"Forms Access Control Component Update",progress:r,message:"".concat(r,"% . . . Please wait. It can take some minutes")}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v,{}),Object(y.jsx)(Dr,{filterName:Nr,filterOptions:{isAdmin:h},filterFormName:"formsFilter"}),j&&i&&Object(y.jsx)(za,{})]})]})},Qa=function(){return Object(y.jsx)(Ze,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,render:function(e){return Object(y.jsx)(Tr,{children:Object(y.jsx)(Ya,Object(u.a)({},e))})},path:"/form"}),Object(y.jsx)(l.b,{exact:!0,path:"/form/create",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Ua,Object(u.a)({},e))})}}),Object(y.jsx)(l.b,{path:"/form/:formId",render:function(e){return Object(y.jsx)(Rn,{children:Object(y.jsx)(pt,{children:Object(y.jsx)(Va,Object(u.a)({},e))})})}})]})})},$a=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=cn(),i=s.dispatch,d=s.state;Object(a.useEffect)((function(){hn(i,o,null,n)}),[o,i,n]);var m=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View Group Member",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},title:"Edit  Group Member",priority:20},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete  Group Member",priority:50}],(function(e){return e.priority})),b=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:m.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!0,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})},j=function(){var e,t=null===(e=d.submission)||void 0===e?void 0:e.data;if(t){var n=t.group,r=t.user;return"".concat(r.data.email," from the group '").concat(n.data.groupName,"'")}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(b,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!0,formName:n,hideLabel:!0})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!1,formName:n,hideLabel:!0})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{formName:n,paramName:r,pathStart:t,deleteSubject:j()}))}})]})]})},Ka=function(){var e="member",t=Object(l.i)().groupId,n="/groups/".concat(t,"/members"),r=x.userGroup,o=ht(),c=o.dispatch,s=o.state,i=s.form,d=s.isActive,m=cn().state,b=f.a.get(m,"submission.data.groupName",""),j=Object(a.useCallback)((function(e){if(e.components){var t=Q.Utils.getComponent(e.components,"group");t&&(t.tableView=!1)}return e}),[]);return Object(a.useEffect)((function(){wt(c,null,r,j)}),[c,r,j]),Object(a.useEffect)((function(){Tt(c,{disableGroup:!0})}),[c]),d||f.a.isEmpty(i)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(n),render:function(e){return Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:r,getViewPath:function(e,t){return"".concat(n,"/").concat(t._id)},getEditPath:function(e,t){return"".concat(n,"/").concat(t._id,"/edit")},getDeletePath:function(e,t){return"".concat(n,"/").concat(t._id,"/delete")},createSubmissionPath:"".concat(n,"/create"),pathStart:n,submissionsRequestParams:{query:{"data.group.data.groupName":b}},addBtnTitle:"Member",title:"".concat(b," Group Members")}))}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(n,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:r,submission:{data:{group:m.submission}},pathStart:n}))})}}),Object(y.jsx)(l.b,{path:"".concat(n,"/:").concat(e,"Id"),render:function(t){return Object(y.jsx)(on,{children:Object(y.jsx)($a,Object(u.a)(Object(u.a)({},t),{},{pathStart:n,paramName:e,formName:r}))})}})]})})})})},Ha=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=cn(),i=s.dispatch,d=s.state;Object(a.useEffect)((function(){hn(i,o,null,n)}),[o,i,n]);var m=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},title:"Edit",priority:20},{icon:"fa fa-user-plus",getPath:function(e,t){return"".concat(e,"/").concat(t,"/members")},exact:!1,title:"Members",priority:30},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete",priority:40}],(function(e){return e.priority})),b=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:m.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})},j=function(){var e,t=null===(e=d.submission)||void 0===e?void 0:e.data;if(t){var n=t.groupName;return"the group '".concat(n,"'")}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(b,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!0,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!1,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{formName:n,pathStart:t,paramName:r,deleteSubject:j()}))}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/members"),render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Ka,Object(u.a)(Object(u.a)({},e),{},{groupSubmission:f.a.get(d,"submission",{})}))})}})]})]})};Ha.defaultProps={eventNavbarLinks:[]};var Wa=Ha,Ja=function(e){var t="group",n="/groups",r=x.usersGroup,o=ht(),c=o.dispatch,s=o.state,i=s.form,d=s.isActive;return Object(a.useEffect)((function(){wt(c,null,r)}),[c,r]),d||f.a.isEmpty(i)?Object(y.jsx)(Ae,{}):Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(n),render:function(e){return Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:r,getViewPath:function(e,t){return"".concat(n,"/").concat(t._id)},getEditPath:function(e,t){return"".concat(n,"/").concat(t._id,"/edit")},getDeletePath:function(e,t){return"".concat(n,"/").concat(t._id,"/delete")},createSubmissionPath:"".concat(n,"/create"),pathStart:n,addBtnTitle:"Group",title:"Groups"}))}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(n,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:r,pathStart:n}))})}}),Object(y.jsx)(l.b,{path:"".concat(n,"/:").concat(t,"Id"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(Wa,Object(u.a)(Object(u.a)({},e),{},{pathStart:n,paramName:t,formName:r}))})}})]})})})},Xa=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=cn(),i=s.dispatch,d=s.state;Object(a.useEffect)((function(){hn(i,o,null,n)}),[o,i,n]);var m=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View User Group",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},title:"Edit User Group",priority:20},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete User Group",priority:50}],(function(e){return e.priority})),b=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:m.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!0,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})},j=function(){var e,t=null===(e=d.submission)||void 0===e?void 0:e.data;if(t){var n=t.group,r=t.user;return"the group '".concat(n.data.groupName,"' for the user '").concat(r.data.email,"'")}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(b,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!0,formName:n,hideLabel:!0})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!1,formName:n,hideLabel:!0})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{formName:n,paramName:r,deleteSubject:j(),pathStart:t}))}})]})]})},Za=function(){var e="groups",t=Object(l.i)().userId,n="/users/".concat(t,"/groups"),r=x.userGroup,o=ht(),c=o.dispatch,s=o.state,i=s.form,d=s.isActive,m=cn().state,b=f.a.get(m,"submission.data.email",""),j=Object(a.useCallback)((function(e){if(e.components){var t=Q.Utils.getComponent(e.components,"user");t&&(t.tableView=!1)}return e}),[]);return Object(a.useEffect)((function(){wt(c,null,r,j)}),[c,r,j]),Object(a.useEffect)((function(){Tt(c,{disableMember:!0})}),[c]),d||f.a.isEmpty(i)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(n),render:function(e){return Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:r,getViewPath:function(e,t){return"".concat(n,"/").concat(t._id)},getEditPath:function(e,t){return"".concat(n,"/").concat(t._id,"/edit")},getDeletePath:function(e,t){return"".concat(n,"/").concat(t._id,"/delete")},createSubmissionPath:"".concat(n,"/create"),pathStart:n,submissionsRequestParams:{query:{"data.user.data.email":b}},addBtnTitle:"Group",title:"".concat(b," Groups")}))}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(n,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:r,submission:{data:{user:m.submission}},pathStart:n,title:"Add Group"}))})}}),Object(y.jsx)(l.b,{path:"".concat(n,"/:").concat(e,"Id"),render:function(t){return Object(y.jsx)(on,{children:Object(y.jsx)(Xa,Object(u.a)(Object(u.a)({},t),{},{pathStart:n,paramName:e,formName:r}))})}})]})})})})},eo=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=cn(),i=s.dispatch,d=s.state,m=f.a.get(d,"submission",{});Object(a.useEffect)((function(){hn(i,o,null,n)}),[o,i,n]);var b=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},title:"Edit",priority:20},{icon:"fa fa-user-plus",getPath:function(e,t){return"".concat(e,"/").concat(t,"/groups")},exact:!1,title:"Groups",priority:30},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete",priority:40}],(function(e){return e.priority})),j=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:b.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})},p=function(){if(m.data){var e=m.data.email;return"the user ".concat(e)}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"User"}),Object(y.jsx)(j,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!0,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!1,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{pathStart:t,formName:n,paramName:r,deleteSubject:p()}))}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/groups"),render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Za,Object(u.a)(Object(u.a)({},e),{},{groupSubmission:m}))})}})]})]})},to=function(e){var t="user",n="/users",r=x.user,o=ht(),c=o.dispatch,s=o.state,i=s.form,d=s.isActive;return Object(a.useEffect)((function(){wt(c,null,r)}),[c,r]),d||f.a.isEmpty(i)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(n),render:function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:r,getViewPath:function(e,t){return"".concat(n,"/").concat(t._id)},getEditPath:function(e,t){return"".concat(n,"/").concat(t._id,"/edit")},getDeletePath:function(e,t){return"".concat(n,"/").concat(t._id,"/delete")},pathStart:n,addBtnTitle:"User",title:"Users",hideAddBtn:!0}))})}}),Object(y.jsx)(l.b,{path:"".concat(n,"/:").concat(t,"Id"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(eo,Object(u.a)(Object(u.a)({},e),{},{pathStart:n,paramName:t,formName:r}))})}})]})})})})},no=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=T().state,i=s.is,d=s.userInfo,m=f.a.isEqual(o,d._id),b=se(i),j=cn(),p=j.dispatch,h=j.state,O=h.isActive;Object(a.useEffect)((function(){hn(p,o,null,n)}),[o,p,n]);var g=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},adminOnly:!0,showCondition:m,title:"Edit",priority:20},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},adminOnly:!0,title:"Delete",priority:40}],(function(e){return e.priority})),v=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:g.map((function(e){return!e.adminOnly||b||e.showCondition?Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title):null}))})},x=function(){var e=f.a.get(h,"submission.data",null);if(e){var t=e.email,n=e.firstName,r=e.lastName;return"the profile for ".concat(n," ").concat(r," (").concat(t,")")}};return O?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(Be,{text:"Employee Profile"}),Object(y.jsx)(v,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,options:{isUserProfile:m},readOnly:!0,formName:n})}}),b||m?Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,options:{isUserProfile:m},readOnly:!1,formName:n})}}):null,b?Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ar,Object(u.a)(Object(u.a)({},e),{},{pathStart:t,formName:n,paramName:r,deleteSubject:x()}))}}):null]})]})},ro=function(){var e="employee",t="/employees",n=x.userProfile,r=ht(),o=r.dispatch,c=r.state,s=c.form,i=c.isActive;return Object(a.useEffect)((function(){wt(o,null,n)}),[o,n]),i||f.a.isEmpty(s)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t),render:function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:n,getViewPath:function(e,n){return"".concat(t,"/").concat(n._id)},getEditPath:function(e,n){return"".concat(t,"/").concat(n._id,"/edit")},getDeletePath:function(e,n){return"".concat(t,"/").concat(n._id,"/delete")},createSubmissionPath:"".concat(t,"/create"),pathStart:t,addBtnTitle:"Employee",title:"Employees",hideAddBtn:!0}))})}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:n,pathStart:t}))})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(e,"Id"),render:function(r){return Object(y.jsx)(on,{children:Object(y.jsx)(no,Object(u.a)(Object(u.a)({},r),{},{pathStart:t,paramName:e,formName:n}))})}})]})})})})},ao=o.a.createContext(),oo={parentFolder:null,parentFolderError:"",loadingParentFolder:!1,deletingSubfolders:!1,deleteSubfoldersStatus:{},deleteSubfoldersError:"",deletePermissionError:"",updatingDependencies:!1,updateSubfoldersStatus:{},updateFolderFormsStatus:{},updateDependenciesError:""},co="The folder cannot be deleted as it contains forms. Please delete or move forms from this folder and its subfolders to other folders.",so="The folder cannot be deleted as its subfolders contain forms. Please delete or move forms from subfolders to other folders.",io={checkingFolder:{progress:15,message:"Checking Folder for Deletion"},searching:{progress:20,message:"Searching Subfolders"},checkingSubfolders:{progress:40,message:"Checking for Deletion"},getting:{progress:50,message:"Searching Subfolders"},checkingChildren:{progress:60,message:"Checking for Deletion"},deleting:{progress:70,message:"Deleting Subfolders"},finishing:{progress:90,message:"Start Deleting Folder"}},uo={starting:{progress:5,message:"Starting Updating Subfolders"},gettingSubfolders:{progress:20,message:"Checking Subfolders"},updatingSubfolders:{progress:50,message:"Updating Subfolders"},savingSubfolders:{progress:80,message:"Saving  Subfolders"},finishing:{progress:99,message:"Finishing"}},lo={starting:{progress:5,message:"Starting Updating Folder Forms"},loadingFolderForms:{progress:20,message:"Checking Folder Forms"},updatingFolderForms:{progress:50,message:"Updating Folder Forms"},savingFolderForms:{progress:80,message:"Saving Folder Forms"},finishing:{progress:99,message:"Finishing"}},mo=function(e,t){switch(t.type){case"PARENT_FOLDER_REQUEST":return Object(u.a)(Object(u.a)({},e),{},{parentFolderError:"",loadingParentFolder:!0,parentFolder:null});case"PARENT_FOLDER_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{parentFolderError:"",loadingParentFolder:!1,parentFolder:t.parentFolder});case"PARENT_FOLDER_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{parentFolderError:t.error,loadingParentFolder:!1});case"FOLDER_RESET":return oo;case"DELETE_SUBFOLDERS_START":return Object(u.a)(Object(u.a)({},e),{},{deleteSubfoldersError:"",deletingSubfolders:!0,deletePermissionError:""});case"SET_DELETE_SUBFOLDERS_STATUS":return Object(u.a)(Object(u.a)({},e),{},{deleteSubfoldersStatus:io["".concat(t.status)]});case"DELETE_SUBFOLDERS_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{deleteSubfoldersError:t.error,deletingSubfolders:!1,deleteSubfoldersStatus:{}});case"DELETE_PERMISSION_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{deletingSubfolders:!1,deleteSubfoldersStatus:{},deletePermissionError:t.error});case"UPDATE_DEPENDENCIES_START":return Object(u.a)(Object(u.a)({},e),{},{updatingDependencies:!0,updateDependenciesError:""});case"SET_UPDATE_SUBFOLDERS_STATUS":return Object(u.a)(Object(u.a)({},e),{},{updatingDependencies:!0,updateSubfoldersStatus:uo["".concat(t.status)]});case"SET_UPDATE_FORMS_STATUS":return Object(u.a)(Object(u.a)({},e),{},{updatingDependencies:!0,updateFolderFormsStatus:lo["".concat(t.status)]});case"UPDATE_DEPENDENCIES_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{updateDependenciesError:t.error,updatingDependencies:!1,updateDependenciesStatus:{}});default:return e}};function fo(e){var t=o.a.useReducer(mo,oo),n=Object(b.a)(t,2),r=n[0],a=n[1],c=o.a.useMemo((function(){return[r,a]}),[r,a]);return Object(y.jsx)(ao.Provider,Object(u.a)({value:c},e))}function bo(){var e=o.a.useContext(ao);if(!e)throw new Error("useFolder must be used within a FolderProvider");var t=Object(b.a)(e,2);return{state:t[0],dispatch:t[1]}}var jo=function(e){return{type:"PARENT_FOLDER_SUCCESS",parentFolder:e}},po=function(e){return{type:"PARENT_FOLDER_FAILURE",error:e}},ho=function(e){return{type:"DELETE_SUBFOLDERS_FAILURE",error:e}},Oo=function(e){return{type:"SET_DELETE_SUBFOLDERS_STATUS",status:e}},go=function(e){return{type:"DELETE_PERMISSION_FAILURE",error:e}},vo=function(e){return{type:"UPDATE_DEPENDENCIES_FAILURE",error:e}},xo=function(e){return{type:"SET_UPDATE_SUBFOLDERS_STATUS",status:e}},yo=function(e){return{type:"SET_UPDATE_FORMS_STATUS",status:e}},So=function e(t,n,r,a){return t.loadSubmissions({params:{"data.parentFolder._id":n,select:"_id"}}).then((function(n){if(!n.length)return r;if(n.length){var o=n.map((function(e){return r.push(e._id),Eo(e._id)}));return a&&a(Oo("checkingSubfolders")),He.a.all(o).then((function(o){if(f.a.some(o,(function(e){return!e})))return[!1];a&&a(Oo("getting"));var c=n.map((function(n){return r.push(n._id),e(t,n._id,r)}));return a&&a(Oo("checkingChildren")),He.a.all(c)}))}}))},Eo=function(e,t){var n=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission"));return t&&t(),n.loadSubmissions({params:{"data.folder._id":e}}).then((function(e){return!e.length}))},Fo=function(e,t){var n=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folder,"/submission"));return e(Oo("searching")),So(n,t,[],e)},Io=function(e){return new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folder,"/submission/").concat(e)).deleteSubmission()},_o=function e(t,n,r,a,o){return t.loadSubmissions({params:Object(u.a)(Object(u.a)({},a),{},{"data.parentFolder._id":n})}).then((function(n){if(!n.length)return r;if(n.length){var o=n.map((function(n){return r.push(n),e(t,n._id,r,a)}));return He.a.all(o)}}))},No=function(e,t,n){var r=d.Formio.getProjectUrl(),a="".concat(r,"/").concat(t,"/submission/").concat(n._id),o=new d.Formio(a);return o.saveSubmission(n)},Co=function(e,t,n){var r=n.initialName,a=n.newName,o=n.deletedGroups,c=n.updatedFolder,s=o&&!!o.length;if(a||s)return e(xo("gettingSubfolders")),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folder,"/submission"));return _o(r,t,[],n)}(e,t,!a&&s?{"data.userGroups._id__in":o.join(",")}:{}).then((function(t){var n=f.a.chain(t).flattenDeep().uniq().value(),i=[];e(xo("updatingSubfolders"));var u=f.a.map(n,(function(e){if(s){var t=f.a.filter(f.a.get(e,"data.userGroups"),(function(e){return!o.includes(e._id)}));f.a.set(e,"data.userGroups",t),i.push(Po(null,e._id,t))}if(a){var n=f.a.get(e,"data.folderPath"),c=f.a.chain(n).split("/").map((function(e){var t=e.trim();return t===r?a:t})).join("/ ");f.a.set(e,"data.folderPath",c)}return e})),l=f.a.keyBy(u,"_id");l["".concat(c._id)]=c;var d=f.a.map(u,(function(t){var n=f.a.get(t,"data.parentFolder._id"),r=f.a.get(l,n);return r&&r.data&&f.a.set(t,"data.parentFolder.data",r.data),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return No(e,x.folder,t,n)}(e,t)}));return e(xo("savingSubfolders")),He.a.all([].concat(i,[d]))}))},Po=function(e,t,n){var r=new d.Formio("".concat(d.Formio.getProjectUrl(),"/").concat(x.folderForm,"/submission"));return e&&e(yo("loadingFolderForms")),r.loadSubmissions({params:{"data.folder._id":t}}).then((function(t){e&&e(yo("updatingFolderForms"));var r=f.a.map(t,(function(t){return f.a.set(t,"data.userGroups",n),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return No(e,x.folderForm,t,n)}(e,t)}));return e&&e(yo("savingFolderForms")),He.a.all(r)}))},wo=function(e){var t=f.a.get(e,"data.userGroups",[]).map((function(e){return e._id})).join(",");return"_id__in=".concat(t)},To=function(){var e=Object(l.i)().folderId,t="/folders/".concat(e,"/subfolders"),n=x.folder,r=ht(),o=r.dispatch,c=r.state,s=c.form,i=c.isActive,d=cn(),m=d.state,b=d.dispatch,j=m.submission,p=Object(a.useCallback)((function(e){if(e.components){var t=Q.Utils.getComponent(e.components,"group");t&&(t.tableView=!1)}return e}),[]);Object(a.useEffect)((function(){wt(o,null,n,p)}),[o,n,p]),Object(a.useEffect)((function(){Tt(o,{disableParent:!0})}),[o]);var h=function(){var e=j;return{data:{parentFolder:e,subfolder:!0,userGroups:f.a.get(e,"data.userGroups",[])}}};return i||f.a.isEmpty(s)?Object(y.jsx)(Ae,{}):Object(y.jsx)("div",{children:Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t),render:function(e){return Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:n,beforeViewSubmission:function(){b({type:"SUBMISSION_RESET"})},getViewPath:function(e,t){return"/folders/".concat(t._id)},createSubmissionPath:"".concat(t,"/create"),pathStart:t,submissionsRequestParams:{query:{"data.parentFolder._id":j._id}},addBtnTitle:"Subfolder",title:"".concat(f.a.get(j,"data.folderName","")," Folder Subfolders")}))}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:n,options:{subfolderGroupsQuery:wo(j)},submission:h(),pathStart:t}))})}})]})})})})},ko=function(e){var t=e.formName,n=(e.paramName,e.pathStart),r=Object(l.g)(),a=Object(l.i)().folderId,o=Bt().dispatch,c=ht().state,s=cn(),i=s.state,u=s.dispatch,m=i.deletingSubmission,b=i.submission,j=bo(),p=j.dispatch,h=j.state,O=h.deletingSubfolders,g=h.deleteSubfoldersStatus,v=h.deleteSubfoldersError,x=h.deletePermissionError,S=g.progress,E=g.message,F=function(){var e=(null===b||void 0===b?void 0:b.data)||{},t=e.folderName,n=e.folderPath;return"Are you sure you wish to delete the folder '".concat(t,"' (path: ").concat(n,") with all its subfolders?")},I=function(){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e({type:"DELETE_SUBFOLDERS_START"}),e(Oo("checkingFolder")),Eo(t).then((function(r){if(r)return Fo(e,t).then((function(t){var r=f.a.chain(t).flattenDeep().uniq().value();if(r.length&&!1===r[0]){var a=so;return e(go(a)),void n(a)}e(Oo("deleting"));var o=f.a.map(r,(function(e){return Io(e)}));return He.a.all(o).then((function(){e(Oo("finishing")),e({type:"FOLDER_RESET"}),n(null,!0)}))}));var a=co;e(go(a)),n(a)})).catch((function(t){e(ho(t)),n(t)}))}(p,b._id,(function(e){e||gn(u,a,null,t,(function(e){e||x||(o({type:"SUBMISSIONS_RESET"}),r.push(n))}))}))},_=function(){r.push(n)};return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[i.error,c.error,v,x]}),O||m?Object(y.jsx)(Ge,{progress:m?"98":S,message:m?"Deleting folder":E}):x?null:Object(y.jsx)(De,{message:F(),onYes:I,onNo:_})]})},Ro=function(e){var t=e.formName,n=e.pathStart,r=e.options,a=Object(l.g)(),o=ht().state,c=Bt().dispatch,s=cn(),i=s.state,m=s.dispatch,b=i.submission,j=i.savingSubmission,p=f.a.cloneDeep(b.data),h=bo(),O=h.dispatch,g=h.state,v=g.updatingDependencies,x=g.updateSubfoldersStatus,S=g.updateFolderFormsStatus,E=g.updateDependenciesError,F=x.progress,I=x.message,_=S.progress,N=S.message;return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.Errors,{errors:[o.error,i.error,E]}),v||j?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ge,{progress:j?5:F,title:"Updating Subfolders",message:j?"Saving Folder":I}),Object(y.jsx)(Ge,{progress:_,title:"Updating Folder Forms Access",message:N})]}):Object(y.jsx)(d.Form,{form:o.form,submission:b,url:i.url,onSubmit:function(e){On(m,e,null,t,(function(e,t){e||function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};e({type:"UPDATE_DEPENDENCIES_START"}),e(xo("starting")),e(yo("starting"));var a=n.newName,o=n.newGroups,c=n.deletedGroups,s=[],i=c&&!!c.length;a||i?s.push(Co(e,t,n).then((function(t){return e(xo("finishing")),t}))):e(xo("finishing")),o?s.push(Po(e,t,o).then((function(t){return e(yo("finishing")),t}))):e(yo("finishing")),He.a.all(s).then((function(t){e({type:"FOLDER_RESET"}),r(null,t)})).catch((function(t){e(vo(t)),r(t)}))}(O,t._id,function(e){var t=e.data,n={};n.updatedFolder=e,n.newName=f.a.isEqual(t.folderName,p.folderName)?"":t.folderName,n.newName&&(n.initialName=p.folderName);var r=t.userGroups,a=p.userGroups;n.deletedGroups=[];var o=f.a.reduce(a,(function(e,t){return f.a.find(r,(function(e){return f.a.isEqual(e._id,t._id)}))?e:(n.deletedGroups.push(t._id),!0)}),!1);return f.a.isEqual(r.length,a.length)&&!o||(n.newGroups=r),n}(t),(function(e){e||(c({type:"SUBMISSIONS_RESET"}),a.push("".concat(n,"/").concat(t._id)))}))}))},options:Object(u.a)(Object(u.a)({},o.options),r)})]})},Ao=function(e){var t=e.pathStart,n=e.formName,r=e.paramName,o=Object(l.i)()["".concat(r,"Id")],s=bo(),i=s.dispatch,m=s.state,b=m.parentFolder,j=m.loadingParentFolder,p=cn(),h=p.dispatch,O=p.state,g=f.a.get(O,"submission",null),v=f.a.get(g,"data.subfolder"),S=O.isActive;Object(a.useEffect)((function(){hn(h,o,null,n)}),[o,h,n,i]),Object(a.useEffect)((function(){if(i({type:"FOLDER_RESET"}),v){var e=f.a.get(g,"data.parentFolder._id");!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.folder,"/submission/").concat(t),a=new d.Formio(r);e({type:"PARENT_FOLDER_REQUEST"}),a.loadSubmission().then((function(t){e(jo(t)),n(null,t)})).catch((function(t){e(po(t)),n(t)}))}(i,e)}}),[i,g,o,v]);var E=f.a.sortBy([{icon:"fa fa-chevron-left",getPath:function(e,t){return"".concat(e)},title:"",priority:0},{icon:"fa fa-eye",getPath:function(e,t){return"".concat(e,"/").concat(t)},title:"View",priority:10},{icon:"fa fa-edit",getPath:function(e,t){return"".concat(e,"/").concat(t,"/edit")},title:"Edit",priority:20},{icon:"fa fa-folder",getPath:function(e,t){return"".concat(e,"/").concat(t,"/subfolders")},exact:!1,title:"Subfolders",priority:40},{icon:"fa fa-trash",getPath:function(e,t){return"".concat(e,"/").concat(t,"/delete")},title:"Delete",priority:50}],(function(e){return e.priority})),F=function(){return Object(y.jsx)("ul",{className:"nav nav-tabs mb-2",children:E.map((function(e){return Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsxs)(c.c,{className:"nav-link",exact:!f.a.isBoolean(e.exact)||e.exact,to:e.getPath(t,o),children:[Object(y.jsx)("i",{className:e.icon})," ",e.title]})},e.title)}))})};return j||v&&f.a.isEmpty(b)||S||f.a.isEmpty(g)?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)(F,{}),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(t,"/:").concat(r,"Id"),component:function(){return Object(y.jsx)(Nn,{pathStart:t,readOnly:!0,formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/edit"),component:function(){return Object(y.jsx)(Ro,{pathStart:t,options:{subfolderGroupsQuery:v?wo(b):""},formName:n})}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/delete"),render:function(e){return Object(y.jsx)(ko,Object(u.a)(Object(u.a)({},e),{},{formName:n,pathStart:t,paramName:r}))}}),Object(y.jsx)(l.b,{path:"".concat(t,"/:").concat(r,"Id/subfolders"),render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(To,Object(u.a)({},e))})}})]})]})};Ao.defaultProps={eventNavbarLinks:[]};var Uo=Ao,Do=function(e){var t="folder",n="/folders",r=x.folder,o=ht(),c=o.dispatch,s=o.state,i=s.form,d=s.isActive;return Object(a.useEffect)((function(){wt(c,null,r)}),[c,r]),d||f.a.isEmpty(i)?Object(y.jsx)(Ae,{}):Object(y.jsx)(Ze,{children:Object(y.jsx)(Lt,{children:Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"".concat(n),render:function(e){return Object(y.jsx)(rr,Object(u.a)(Object(u.a)({},e),{},{formName:r,getViewPath:function(e,t){return"".concat(n,"/").concat(t._id)},getEditPath:function(e,t){return"".concat(n,"/").concat(t._id,"/edit")},getDeletePath:function(e,t){return"".concat(n,"/").concat(t._id,"/delete")},createSubmissionPath:"".concat(n,"/create"),submissionsRequestParams:{sort:"data.folderPath"},pathStart:n,addBtnTitle:"Folder",title:"Folders"}))}}),Object(y.jsx)(l.b,{exact:!0,path:"".concat(n,"/create"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(ur,Object(u.a)(Object(u.a)({},e),{},{name:r,pathStart:n}))})}}),Object(y.jsx)(l.b,{path:"".concat(n,"/:").concat(t,"Id"),render:function(e){return Object(y.jsx)(on,{children:Object(y.jsx)(fo,{children:Object(y.jsx)(Uo,Object(u.a)(Object(u.a)({},e),{},{pathStart:n,paramName:t,formName:r}))})})}})]})})})},Mo=function(){var e=x.userProfile,t=ht(),n=t.dispatch,r=t.state,o=r.form,c=r.isActive,s=r.error,i=T(),l=i.state,m=i.dispatch,j=l.user,p=cn(),h=p.state,O=p.dispatch,g=h.savingSubmission,v=h.error,S=An(),E=S.dispatch,F=S.state,I=F.addingUserToEveryoneStatus,N=F.addingUserToEveryoneError,C=I.message,P=I.progress,w=Object(a.useState)(!1),k=Object(b.a)(w,2),R=k[0],A=k[1];Object(a.useEffect)((function(){wt(n,null,e)}),[n,e]);var U=Object(u.a)(Object(u.a)({template:"bootstrap",iconset:"fa",readOnly:!1},o.options),{},{userId:j._id,isUserProfile:!0}),D={data:{id:j.data.id,firstName:j.data.firstName,lastName:j.data.lastName,email:j.data.email}};return c||f.a.isEmpty(o)?Object(y.jsx)(Ae,{}):Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"User Profile"}),Object(y.jsx)("div",{className:"alert alert-info",role:"alert",children:Object(y.jsx)("span",{className:"",children:"To start working with the app, please fill in your profile."})}),Object(y.jsx)(d.Errors,{errors:[s,v,N]}),R&&![s,v,N].some(Boolean)?Object(y.jsx)(Ge,{message:g?"Saving User Profile":C,progress:g?15:P}):Object(y.jsx)(d.Form,{form:o,submission:D,onSubmit:function(t){A(!0),On(O,t,null,e,(function(e,t){e||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e(Dn("gettingGroup")),Gn(e).then((function(n){return e(Dn("savingUserInGroup")),qn(0,t,n)})).then((function(t){e(Dn("finishing")),e({type:"USER_RESET"}),n(null,t)})).catch((function(t){e(Un(t)),n(t)}))}(E,j,(function(e,n){e||m(_(t))}))}))},options:Object(u.a)({},U)})]})};var Lo=function(){var e=T(),t=e.dispatch,n=e.state,r=n.isActive,o=n.user,c=n.authenticated,s=n.userInfo,i=n.init,m=n.is,b=n.isUserInfoFetched,j=Object(l.g)(),p=Object(l.h)(),h=se(m);Object(a.useEffect)((function(){Object(d.initAuth)()(t)}),[t]),Object(a.useEffect)((function(){o&&o.data.id&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r="".concat(d.Formio.getProjectUrl(),"/").concat(x.userProfile,"/submission"),a=new d.Formio(r);e({type:"USER_INFO_REQUEST"}),a.loadSubmissions({params:{"data.id":t}}).then((function(t){e(_(t[0]||{})),n(null,t)})).catch((function(t){e(N(t)),n(t)}))}(t,o.data.id)}),[t,o]),Object(a.useEffect)((function(){!i||r||o||"/auth/done"===p.pathname||j.push("/auth"),o&&c&&"/auth/done"===p.pathname&&j.push("/")}),[o,i,r,j,p.pathname,c]);var O=r||!i;return Object(y.jsx)(B,{children:Object(y.jsxs)(y.Fragment,{children:[O?Object(y.jsx)(Me,{className:"alert alert-info",children:Object(y.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(y.jsx)(Ae,{style:{marginBottom:" 10px"}}),"Logging In..."]})}):null,Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(Re,{}),!O&&Object(y.jsxs)(En,{children:[Object(y.jsx)(_n,{}),Object(y.jsx)("div",{className:"container mb-5",id:"main",children:o?o&&b&&f.a.isEmpty(s)?Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{path:"/employees/create",exact:!0,render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(on,{children:Object(y.jsx)(Rn,{children:Object(y.jsx)(Mo,Object(u.a)({},e))})})})}}),Object(y.jsx)(l.b,{path:"/",children:Object(y.jsx)(l.a,{to:"/employees/create"})})]}):(b||h)&&Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/",component:Ue}),Object(y.jsx)(l.b,{exact:!0,path:"/employees/create",children:Object(y.jsx)(l.a,{to:"/"})}),Object(y.jsx)(l.b,{exact:!0,path:"/users/create",children:Object(y.jsx)(l.a,{to:"/"})}),Object(y.jsx)(l.b,{path:"/form",component:Qa}),Object(y.jsx)(l.b,{path:"/incoming",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(ta,Object(u.a)({},e))})}}),Object(y.jsx)(l.b,{path:"/routed",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Kr,Object(u.a)({},e))})}}),!h&&Object(y.jsx)(l.b,{path:"/myforms",component:Lr}),Object(y.jsx)(l.b,{exact:!0,path:"/auth",component:Ye}),Object(y.jsx)(l.b,{path:"/employees",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(ro,Object(u.a)({},e))})}}),h?[Object(y.jsx)(l.b,{path:"/users",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(to,Object(u.a)({},e))})}},"/users"),Object(y.jsx)(l.b,{path:"/groups",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Ja,Object(u.a)({},e))})}},"/groups"),Object(y.jsx)(l.b,{path:"/folders",render:function(e){return Object(y.jsx)(pt,{children:Object(y.jsx)(Do,Object(u.a)({},e))})}},"/folders")]:null,Object(y.jsx)(l.b,{component:Ve})]}):Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/auth/done",component:$e}),Object(y.jsx)(l.b,{exact:!0,path:"/auth",component:Ye})]})})]}),Object(y.jsx)(R,{})]})]})})},Bo=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1445)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Go=d.Formio.AllComponents.button.editForm;var qo=d.Formio.AllComponents.button,Vo=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"onClick",value:function(e){var t,n,r,a;if(!this.disabled&&"builder"!==this.options.attachMode){this.dataValue=!0,this.component.showValidations&&this.emit("checkValidity",this.data);var o=this.root;(null===(t=o.pages[o.page])||void 0===t||null===(n=t.component)||void 0===n?void 0:n.stageId)===(null===(r=o.pages[o.page+1])||void 0===r||null===(a=r.component)||void 0===a?void 0:a.stageId)&&this.root.nextPage()}}}],[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qo.schema.apply(qo,[{type:"nextButton",label:"Next",key:"next",size:"md",action:"",leftIcon:"",rightIcon:"",block:!1,persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"Next Button",group:"custom",icon:"arrow-right",weight:20,schema:n.schema()}}}]),n}(qo);Vo.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Go.apply(void 0,[[{key:"display",components:[{key:"action",ignore:!0},{key:"custom",ignore:!0}]}]].concat(t))};var zo=Vo,Yo=n(31),Qo=d.Formio.AllComponents.button.editForm;function $o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)({label:"Group",widget:"choicesjs",dataSrc:"url",data:{url:"{{Formio.getProjectUrl()}}/usersgroup/submission"},valueProperty:"_id",limit:1e4,validate:{required:!0},template:"<span>{{ item.data.groupName }}</span>",key:"group",lazyLoad:!1,type:"select",disableLimit:!1,searchField:"data.groupName__regex",authenticate:!0,input:!0},e)}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{key:"wrapper",type:"wrapper",label:"Wrapper",input:!1,hideLabel:!0,tableView:!1,customConditional:"show = ['groupUser', 'allGroupUsers'].includes(_.get(row, 'recipientType', ''));",components:[{label:"Conditional",tooltip:"Check it, if you want the group value to change depending on the condition.",disableSortingAndFiltering:!1,tableView:!1,defaultValue:!1,key:"conditional",type:"checkbox",input:!0},$o({label:e,customConditional:"show=!row.conditional"}),{label:"Group Options",addAnother:"Add Group",addAnotherPosition:"bottom",initEmpty:!0,clearOnHide:!0,tooltip:"Add groups and use their keys as value for group variable in Conditional Group field.",customConditional:"show=row.conditional",input:!0,validate:{required:!0},key:"groupOptions",type:"datagrid",components:[{label:"Key",disableSortingAndFiltering:!1,tableView:!0,clearOnHide:!0,calculateValue:"var options = data.groupOptions || [];\n\nfunction getOptionKey(index) {\n  var optionIndex = instance.rowIndex + index;\n  var optionKey = 'gr' + optionIndex\n  var isUnique = !_.some(options, option => option.key === optionKey);\n  return isUnique ? optionKey : getOptionKey(index+1);\n}\n\nvalue = value || getOptionKey(1);",allowCalculateOverride:!0,key:"key",type:"textfield",input:!0},$o()]},{label:"Conditional Group",editor:"ace",autoExpand:!1,placeholder:'group = data.name === "Tom" ? "gr1" : "gr2"',disableSortingAndFiltering:!1,tableView:!0,key:"conditionalGroup",customConditional:"show=row.conditional",validate:{required:!0},description:'<p>The following variables are available in all scripts: <strong>form, submission, data, row, component, instance, moment, _, utils</strong>.\nThe group value must be equal to some Group Options key or empty string. Example: </p><pre>group = data.name === "Tom" ? "gr1" : "gr2";</pre>',type:"textarea",input:!0}]}}var Ho=d.Formio.AllComponents.button,Wo=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"attachButton",value:function(){var e=this;this.on("submit",(function(){if(e.routeInitiated){var t=e.component,n=t.routeStage,r=t.routeRecipients,a=void 0===r?{}:r;a=Q.Utils.fastCloneDeep(a),Yo._.each(a,(function(t,n){if(t.conditional){var r=e.evaluate(t.conditionalGroup,{},"group");a[n]={recipientType:t.recipientType,group:Yo._.chain(t.groupOptions).find((function(e){return e.key===r})).get("group","").value()}}})),e.emit("routeToStage",{routeStage:n,routeRecipients:a}),e.routeInitiated=!1}}),!0),Object(ya.a)(Object(Sa.a)(n.prototype),"attachButton",this).call(this)}},{key:"onClick",value:function(e){Object(ya.a)(Object(Sa.a)(n.prototype),"onClick",this).call(this,e),this.routeInitiated=!0}}],[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ho.schema.apply(Ho,[{type:"routeButton",label:"Route",key:"route",size:"md",action:"submit",leftIcon:"",rightIcon:"",block:!1,persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"Route Button",group:"custom",icon:"arrow-circle-o-right",weight:10,schema:n.schema()}}}]),n}(Ho);Wo.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qo.apply(void 0,[[{key:"display",components:[{key:"action",ignore:!0},{key:"event",ignore:!0}]},{key:"route",label:"Route",weight:5,components:[{label:"Route To Stage",widget:"choicesjs",validate:{required:!0},dataSrc:"custom",dataType:"string",valueProperty:"value",data:{custom:"let stages = _.get(instance, 'options.editForm.properties.stagesSettings', []);\nvalues = _.map(stages, (stage, index) => ({label: stage.title, value: stage.id}));"},key:"routeStage",type:"select",input:!0},{label:"Recipients",key:"routeRecipients",type:"container",input:!0,components:[{label:"Route To:",hideLabel:!1,key:"to",type:"container",input:!0,components:[{label:"Recipient",optionsLabelPosition:"right",inline:!0,hideLabel:!0,tableView:!1,values:[{label:"User",value:"user",shortcut:""},{label:"Group User",value:"groupUser",shortcut:""},{label:"All Group Users",value:"allGroupUsers",shortcut:""}],key:"recipientType",defaultValue:"user",type:"radio",input:!0},Ko("To Group")]},{label:"CCs:",hideLabel:!1,tableView:!1,key:"ccs",type:"container",input:!0,components:[{label:"Recipient",optionsLabelPosition:"right",inline:!0,hideLabel:!0,tableView:!1,values:[{label:"User",value:"user",shortcut:""},{label:"Group User",value:"groupUser",shortcut:""},{label:"All Group Users",value:"allGroupUsers",shortcut:""}],key:"recipientType",defaultValue:"user",type:"radio",input:!0},Ko("CC Group")]},{label:"BCCs:",hideLabel:!1,tableView:!1,key:"bccs",type:"container",input:!0,components:[{label:"Recipient",optionsLabelPosition:"right",inline:!0,hideLabel:!0,tableView:!1,values:[{label:"User",value:"user",shortcut:""},{label:"Group User",value:"groupUser",shortcut:""},{label:"All Group Users",value:"allGroupUsers",shortcut:""}],key:"recipientType",defaultValue:"user",type:"radio",input:!0},Ko("BCC Group")]},{label:"HTML",className:"well",attrs:[{attr:"",value:""}],content:"The <code>User</code> option means that any system user that has access to the process can be selected as the recipient of the submission. </br>\nThe <code>Group User</code> means that any user of specific group can be selected as the recipient of the submission. </br>\nThe <code>All Group Users</code> option means that all users of specific group will be recipients of the submission, the TO/CC/BCC field will be prefilled.",refreshOnChange:!1,key:"html",type:"htmlelement",input:!1,tableView:!1}]}]}]].concat(t))};var Jo=Wo,Xo=d.Formio.AllComponents.button.editForm;var Zo=d.Formio.AllComponents.button,ec=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"onClick",value:function(e){var t,n,r,a;if(!this.disabled&&"builder"!==this.options.attachMode){this.dataValue=!0,this.component.showValidations&&this.emit("checkValidity",this.data);var o=this.root;(null===(t=o.pages[o.page])||void 0===t||null===(n=t.component)||void 0===n?void 0:n.stageId)===(null===(r=o.pages[o.page-1])||void 0===r||null===(a=r.component)||void 0===a?void 0:a.stageId)&&this.root.prevPage()}}}],[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zo.schema.apply(Zo,[{type:"prevButton",label:"Previous",key:"previous",size:"md",action:"",leftIcon:"",rightIcon:"",block:!1,persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"Previous Button",group:"custom",icon:"arrow-left",weight:30,schema:n.schema()}}}]),n}(Zo);ec.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xo.apply(void 0,[[{key:"display",components:[{key:"action",ignore:!0},{key:"custom",ignore:!0}]}]].concat(t))};var tc=ec,nc=d.Formio.AllComponents.button.editForm;var rc=d.Formio.AllComponents.button,ac=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"onClick",value:function(e){var t=this;if(!this.disabled&&"builder"!==this.options.attachMode){this.dataValue=!0,this.component.showValidations&&this.emit("checkValidity",this.data);var n=this.root,r=f.a.findIndex(n.pages,(function(e){return e.component.key===t.component.targetPage}));n.setPage(r)}}}],[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rc.schema.apply(rc,[{type:"toPageButton",label:"Navigate To Page",key:"toPage",size:"md",action:"",leftIcon:"",rightIcon:"",block:!1,persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"To Page Button",group:"custom",icon:"arrows-h",weight:40,schema:n.schema()}}}]),n}(rc);ac.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nc.apply(void 0,[[{key:"display",components:[{key:"action",ignore:!0},{key:"custom",ignore:!0},{label:"Target Page",widget:"choicesjs",tableView:!0,dataSrc:"custom",data:{custom:"let pages = instance.options.editForm.components;\nlet editStageId= instance.options.stage;\nlet stagePages = _.filter(pages, page => page.stageId === editStageId);\nvalues = _.map(stagePages, (page, index) => ({label: page.title, value: page.key }))"},selectThreshold:.3,valueProperty:"value",template:"<span>{{ item.label  }}</span>",key:"targetPage",type:"select",input:!0,validate:{required:!0},weight:5}]}]].concat(t))};var oc=ac,cc=d.Formio.AllComponents.button.editForm;var sc=d.Formio.AllComponents.button,ic=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"onClick",value:function(e){var t=this;if(!this.disabled&&"builder"!==this.options.attachMode){this.dataValue=!0,this.component.showValidations&&this.emit("checkValidity",this.data);var n=this.root,r=f.a.findIndex(n.pages,(function(e){return e.component.key===t.component.targetFormPage}));n.pages[r]&&n.setPage(r),this.emit("navigateToForm",{backTarget:this.component.formBackPath,next:this.component.formNextButton,nextTarget:this.component.formNextPath})}}}],[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sc.schema.apply(sc,[{type:"toFormButton",label:"Navigate To Form",key:"toForm",size:"md",leftIcon:"",rightIcon:"",action:"",block:!1,persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"To Form Button",group:"custom",icon:"step-forward",weight:50,schema:n.schema()}}}]),n}(sc);ic.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cc.apply(void 0,[[{key:"display",components:[{key:"action",ignore:!0},{key:"custom",ignore:!0},{label:"Target Form Page",widget:"choicesjs",tableView:!0,dataSrc:"custom",data:{custom:"let pages = instance.options.editForm.components;\nlet formStageId = '-1';\nlet stagePages = _.filter(pages, page => page.stageId === formStageId);\nvalues = _.map(stagePages, (page, index) => ({label: page.title, value: page.key }))"},selectThreshold:.3,valueProperty:"value",template:"<span>{{ item.label  }}</span>",key:"targetFormPage",type:"select",input:!0,validate:{required:!0},weight:5},{label:"Form Back Button Path",widget:"choicesjs",tableView:!0,weight:7,dataSrc:"custom",data:{custom:"let pages = instance.options.editForm.components;\nlet editStageId= instance.options.stage;\nlet stagePages = _.filter(pages, page => page.stageId === editStageId);\nvalues = _.map(stagePages, (page, index) => ({label: page.title, value: page.key }));"},valueProperty:"value",selectThreshold:.3,customDefaultValue:"let pages = instance.options.editForm.components;\nlet currentPage = _.get(pages, `[${instance.options.page}]`, {});\nvalue = currentPage.key || '';",key:"formBackPath",type:"select",input:!0},{label:"Show Form Next Button",tableView:!1,weight:9,key:"formNextButton",type:"checkbox",input:!0,defaultValue:!1},{label:"Form Next Button Path",widget:"choicesjs",tableView:!0,weight:12,dataSrc:"custom",data:{custom:"let pages = instance.options.editForm.components;\nlet editStageId= instance.options.stage;\nlet stagePages = _.filter(pages, page => page.stageId === editStageId);\nvalues = _.map(stagePages, (page, index) => ({label: page.title, value: page.key }));"},valueProperty:"value",selectThreshold:.3,validate:{required:!0},key:"formNextPath",conditional:{show:!0,when:"formNextButton",eq:"true"},type:"select",input:!0}]}]].concat(t))};var uc=ic,lc=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"formsStageId",get:function(){return $}},{key:"init",value:function(){var e=this;this.on("navigateToForm",(function(t){e.formPageNavigation=t}));var t=Object(ya.a)(Object(Sa.a)(n.prototype),"init",this).call(this);return this.formPageNavigation=this.defaultFormPageNavigation(),this.processForms=[],t}},{key:"buttons",get:function(){return this.isProcess?{}:Object(ya.a)(Object(Sa.a)(n.prototype),"buttons",this)}},{key:"currentStage",get:function(){return f.a.get(this.submission,"metadata.stageId","")}},{key:"processFormInfoPath",get:function(){return"dataValue.metadata.filledInProcess"}},{key:"setSubmission",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ya.a)(Object(Sa.a)(n.prototype),"setSubmission",this).call(this,e,r).then((function(){var n=f.a.get(e,"metadata.stageId","");if(n&&!t.options.readOnly){var r=t.options.initPage||f.a.findIndex(t.pages,(function(e){return+e.component.stageId===+n}));t.setPage(r)}return t.options.readOnly&&t.setPage(0),t.formPageNavigation=t.defaultFormPageNavigation(),e}))}},{key:"attachHeader",value:function(){var e=this;if(this.isProcess){var t,r=this.isAllowPrevious();if(this.attachTooltips(this.refs["".concat(this.wizardKey,"-tooltip")],this.currentPanel.tooltip),this.isBreadcrumbClickable()||r)null===(t=this.refs["".concat(this.wizardKey,"-link")])||void 0===t||t.forEach((function(t,n){(!r||n<=e.enabledIndex)&&e.addEventListener(t,"click",(function(t){var n=+t.target.dataset.index;return e.emit("wizardNavigationClicked",e.pages[n]),t.preventDefault(),e.setPage(n).then((function(){e.emitWizardPageSelected(n)}))}))}))}else Object(ya.a)(Object(Sa.a)(n.prototype),"attachHeader",this).call(this)}},{key:"getProcessFormPages",value:function(){var e=this,t=[];return f.a.each(this.pages,(function(n,r){n.component.stageId===e.formsStageId&&Q.Utils.eachComponent(n.components,(function(a,o){var c;"form"===a.component.type&&f.a.get(a,e.processFormInfoPath,!1)&&t.push({name:(c=f.a.get(e.submission,"data.".concat(o),{}),f.a.get(c,"metadata.submissionName","")),panel:n.component,index:r})}))})),t}},{key:"setPage",value:function(e){var t=this,r=this.page;return Object(ya.a)(Object(Sa.a)(n.prototype),"setPage",this).call(this,e).then((function(){if(t.isProcess&&r!==e&&t.emit("wizardPageSet",t.pages[e],e),t.component.stageId===t.formsStageId){var n=[],a=f.a.get(f.a.find(t.pages,(function(e){return e.component.key===t.component.key})),"components",[]);Q.Utils.eachComponent(a,(function(e){"form"===e.component.type&&n.push(e)})),f.a.each(n,(function(e){f.a.set(e,t.processFormInfoPath,!0)}))}}))}},{key:"defaultFormPageNavigation",value:function(){var e=this;return{backTarget:f.a.chain(this.pages).find((function(t){return t.component.stageId===e.currentStage})).get("component.key","").value(),next:!1}}},{key:"renderContext",get:function(){var e=this.isProcess,t=e?this.getProcessFormPages():[];return Object(u.a)({processForms:t,isProcess:e},Object(ya.a)(Object(Sa.a)(n.prototype),"renderContext",this))}},{key:"prepareHeaderSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return this.isProcess?this.renderTemplate(t,e):Object(ya.a)(Object(Sa.a)(n.prototype),"prepareHeaderSettings",this).call(this,e,t)}},{key:"executeFormPageNavigation",value:function(e){var t=this.formPageNavigation;if(t){var n=t.backTarget,r=t.nextTarget,a=e?r:n,o=f.a.findIndex(this.pages,(function(e){return e.component.key===a}));o>=0&&this.setPage(o),this.formPageNavigation=this.defaultFormPageNavigation()}}},{key:"formNavigationComponents",value:function(){return{label:"Columns",columns:[{components:[{label:"Back",action:"custom",showValidations:!1,block:!0,tableView:!1,key:"back",type:"button",custom:function(e){e.form.executeFormPageNavigation()},input:!0}],width:4,offset:0,push:0,pull:0,size:"md",currentWidth:4},{components:[],width:4,offset:0,push:0,pull:0,size:"md",currentWidth:4},{components:[{label:"Next",action:"custom",showValidations:!1,block:!0,tableView:!1,key:"next",type:"button",input:!0,customConditional:function(e){var t=e.instance.root.formPageNavigation;return f.a.get(t,"next",!1)},custom:function(e){e.form.executeFormPageNavigation(!0)}}],size:"md",width:4,offset:0,push:0,pull:0,currentWidth:4}],key:"formNavigationColumns",type:"columns",input:!1,tableView:!1}}},{key:"initiatePageKey",get:function(){return"defaultInitiateProcessPage"}},{key:"initiateProcessPage",value:function(){return{title:"Initiate Process Page",key:this.initiatePageKey,type:"panel",label:"Initiate New Process",components:[{label:"Initiate New Process",action:"saveState",showValidations:!1,tableView:!1,persistent:!1,key:"defaultInitiateNewProcessBtn",type:"button",input:!0,customConditional:function(e){return!e.instance.options.readOnly},state:"draft"},{html:"<p>{{instance.root.getProcessFormPages().length ? 'Click on the form title to see the form submission' : 'No Process Forms'}}</p>",label:"Content",refreshOnChange:!0,key:"readOnlyProcessComponent",type:"content",customConditional:function(e){return e.instance.options.readOnly},input:!1,tableView:!1}]}}},{key:"setForm",value:function(e,t){var r=this;(this.isProcess=f.a.get(e,"properties.process",!1),this.isProcess)&&(this.options.readOnly||f.a.each(e.components||[],(function(e){e.stageId!==r.formsStageId||f.a.some(e.components,(function(e){return"formNavigationColumns"===e.key}))||e.components.push(r.formNavigationComponents())})),f.a.get(e.components,"[0].key","")===this.initiatePageKey||e.components.unshift(this.initiateProcessPage()));return Object(ya.a)(Object(Sa.a)(n.prototype),"setForm",this).call(this,e,t)}}]),n}(d.Formio.Displays.getDisplay("wizard")),dc=d.Templates.current.wizardHeader.form;d.Templates.current.wizardHeader.form=function(e){return e.isProcess?'\n    <nav aria-label="Wizard navigation" class="" id="'.concat(e.wizardKey,'-header" ref="').concat(e.wizardKey,'-header">\n      <div class="d-flex justify-content-start px-2 flex-wrap" role="tablist">\n        ').concat(e.processForms.length?'<div class="mr-2 py-1 font-weight-bold">Process Forms:</div>':"","\n        ").concat(e.processForms.map((function(t,n){return'<div class="'.concat(e.currentPage===t.index?" text-primary font-weight-bold":"text-muted ",'" style="cursor: pointer;">\n            <div tabindex="0" data-index="').concat(t.index,'" role="tab" class="bg-light mx-1 px-1 py-1" ref="').concat(e.wizardKey,'-link">\n              ').concat(e.t(t.name,{_userInput:!0}),"\n            </div>\n          </div>")})).join(""),'\n      </div>\n      <hr class="mt-1">\n    </nav>\n  '):dc(e)};var mc=lc,fc=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"getSubOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(ya.a)(Object(Sa.a)(n.prototype),"getSubOptions",this).call(this,e),r=f.a.get(this.options,"userProfileId",null);r&&(t.userProfileId=r);var a=f.a.get(this.options,"userId",null);return a&&(t.userId=a),t}},{key:"attach",value:function(e){var t=this;return Object(ya.a)(Object(Sa.a)(n.prototype),"attach",this).call(this,e).then((function(){if(t.options.isProcess){var e=t.subForm._submission;if(!(r=e,f.a.get(r,"metadata.routed"))){var n=t.subForm.getComponent(ce);n?n.on("componentChange",(function(t){f.a.get(t,"component.key","")===ce&&ie(e,t.value)})):ie(e,t.subForm.form.title)}t.subForm&&!t.options.readOnly&&t.subForm.calculateValue()}var r}))}}]),n}(d.Formio.AllComponents.form),bc=fc,jc=d.Formio.AllComponents.base.editForm;function pc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jc.apply(void 0,[[{key:"display",components:[{label:"Show In Route Track",tooltip:"The value of this component will be displayed in the stage route track.",key:"showInTrack",type:"checkbox",input:!0,defaultValue:!1,weight:1900}]}]].concat(t))}d.Components.baseEditForm=pc;var hc=d.Formio.AllComponents.component;hc.prototype.getProcessData=function(){return function e(t){return t.id===t.root.id?t.data:e(t.root)}(this)},hc.editForm=pc;var Oc=hc,gc=d.Formio.AllComponents.textfield,vc=function(e){Object(Ea.a)(n,e);var t=Object(Fa.a)(n);function n(){return Object(va.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,null,[{key:"schema",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gc.schema.apply(gc,[{label:"Auto Name ",hidden:!0,tableView:!0,persistent:!1,clearOnHide:!1,calculateValue:"var date = new Date();\nvalue = form.title +'_'+ date.toLocaleDateString() + '_'+  date.toLocaleTimeString()",key:ce,type:"textfield",input:!0}].concat(t))}},{key:"builderInfo",get:function(){return{title:"Auto Name",group:"basic",icon:"magic",weight:150,schema:n.schema()}}}]),n}(gc),xc={component:Oc,base:Oc,nextButton:zo,routeButton:Jo,prevButton:tc,toPageButton:oc,toFormButton:uc,form:bc,autoName:vc},yc={wizard:mc},Sc=n(515);d.Formio.use(Sc.a),d.Formio.use({components:xc,displays:yc}),i.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(w,{children:Object(y.jsx)(c.a,{children:Object(y.jsx)(Lo,{})})})}),document.getElementById("root")),Bo(console.log)},672:function(e,t,n){}},[[1437,1,2]]]);
//# sourceMappingURL=main.c9ca7e91.chunk.js.map